import{a as pe}from"/build/_shared/chunk-OCNP4HMK.js";import{a as _}from"/build/_shared/chunk-4GVLMWJ7.js";import{a as B}from"/build/_shared/chunk-NAU26CU7.js";import{a as ce}from"/build/_shared/chunk-A7SUEVP2.js";import{b as me}from"/build/_shared/chunk-PXEUFDPR.js";import{y as k}from"/build/_shared/chunk-LTBXYQR6.js";import{e as de}from"/build/_shared/chunk-243AYOFM.js";import{b as N}from"/build/_shared/chunk-HAINM4MF.js";import{Rc as le,Sc as se,Xc as qe,a as b,c as Oe,e as u,f as Fe,pb as U}from"/build/_shared/chunk-QH5UXTNE.js";import{a as Be}from"/build/_shared/chunk-5C6XY6QG.js";import{p as O,q as _e}from"/build/_shared/chunk-WKVXRFKR.js";import{a as D,d as oe,e as Ee}from"/build/_shared/chunk-6UMQ6VR5.js";import{n as Ue}from"/build/_shared/chunk-NSB5NZWW.js";import{a as F}from"/build/_shared/chunk-KOHXVCYB.js";import{c as Re}from"/build/_shared/chunk-VGJ5EBYX.js";import{h as E}from"/build/_shared/chunk-O7CS4SBR.js";import{Cb as Ie,Za as ae,qb as ne,ra as te,tb as m,ua as h,ub as v,vb as w,wb as ie}from"/build/_shared/chunk-NSQYLWAQ.js";import{b as S,c as ee}from"/build/_shared/chunk-4YJISJ47.js";import{a as Le,b as re}from"/build/_shared/chunk-TANAHWHW.js";import{c as Ae,e as g}from"/build/_shared/chunk-ADMCF34Z.js";var ue=Ae((He,ge)=>{function je(i){return i==null}ge.exports=je});var o=g(Le());Ee();var y=g(Be()),ye=g(Ue()),xe=g(ue()),fe=g(Re());Oe();Ie();Fe();_e();qe();var e=g(re()),$e=(i,T)=>[i("pricing.tiers.upToXVMo",{amount:T.monthlyUsageLimit.toLocaleString("en-US")}),i("pricing.tiers.upToXWebsites",{amount:50}),i("pricing.tiers.xAlertsPlural",{amount:50}),i("pricing.tiers.userFlowAnalysis"),i("pricing.tiers.dataExports"),i("pricing.tiers.dataOwnership"),i("main.competitiveFeatures.perf"),i("pricing.tiers.dashboards"),i("pricing.tiers.reports")],Ge=({authenticated:i,isBillingPage:T})=>{var Q;let{t,i18n:{language:d}}=ee("common"),c=oe(),{user:n}=D(a=>a.auth),{theme:be}=D(a=>a.ui.theme),{paddle:he,metainfo:q}=D(a=>a.ui.misc),{lastEvent:j}=he,Y=(n==null?void 0:n.tierCurrency)||q.code,[C,P]=(0,o.useState)(null),[ve,$]=(0,o.useState)(!1),[r,A]=(0,o.useState)(null),[we,G]=(0,o.useState)(null),[H,K]=(0,o.useState)(!1),[X,M]=(0,o.useState)(null),[Ne,L]=(0,o.useState)(!1),[p,ke]=(0,o.useState)((n==null?void 0:n.billingFrequency)||m.monthly),R=i?(0,fe.default)(w,n.planCode)?w:[n.planCode,...w]:w,[s,Ce]=(0,o.useState)(i?v[n.planCode]:v.hobby),Pe=$e(t,s),Me=ne[Y],Se=a=>{let l=Number(a.target.value),f=R[l];Ce(v[f])};(0,o.useEffect)(()=>{(async l=>{(0,xe.default)(l)||(l.event==="Checkout.Complete"?(setTimeout(async()=>{try{let f=await U();c(u.loginSuccessful(f)),c(u.finishLoading())}catch{c(u.logout()),c(O.logout(!1,!1))}b.success(t("apiNotifications.subscriptionUpdated"))},3e3),P(null),M(null)):l.event==="Checkout.Close"&&(P(null),M(null)))})(j)},[j,c,t]);let De=async a=>{$(!0);try{let l=await le(a);A(l)}catch(l){console.error("[ERROR] An error occured while loading subscription update pricing preview:",l),b.error("An error occured while loading subscription update pricing preview"),A(!1)}},J=async a=>{if(C===null&&(n.planCode!==a.planCode||n.billingFrequency!==p&&n.planCode!=="free"&&n.planCode!=="trial")){if(n.subID&&n.planCode!=="none"){let Z=Number(p===m.monthly?a.pid:a.ypid);G(Z),await De(Z);return}if(P(a.planCode),!window.Paddle){b.error("Payment script has not yet loaded! Please, try again."),P(null);return}let f=n.referrerID&&(n.planCode==="trial"||n.planCode==="none")&&!n.cancellationEffectiveDate?te:void 0;window.Paddle.Checkout.open({product:p===m.monthly?a.pid:a.ypid,email:n.email,passthrough:JSON.stringify({uid:n.id}),locale:ae[d]||d,title:a.name,displayModeTheme:be,country:q.country,coupon:f})}},I=a=>{H&&!a||($(!1),A(null),G(null),K(!1))},Te=async()=>{K(!0);try{await se(we);try{let a=await U();c(u.loginSuccessful(a)),c(u.finishLoading())}catch{c(u.logout()),c(O.logout(!1,!1))}b.success(t("apiNotifications.subscriptionUpdated")),I(!0)}catch(a){console.error("[ERROR] An error occured while updating subscription:",a),b.error("An error occured while updating subscription"),I(!0)}},Ye=a=>{C===null&&n.planCode!==a.planCode&&(M(a),L(!0))},V=(Q=v[n.planCode])==null?void 0:Q.index,W=s.index,z=W<V,x;return W>V?x=t("pricing.upgrade"):z?x=t("pricing.downgrade"):n.billingFrequency===p||n.planCode==="free"||n.planCode==="trial"||n.planCode==="none"?x=t("pricing.yourPlan"):p===m.monthly?x=t("pricing.switchToMonthly"):x=t("pricing.switchToYearly"),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{id:"pricing",className:N({"bg-white dark:bg-slate-900/75":!i}),children:[(0,e.jsxs)("div",{className:N("max-w-max whitespace-pre-line",{"px-4 py-24 sm:px-6 lg:px-8":!i,"mx-auto":!T}),children:[(0,e.jsxs)("div",{className:"sm:align-center sm:flex sm:flex-col",children:[!i&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 sm:text-center",children:t("pricing.title")}),(0,e.jsx)("p",{className:"my-5 max-w-prose text-xl leading-relaxed text-slate-900 dark:text-slate-300 sm:text-center",children:t("pricing.adv",{amount:ie})})]}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"text-lg font-medium tracking-tight text-gray-900 dark:text-gray-50",children:s.monthlyUsageLimit.toLocaleString("en-US")}),(0,e.jsx)("p",{className:"text-gray-700 dark:text-gray-200",children:t("pricing.eventPerMonth")})]}),(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsxs)(k,{value:p,onChange:ke,className:"grid grid-cols-2 gap-x-1 rounded-md p-1 text-center text-xs font-semibold leading-5 ring-1 ring-inset ring-gray-200 dark:ring-slate-700",children:[(0,e.jsx)(k.Label,{className:"sr-only",children:t("pricing.frequency")}),(0,e.jsx)(k.Option,{value:m.monthly,className:({checked:a})=>N(a?"bg-slate-900 text-gray-50 dark:bg-indigo-700":"text-gray-500 dark:text-gray-200","flex cursor-pointer items-center justify-center rounded-md px-2.5"),children:(0,e.jsx)("span",{children:t("pricing.monthlyBilling")})},m.monthly),(0,e.jsxs)(k.Option,{value:m.yearly,className:({checked:a})=>N(a?"bg-slate-900 text-gray-50 dark:bg-indigo-700":"text-gray-500 dark:text-gray-200","relative flex cursor-pointer items-center justify-center rounded-md px-2.5"),children:[(0,e.jsx)(me,{label:t("billing.xMonthsFree",{amount:2}),className:"absolute -left-1 -top-5 w-max max-w-[200px]",colour:"yellow"}),(0,e.jsx)("span",{children:t("pricing.yearlyBilling")})]},m.yearly)]})})]})]}),(0,e.jsx)("label",{className:"sr-only",htmlFor:"tier-selector",children:t("pricing.selectPlan")}),(0,e.jsx)("input",{id:"tier-selector",type:"range",min:"0",max:R.length-1,value:R.indexOf(s.planCode),className:"arrows-handle mt-5 h-2 w-full appearance-none rounded-full bg-gray-200 dark:bg-slate-600",onChange:Se}),(0,e.jsxs)("div",{className:"relative mt-5 divide-y rounded-2xl border shadow-sm ring-1 ring-gray-200 dark:ring-slate-700",children:[n.planCode===s.planCode&&(0,e.jsx)("div",{className:"absolute left-5 top-0 translate-y-px transform",children:(0,e.jsx)("div",{className:"flex -translate-y-1/2 transform justify-center",children:(0,e.jsx)("span",{className:"inline-flex rounded-full bg-indigo-600 px-4 py-1 text-sm font-semibold uppercase tracking-wider text-white",children:t("pricing.currentPlan")})})}),s.legacy&&(0,e.jsx)("div",{className:"absolute right-5 top-0 translate-y-px transform",children:(0,e.jsx)("div",{className:"flex -translate-y-1/2 transform justify-center",children:(0,e.jsx)("span",{className:"inline-flex rounded-full bg-amber-400 px-2 py-1 text-sm font-semibold uppercase tracking-wider text-white",children:t("pricing.legacy")})})}),(0,e.jsx)("div",{className:"border-none p-6",children:(0,e.jsx)(pe,{fallback:(0,e.jsx)(_,{}),children:()=>{var a,l;return(0,e.jsxs)("div",{className:"flex flex-wrap justify-between",children:[(0,e.jsxs)("p",{className:"mt-2 sm:mt-0",children:[(0,e.jsxs)("span",{className:"text-4xl font-bold text-[#4D4D4D] dark:text-gray-50",children:[Me.symbol,p===m.monthly?(a=s.price[Y])==null?void 0:a.monthly:(l=s.price[Y])==null?void 0:l.yearly]}),"\xA0",(0,e.jsxs)("span",{className:"text-base font-medium text-gray-500 dark:text-gray-400",children:["/",t(p===m.monthly?"pricing.perMonth":"pricing.perYear")]})]}),i?(0,e.jsx)(ce,{onClick:()=>z?Ye(s):J(s),type:"button",className:"mt-2 sm:mt-0",loading:C===s.planCode,disabled:C!==null||s.planCode===n.planCode&&(n.billingFrequency===p||n.planCode==="free"||n.planCode==="trial"||n.planCode==="none"),primary:!0,large:!0,children:x}):(0,e.jsx)(E,{className:"relative inline-flex select-none items-center rounded-md border border-transparent bg-slate-900 px-4 py-2 text-sm font-medium leading-4 text-gray-50 shadow-sm hover:bg-slate-700 dark:bg-indigo-700 dark:hover:bg-indigo-800",to:F.signup,"aria-label":t("titles.signup"),children:t("common.getStarted")})]})}})}),(0,e.jsx)("div",{className:"border-none px-6",children:(0,e.jsx)("hr",{className:"mx-auto w-full border border-gray-300 dark:border-slate-800"})}),(0,e.jsxs)("div",{className:"border-none px-6 pb-8 pt-6",children:[(0,e.jsx)("h3",{className:"text-xs font-medium uppercase tracking-wide text-gray-900 dark:text-gray-50",children:t("pricing.whatIncl")}),(0,e.jsx)("ul",{className:"mt-6 grid grid-cols-2 gap-4",children:(0,ye.default)(Pe,a=>(0,e.jsxs)("li",{className:"flex space-x-3",children:[(0,e.jsx)(de,{className:"h-5 w-5 flex-shrink-0 text-green-500","aria-hidden":"true"}),(0,e.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:a})]},a))})]})]}),(0,e.jsx)("p",{className:"mt-5 text-base tracking-tight text-gray-900 dark:text-gray-50",children:(0,e.jsx)(S,{t,i18nKey:"billing.contact",values:{amount:10},components:{url:(0,e.jsx)(E,{to:F.contact,className:"font-semibold leading-6 text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-500","aria-label":t("footer.tos")})}})})]}),(0,e.jsx)("div",{className:"checkout-container",id:"checkout-container"})]}),(0,e.jsx)(B,{onClose:()=>{M(null),L(!1)},onSubmit:()=>{L(!1),X&&J(X)},submitText:t("common.yes"),closeText:t("common.no"),title:t("pricing.downgradeTitle"),type:"warning",message:(0,e.jsx)(S,{t,i18nKey:"pricing.downgradeDesc",values:{email:h}}),isOpened:Ne}),(0,e.jsx)(B,{onClose:I,onSubmit:Te,submitText:t("common.confirm"),closeText:t("common.goBack"),title:t("billing.confirmNewPlan"),submitType:"regular",type:"info",isLoading:H,message:(0,e.jsxs)(e.Fragment,{children:[r===null&&(0,e.jsx)(_,{}),r===!1&&(0,e.jsx)("p",{className:"whitespace-pre-line",children:(0,e.jsx)(S,{t,i18nKey:"billing.previewLoadingError",values:{email:h},components:{mail:(0,e.jsx)("a",{title:`Email us at ${h}`,href:`mailto:${h}`,className:"font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"})}})}),r&&(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-base font-bold",children:t("billing.dueNow")}),(0,e.jsx)("p",{className:"text-sm",children:t("billing.dueNowDescription")}),(0,e.jsx)("div",{className:"mt-2 overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,e.jsxs)("table",{className:"200 min-w-full divide-y divide-gray-300 dark:divide-gray-500",children:[(0,e.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-800",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-50 sm:pl-6",children:t("common.amount")}),(0,e.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-50",children:t("common.date")})]})}),(0,e.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-600 dark:bg-slate-800",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900 dark:text-gray-50 sm:pl-6",children:`${r.immediatePayment.symbol}${r.immediatePayment.amount}`}),(0,e.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900 dark:text-gray-50",children:d==="en"?(0,y.default)(r.immediatePayment.date).locale(d).format("MMMM D, YYYY"):(0,y.default)(r.immediatePayment.date).locale(d).format("D MMMM, YYYY")})]})})]})}),r.immediatePayment.amount<0&&(0,e.jsx)("p",{className:"mt-2 italic",children:t("billing.negativePayment",{currency:r.immediatePayment.symbol,dueNowAmount:-r.immediatePayment.amount,dueNowDate:d==="en"?(0,y.default)(r.immediatePayment.date).locale(d).format("MMMM D, YYYY"):(0,y.default)(r.immediatePayment.date).locale(d).format("D MMMM, YYYY"),nextPaymentAmount:r.nextPayment.amount})}),(0,e.jsx)("h2",{className:"mt-5 text-base font-bold",children:t("billing.nextPayment")}),(0,e.jsx)("div",{className:"mt-2 overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,e.jsxs)("table",{className:"200 min-w-full divide-y divide-gray-300 dark:divide-gray-500",children:[(0,e.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-800",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-50 sm:pl-6",children:t("common.amount")}),(0,e.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-gray-50",children:t("common.date")})]})}),(0,e.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-600 dark:bg-slate-800",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900 dark:text-gray-50 sm:pl-6",children:`${r.nextPayment.symbol}${r.nextPayment.amount}`}),(0,e.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900 dark:text-gray-50",children:d==="en"?(0,y.default)(r.nextPayment.date).locale(d).format("MMMM D, YYYY"):(0,y.default)(r.nextPayment.date).locale(d).format("D MMMM, YYYY")})]})})]})})]})]}),isOpened:ve})]})},mt=(0,o.memo)(Ge);export{mt as a};
