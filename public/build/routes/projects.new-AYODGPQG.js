import{d as k}from"/build/_shared/chunk-FINNWZUQ.js";import{a as C}from"/build/_shared/chunk-4GVLMWJ7.js";import{a as A,b as I}from"/build/_shared/chunk-53PIVPIF.js";import{a as _}from"/build/_shared/chunk-NQPXYJUQ.js";import{a as f}from"/build/_shared/chunk-A7SUEVP2.js";import"/build/_shared/chunk-PXEUFDPR.js";import"/build/_shared/chunk-LTBXYQR6.js";import"/build/_shared/chunk-243AYOFM.js";import"/build/_shared/chunk-HAINM4MF.js";import{$c as lt,Xc as ct,_c as T,a as c,c as nt,zb as N}from"/build/_shared/chunk-QH5UXTNE.js";import"/build/_shared/chunk-GO4RMXDG.js";import{u as mt}from"/build/_shared/chunk-GZO74C6C.js";import"/build/_shared/chunk-5C6XY6QG.js";import"/build/_shared/chunk-P4GU2T66.js";import{a as st,p as S,q as it}from"/build/_shared/chunk-WKVXRFKR.js";import{a as d,d as P,e as at}from"/build/_shared/chunk-6UMQ6VR5.js";import"/build/_shared/chunk-DRCRQ7AX.js";import"/build/_shared/chunk-NSB5NZWW.js";import"/build/_shared/chunk-FQ2RG5VJ.js";import"/build/_shared/chunk-C4K24J7E.js";import"/build/_shared/chunk-YG2XDHGZ.js";import{a as l}from"/build/_shared/chunk-KOHXVCYB.js";import"/build/_shared/chunk-VGJ5EBYX.js";import"/build/_shared/chunk-MSGER76V.js";import"/build/_shared/chunk-Z3FUFQEO.js";import{d as b}from"/build/_shared/chunk-O7CS4SBR.js";import{Cb as rt,J as v,mb as j,xa as E}from"/build/_shared/chunk-NSQYLWAQ.js";import{c as y}from"/build/_shared/chunk-4YJISJ47.js";import{b as ot}from"/build/_shared/chunk-VOM23DNI.js";import"/build/_shared/chunk-5YEMDBLX.js";import"/build/_shared/chunk-X4RYED65.js";import"/build/_shared/chunk-2SDAKG4K.js";import{a as et,b as i}from"/build/_shared/chunk-TANAHWHW.js";import{e as n}from"/build/_shared/chunk-ADMCF34Z.js";var r=n(et());at();nt();var u=n(st()),F=n(mt()),w=n(ot());rt();ct();lt();it();var o=n(i()),R=50,pt="Untitled Project",dt=()=>{let{dashboardPaginationPage:B}=d(t=>t.ui.projects),H=T(),O=P(),{user:g,loading:p}=d(t=>t.auth),{t:e}=y("common"),m=b(),[s,U]=(0,r.useState)({name:""}),[G,J]=(0,r.useState)(!1),[X,$]=(0,r.useState)({}),[z,V]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{p||!g.isActive&&!E&&(c.error(e("project.settings.verify")),m(l.dashboard))},[g,m,H,e,p]);let q=async t=>{if(!h){x(!0);try{await N({name:t.name||pt}),k("PROJECT_CREATED"),m(l.dashboard),c.success(e("project.settings.created")),O(S.loadProjects(B*j))}catch(a){c.error(a)}finally{x(!1)}}},K=()=>{let t={};(0,u.default)(s.name)&&(t.name=e("project.settings.noNameError")),(0,F.default)(s.name)>R&&(t.name=e("project.settings.pxCharsError",{amount:R}));let a=(0,u.default)((0,w.default)(t));$(t),J(a)};(0,r.useEffect)(()=>{K()},[s]);let Q=t=>{let{target:a}=t,Z=a.type==="checkbox"?a.checked:a.value;U(tt=>({...tt,[a.name]:Z}))},W=t=>{t.preventDefault(),t.stopPropagation(),V(!0),G&&q(s)},Y=()=>{m(l.dashboard)};return(0,r.useEffect)(()=>{document.title=`${e("project.settings.create")} ${v}`},[e]),p?(0,o.jsx)("div",{className:"flex min-h-min-footer flex-col bg-gray-50 px-4 py-6 dark:bg-slate-900 sm:px-6 lg:px-8",children:(0,o.jsx)(C,{})}):(0,o.jsx)("div",{className:"flex min-h-min-footer flex-col bg-gray-50 px-4 py-6 dark:bg-slate-900 sm:px-6 lg:px-8",children:(0,o.jsxs)("form",{className:"mx-auto w-full max-w-7xl",onSubmit:W,children:[(0,o.jsx)("h2",{className:"mt-2 text-3xl font-bold text-gray-900 dark:text-gray-50",children:e("project.settings.create")}),(0,o.jsx)(_,{name:"name",label:e("project.settings.name"),value:s.name,placeholder:"My awesome project",className:"mt-4",onChange:Q,error:z?X.name:null}),(0,o.jsx)("p",{className:"mb-4 mt-1 text-sm italic text-gray-500 dark:text-gray-300",children:e("project.settings.createHint")}),(0,o.jsxs)("div",{children:[(0,o.jsx)(f,{className:"mr-2 border-indigo-100 dark:border-slate-700/50 dark:bg-slate-800 dark:text-gray-50 dark:hover:bg-slate-700",onClick:Y,secondary:!0,regular:!0,children:e("common.cancel")}),(0,o.jsx)(f,{type:"submit",loading:h,primary:!0,regular:!0,children:e("common.save")})]})]})})},D=(0,r.memo)(I(dt,A.authenticated));var M=n(i());function L(){return(0,M.jsx)(D,{})}export{L as default};
