import{a as Vt,b as da,c as Wc,d as Jc,e as Gc}from"/build/_shared/chunk-U6EJQ2VB.js";import{a as Xp}from"/build/_shared/chunk-CI3LRQWP.js";import{a as Bc,b as Hp,c as Vc,d as Kc,e as qp,f as Yp,g as De,h as qc,i as ds,j as Yc,k as la,l as ca}from"/build/_shared/chunk-ODEXEOWP.js";import{a as Xc}from"/build/_shared/chunk-IN7IYSLR.js";import{a as ia}from"/build/_shared/chunk-JQ7VV4MG.js";import{a as Hc}from"/build/_shared/chunk-4T3PN46C.js";import{a as $c}from"/build/_shared/chunk-W2HN66ZL.js";import{a as _o}from"/build/_shared/chunk-OCNP4HMK.js";import{a as Hn}from"/build/_shared/chunk-F5XJZVHX.js";import{a as Bt}from"/build/_shared/chunk-OZKGRFFL.js";import{a as cs}from"/build/_shared/chunk-PDUFQT3U.js";import"/build/_shared/chunk-SJ66X5JG.js";import"/build/_shared/chunk-MGQ57324.js";import{a as To}from"/build/_shared/chunk-3JHWEXEA.js";import{a as Oc}from"/build/_shared/chunk-6Y3TRW2U.js";import{d as Vn}from"/build/_shared/chunk-FINNWZUQ.js";import{a as Io}from"/build/_shared/chunk-57RLGXHQ.js";import"/build/_shared/chunk-OCXPQHWM.js";import"/build/_shared/chunk-2ASNDYGS.js";import{a as Bp}from"/build/_shared/chunk-63OPQ3LC.js";import{a as wr,b as Vp,c as Lc}from"/build/_shared/chunk-KLAONM72.js";import"/build/_shared/chunk-YG736PC4.js";import"/build/_shared/chunk-B26ZFINY.js";import{a as Sp}from"/build/_shared/chunk-VZQVWFLO.js";import{a as $t}from"/build/_shared/chunk-4GVLMWJ7.js";import{a as jo}from"/build/_shared/chunk-YDSERAUK.js";import{a as Kp,c as na}from"/build/_shared/chunk-BOCT2IJB.js";import"/build/_shared/chunk-ZJOJMP5O.js";import{a as Uc}from"/build/_shared/chunk-EROURRP4.js";import{a as ao}from"/build/_shared/chunk-6R6UXKZA.js";import{a as st}from"/build/_shared/chunk-NAU26CU7.js";import{a as or}from"/build/_shared/chunk-NQPXYJUQ.js";import{a as Ro}from"/build/_shared/chunk-A7SUEVP2.js";import{a as Kn,b as oo}from"/build/_shared/chunk-PXEUFDPR.js";import{e as Eo,g as Dc}from"/build/_shared/chunk-LTBXYQR6.js";import{e as Fc,h as Ac}from"/build/_shared/chunk-243AYOFM.js";import{b as U}from"/build/_shared/chunk-HAINM4MF.js";import{Cc as sa,Fb as Tn,Ga as Co,Gb as Rn,Ha as ec,Hb as jn,Ia as tc,Ib as bc,Ja as Sn,Jb as vc,Ka as ge,Kb as _n,La as as,Lb as Mn,Lc as jc,Ma as rc,Mb as Dn,Mc as to,Na as Ge,Nb as yc,Nc as _c,Oa as Or,Ob as Fn,Pa as oc,Pb as An,Qa as ss,Qb as ls,Ra as ns,Rb as xc,Sa as ac,Sb as wc,Ta as sc,Tb as kc,Ua as nc,Ub as Nc,Va as ic,Vc as Bn,Wa as En,Wb as aa,Wc as Mc,Xa as lc,Xb as Ln,Xc as ro,Ya as cc,Yb as On,Za as So,_a as dc,a as pe,ab as is,bb as ae,c as Wa,cb as mc,d as yo,db as uc,eb as pc,fb as fc,g as jp,gb as oa,h as Ap,hb as He,ib as In,ic as Pc,mb as gc,mc as Cc,nb as Up,nc as Sc,ob as $p,oc as Un,pc as $n,sc as Ec,vc as Ic,wc as Tc,xc as Rc,yb as hc}from"/build/_shared/chunk-QH5UXTNE.js";import{Aa as ra,Ba as Zl,ia as St,ja as es,ka as ts,na as rs,oa as Op,pa as os,ra as Cn,ua as Zr,va as eo}from"/build/_shared/chunk-GO4RMXDG.js";import{i as Ep,m as Ip,s as Lp,u as Pn}from"/build/_shared/chunk-GZO74C6C.js";import{a as Nn}from"/build/_shared/chunk-5C6XY6QG.js";import{b as _p,c as Mp,d as Dp,f as Fp,g as Ql}from"/build/_shared/chunk-P4GU2T66.js";import{a as xr,b as wn,c as Ja,d as Ll,e as Rp}from"/build/_shared/chunk-WKVXRFKR.js";import{a as yr,b as Al,d as Ya,e as Xa}from"/build/_shared/chunk-6UMQ6VR5.js";import{$ as Gl,A as ko,B as Vl,F as Kl,G as Hl,J as kn,K as No,P as ql,Q as Yl,S as Xl,T as Wl,U as Jl,X as Po,a as xo,b as Ga,ba as rr,c as ea,fa as zl,g as Ol,ga as bt,ha as $e,j as ta,k as Ul,l as $l,m as wo,o as za,s as er,t as Qr,u as Qa,w as tr,x as Za,y as Bl}from"/build/_shared/chunk-DRCRQ7AX.js";import{c as Tp,l as xn,n as Ke}from"/build/_shared/chunk-NSB5NZWW.js";import"/build/_shared/chunk-FQ2RG5VJ.js";import"/build/_shared/chunk-C4K24J7E.js";import"/build/_shared/chunk-YG2XDHGZ.js";import{a as Ne}from"/build/_shared/chunk-KOHXVCYB.js";import{b as Cp,c as ln}from"/build/_shared/chunk-VGJ5EBYX.js";import"/build/_shared/chunk-MSGER76V.js";import{a as kp}from"/build/_shared/chunk-Z3FUFQEO.js";import{d as Fr,e as ml,h as Me,m as ul}from"/build/_shared/chunk-O7CS4SBR.js";import{A as yl,Aa as Sl,Ab as vn,Ba as El,Bb as yn,Cb as Ct,Da as fn,Fa as Il,Ga as Zo,Ha as gn,J as xl,Ja as Tl,Ka as Rl,N as wl,Qa as hn,Ra as bn,Sa as jl,Ta as _l,bb as Ml,da as kl,db as Dl,e as dn,f as Ar,fa as Nl,gb as w,h as br,ib as Fl,j as mn,k as pl,l as fl,m as gl,n as zo,o as vr,p as hl,q as Zt,r as Qo,s as bl,sa as pn,t as vl,u as un,ub as vo,v as zr,wa as Pl,xa as Lr,xb as jt,ya as bo,za as Cl,zb as qa}from"/build/_shared/chunk-NSQYLWAQ.js";import{b as hr,c as M}from"/build/_shared/chunk-4YJISJ47.js";import{b as Pp}from"/build/_shared/chunk-VOM23DNI.js";import"/build/_shared/chunk-5YEMDBLX.js";import"/build/_shared/chunk-X4RYED65.js";import{f as wp,i as Np,k as cn}from"/build/_shared/chunk-2SDAKG4K.js";import{a as Se,b as T}from"/build/_shared/chunk-TANAHWHW.js";import{c as gr,e as l}from"/build/_shared/chunk-ADMCF34Z.js";var ad=gr((Gg,od)=>{var mf=xn(),uf=qp();function pf(e,t){return e&&e.length?uf(e,mf(t,2)):[]}od.exports=pf});var nd=gr((zg,sd)=>{var ff=Np(),gf=xn(),hf=Yp(),bf=Ep();function vf(e,t){if(e==null)return{};var s=ff(bf(e),function(n){return[n]});return t=gf(t),hf(e,s,function(n,d){return t(n,d[0])})}sd.exports=vf});var cd=gr((Qg,ld)=>{function yf(e,t){for(var s=-1,n=e==null?0:e.length;++s<n;)if(!t(e[s],s,e))return!1;return!0}ld.exports=yf});var md=gr((Zg,dd)=>{var xf=Tp();function wf(e,t){var s=!0;return xf(e,function(n,d,b){return s=!!t(n,d,b),s}),s}dd.exports=wf});var Jn=gr((e0,ud)=>{var kf=cd(),Nf=md(),Pf=xn(),Cf=wp(),Sf=Dp();function Ef(e,t,s){var n=Cf(e)?kf:Nf;return s&&Sf(e,t,s)&&(t=void 0),n(e,Pf(t,3))}ud.exports=Ef});var fm=gr((Nb,pm)=>{var lg=_p(),cg=Mp(),dg=Fp(),mg=cn();function ug(e){return function(t){t=mg(t);var s=cg(t)?dg(t):void 0,n=s?s[0]:t.charAt(0),d=s?lg(s,1).join(""):t.slice(1);return n[e]()+d}}pm.exports=ug});var hm=gr((Pb,gm)=>{var pg=fm(),fg=pg("toUpperCase");gm.exports=fg});var vm=gr((Cb,bm)=>{var gg=cn(),hg=hm();function bg(e){return hg(gg(e).toLowerCase())}bm.exports=bg});var Zm=gr((exports,module)=>{(function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self)["swetrix-sdk"]=t()})(exports,function(){"use strict";var __assign=function(){return(__assign=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var d in t=arguments[s])Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d]);return e}).apply(this,arguments)},getPanelTabName=function(e,t){return"".concat(e,"-").concat(t)},event,PanelTab,DebugType,SDK=(function(e){e.LOAD="load",e.FILTERS_UPDATE="filtersupdate",e.TIME_UPDATE="timeupdate",e.PROJECT_INFO="projectinfo",e.CLIENT_INFO="clientinfo"}(event=event||{}),function(e){e.cc="cc",e.pg="pg",e.lc="lc",e.ref="ref",e.dv="dv",e.br="br",e.os="os",e.so="so",e.me="me",e.ca="ca",e.lt="lt",e.ce="ce"}(PanelTab=PanelTab||{}),function(e){e.LOG="log",e.ERROR="error",e.WARN="warn",e.INFO="info"}(DebugType=DebugType||{}),function(){function SDK(extensions,options,swetrixCallbacks){var _this=this;this.extensions=extensions,this.options=options,this.swetrixCallbacks=swetrixCallbacks,this.events={},this.exportDataRowValues=[],this.panelTabValues=[],this._sdkInitialised=!1,this._emitQueue=[],this._loadExtension=function(cdnURL,id){return fetch(cdnURL).then(function(e){return e.ok?e.text():(_this.debug("Error while loading extension from ".concat(cdnURL),DebugType.ERROR),"(() => {})")}).then(function(code){eval(code)(__assign(__assign({},_this),{addExportDataRow:_this.addExportDataRow,debug:_this.debug,removeExportDataRow:_this.removeExportDataRow,addPanelTab:_this.addPanelTab(id),updatePanelTab:_this.updatePanelTab(id),removePanelTab:_this.removePanelTab(id),addEventListener:_this.addEventListener(id),removeEventListener:_this.removeEventListener(id),_emitEvent:void 0,_destroy:void 0,_loadExtension:void 0,_init:void 0,_emitQueue:void 0})),_this.debug("Extension ".concat(id," loaded and executed"))})},this._init()}return SDK.prototype._init=function(){var e,t=this;this._sdkInitialised?this.debug("SDK is already initialised, skipping initialisation"):(e=this.options)!=null&&e.disabled?this.debug("SDK is disabled, skipping initialisation"):(e=this.extensions.map(function(d){var n=d.cdnURL,d=d.id;return t._loadExtension(n,d)}),Promise.all(e).then(function(){t.debug("SDK initialised"),t._sdkInitialised=!0,t._emitQueue.forEach(function(d){var n=d.event,d=d.eventData;t._emitEvent(n,d)}),t._emitQueue=[]}))},SDK.prototype.debug=function(e,t){var s;t===void 0&&(t=DebugType.LOG),(s=this.options)!=null&&s.debug&&console[t]("[Swetrix SDK]",e)},SDK.prototype._emitEvent=function(e,t){this._sdkInitialised?(this.debug("Emitting event '".concat(e,"'")),this.events[e]&&Object.values(this.events[e]).forEach(function(s){setTimeout(function(){s(t)},300)})):(this.debug("Trying to emit event '".concat(e,"', but it as added to queue as the SDK is not initialised yet"),DebugType.WARN),this._emitQueue.push({event:e,eventData:t}))},SDK.prototype._destroy=function(){this.debug("Destroying the SDK instance"),this.events={},this.extensions=[]},SDK.prototype.addEventListener=function(e){var t=this;return function(s,n){var d;t.debug("Adding event listener for ".concat(s," (extension: ").concat(e,")")),typeof n!="function"?t.debug("Callback is not a function (extension: ".concat(e,")"),DebugType.ERROR):t.events=__assign(__assign({},t.events),((d={})[s]=__assign(__assign({},t.events[s]),((s={})[e]=n,s)),d))}},SDK.prototype.removeEventListener=function(e){var t=this;return function(s){t.debug("Removing event listener for ".concat(s)),t.events[s]&&(s=t.events[s])!=null&&delete s[e]}},SDK.prototype.addExportDataRow=function(e,t){var s;this.debug("Adding export data row ".concat(e)),this.exportDataRowValues.includes(e)?this.debug("Export data row ".concat(e," already exists"),DebugType.WARN):(this.exportDataRowValues.push(e),(s=this.swetrixCallbacks)!=null&&s.onAddExportDataRow(e,t))},SDK.prototype.removeExportDataRow=function(e){var t;this.debug("Removing export data row ".concat(e)),this.exportDataRowValues.includes(e)?(this.exportDataRowValues=this.exportDataRowValues.filter(function(s){return s!==e}),(t=this.swetrixCallbacks)!=null&&t.onRemoveExportDataRow(e)):this.debug("Export data row ".concat(e," does not exist"),DebugType.WARN)},SDK.prototype.addPanelTab=function(e){var t=this;return function(s,n,d){d===void 0&&(d=function(){}),t.debug("Adding panel tab ".concat(s));var b=getPanelTabName(e,s);t.panelTabValues.includes(b)?t.debug("Panel tab ".concat(s," (").concat(e,") already exists"),DebugType.WARN):(t.panelTabValues.push(b),(b=t.swetrixCallbacks)!=null&&b.onAddPanelTab(e,s,n,d))}},SDK.prototype.updatePanelTab=function(e){var t=this;return function(s,n){t.debug("Updating panel tab ".concat(s));var d=getPanelTabName(e,s);t.panelTabValues.includes(d)?(d=t.swetrixCallbacks)!=null&&d.onUpdatePanelTab(e,s,n):t.debug("Panel tab ".concat(s," (").concat(e,") does not exist"),DebugType.WARN)}},SDK.prototype.removePanelTab=function(e){var t=this;return function(s){t.debug("Removing panel tab ".concat(s));var n=getPanelTabName(e,s);t.panelTabValues.includes(n)?(n=t.swetrixCallbacks)!=null&&n.onRemovePanelTab(e,s):t.debug("Panel tab ".concat(s," (").concat(e,") does not exist"),DebugType.WARN)}},SDK}());return SDK})});Xa();In();Ct();var u=l(Se());es();$e();var qt=l(Nn());var qe=l(Se()),Wp=l(T());function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Xn.apply(null,arguments)}var Qc=["shift","alt","meta","mod","ctrl"],Jp={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Ur(e){return(e&&Jp[e]||e||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function Gp(e){return Qc.includes(e)}function qn(e,t){return t===void 0&&(t=","),e.split(t)}function Yn(e,t,s){t===void 0&&(t="+");var n=e.toLocaleLowerCase().split(t).map(function(g){return Ur(g)}),d={alt:n.includes("alt"),ctrl:n.includes("ctrl")||n.includes("control"),shift:n.includes("shift"),meta:n.includes("meta"),mod:n.includes("mod")},b=n.filter(function(g){return!Qc.includes(g)});return Xn({},d,{keys:b,description:s,hotkey:e})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(e){e.key!==void 0&&Zc([Ur(e.key),Ur(e.code)])}),document.addEventListener("keyup",function(e){e.key!==void 0&&ed([Ur(e.key),Ur(e.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){$r.clear()})})();var $r=new Set;function Wn(e){return Array.isArray(e)}function zp(e,t){t===void 0&&(t=",");var s=Wn(e)?e:e.split(t);return s.every(function(n){return $r.has(n.trim().toLowerCase())})}function Zc(e){var t=Array.isArray(e)?e:[e];$r.has("meta")&&$r.forEach(function(s){return!Gp(s)&&$r.delete(s.toLowerCase())}),t.forEach(function(s){return $r.add(s.toLowerCase())})}function ed(e){var t=Array.isArray(e)?e:[e];e==="meta"?$r.clear():t.forEach(function(s){return $r.delete(s.toLowerCase())})}function Qp(e,t,s){(typeof s=="function"&&s(e,t)||s===!0)&&e.preventDefault()}function Zp(e,t,s){return typeof s=="function"?s(e,t):s===!0||s===void 0}function ef(e){return td(e,["input","textarea","select"])}function td(e,t){t===void 0&&(t=!1);var s=e.target,n=e.composed,d=null;return tf(s)&&n?d=e.composedPath()[0]&&e.composedPath()[0].tagName:d=s&&s.tagName,Wn(t)?Boolean(d&&t&&t.some(function(b){var g;return b.toLowerCase()===((g=d)==null?void 0:g.toLowerCase())})):Boolean(d&&t&&t)}function tf(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function rf(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(function(s){return t.includes(s)})||e.includes("*"):!0}var of=function(t,s,n){n===void 0&&(n=!1);var d=s.alt,b=s.meta,g=s.mod,x=s.shift,N=s.ctrl,I=s.keys,P=t.key,O=t.code,X=t.ctrlKey,S=t.metaKey,de=t.shiftKey,te=t.altKey,H=Ur(O),B=P.toLowerCase();if(!(I!=null&&I.includes(H))&&!(I!=null&&I.includes(B))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(H))return!1;if(!n){if(d===!te&&B!=="alt"||x===!de&&B!=="shift")return!1;if(g){if(!S&&!X)return!1}else if(b===!S&&B!=="meta"&&B!=="os"||N===!X&&B!=="ctrl"&&B!=="control")return!1}return I&&I.length===1&&(I.includes(B)||I.includes(H))?!0:I?zp(I):!I},af=(0,qe.createContext)(void 0),sf=function(){return(0,qe.useContext)(af)};function rd(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce(function(s,n){return s&&rd(e[n],t[n])},!0):e===t}var nf=(0,qe.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),lf=function(){return(0,qe.useContext)(nf)};function cf(e){var t=(0,qe.useRef)(void 0);return rd(t.current,e)||(t.current=e),t.current}var zc=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},df=typeof window<"u"?qe.useLayoutEffect:qe.useEffect;function ma(e,t,s,n){var d=(0,qe.useState)(null),b=d[0],g=d[1],x=(0,qe.useRef)(!1),N=s instanceof Array?n instanceof Array?void 0:n:s,I=Wn(e)?e.join(N?.splitKey):e,P=s instanceof Array?s:n instanceof Array?n:void 0,O=(0,qe.useCallback)(t,P??[]),X=(0,qe.useRef)(O);P?X.current=O:X.current=t;var S=cf(N),de=lf(),te=de.enabledScopes,H=sf();return df(function(){if(!(S?.enabled===!1||!rf(te,S?.scopes))){var B=function(L,me){var Te;if(me===void 0&&(me=!1),!(ef(L)&&!td(L,S?.enableOnFormTags))){if(b!==null){var G=b.getRootNode();if((G instanceof Document||G instanceof ShadowRoot)&&G.activeElement!==b&&!b.contains(G.activeElement)){zc(L);return}}(Te=L.target)!=null&&Te.isContentEditable&&!(S!=null&&S.enableOnContentEditable)||qn(I,S?.splitKey).forEach(function(et){var Be,Ce=Yn(et,S?.combinationKey);if(of(L,Ce,S?.ignoreModifiers)||(Be=Ce.keys)!=null&&Be.includes("*")){if(S!=null&&S.ignoreEventWhen!=null&&S.ignoreEventWhen(L)||me&&x.current)return;if(Qp(L,Ce,S?.preventDefault),!Zp(L,Ce,S?.enabled)){zc(L);return}X.current(L,Ce),me||(x.current=!0)}})}},se=function(L){L.key!==void 0&&(Zc(Ur(L.code)),(S?.keydown===void 0&&S?.keyup!==!0||S!=null&&S.keydown)&&B(L))},re=function(L){L.key!==void 0&&(ed(Ur(L.code)),x.current=!1,S!=null&&S.keyup&&B(L,!0))},ce=b||N?.document||document;return ce.addEventListener("keyup",re),ce.addEventListener("keydown",se),H&&qn(I,S?.splitKey).forEach(function(Q){return H.addHotkey(Yn(Q,S?.combinationKey,S?.description))}),function(){ce.removeEventListener("keyup",re),ce.removeEventListener("keydown",se),H&&qn(I,S?.splitKey).forEach(function(Q){return H.removeHotkey(Yn(Q,S?.combinationKey,S?.description))})}}},[b,I,S,te]),g}var Yt=l(Pp()),Le=l(Ke()),tu=l(rs()),ru=l(Ql()),Pe=l(ln()),ou=l(Ip()),E=l(xr()),Pr=l(ts()),di=l(Oc()),Re=l(os()),Oe=l(yo()),au=l(ad()),mi=l(Op()),xa=l(Lp()),su=l(Hp()),It=l(jp()),ui=l(Ap()),nu=l(nd()),iu=l(Jn()),lu=l(Pn()),cu=l(Yc()),du=l(kp());Wa();Xa();var pd=l(os()),fd=l(ts());var Gn=l(T()),gd=e=>s=>{let n=yr(I=>I.ui.projects.password),d=yr(I=>I.ui.projects.projects),b=Fr(),{id:g}=ml(),{queryPassword:x}=s,N=(0,pd.default)(d,{id:g});return N!=null&&N.isOwner?(0,Gn.jsx)(e,{...s}):N!=null&&N.isPasswordProtected&&!n[g]&&!x?(b((0,fd.default)(Ne.project_protected_password,":id",g)),null):(0,Gn.jsx)(e,{...s})};var vt=l(Nn()),hd=l(Bp());oa();vt.default.extend(hd.default);var ua=[{period:"1d",formula:()=>{let e=vt.default.utc().subtract(1,"day").format("YYYY-MM-DD");return{from:vt.default.utc().subtract(2,"day").format("YYYY-MM-DD"),to:e}}},{period:"7d",formula:()=>{let e=vt.default.utc().subtract(7,"day").format("YYYY-MM-DD");return{from:vt.default.utc().subtract(14,"day").format("YYYY-MM-DD"),to:e}}},{period:"4w",formula:()=>{let e=vt.default.utc().subtract(28,"day").format("YYYY-MM-DD");return{from:vt.default.utc().subtract(56,"day").format("YYYY-MM-DD"),to:e}}},{period:"3M",formula:()=>{let e=vt.default.utc().subtract(3,"month").format("YYYY-MM-DD");return{from:vt.default.utc().subtract(6,"month").format("YYYY-MM-DD"),to:e}}},{period:"12M",formula:()=>{let e=vt.default.utc().subtract(12,"month").format("YYYY-MM-DD");return{from:vt.default.utc().subtract(24,"month").format("YYYY-MM-DD"),to:e}}},{period:"custom",formula:e=>{if(!e)return{from:ae(new Date),to:ae(new Date)};let t=(e[1].getTime()-e[0].getTime())/(1e3*3600*24),s=vt.default.utc().subtract(t,"day").format("YYYY-MM-DD");return{from:vt.default.utc().subtract(t*2,"day").format("YYYY-MM-DD"),to:s}}}];Zl();Rp();Ct();var Br=l(T()),If=({className:e,containerClassName:t,theme:s})=>{let n=U(e,{"fill-text-gray-700":s==="dark","fill-white":s==="light"});return(0,Br.jsxs)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Br.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2",className:n}),(0,Br.jsx)("circle",{cx:"12",cy:"5",r:"2",className:n}),(0,Br.jsx)("path",{d:"M12 7v4",className:n}),(0,Br.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"16",className:n}),(0,Br.jsx)("line",{x1:"16",y1:"16",x2:"16",y2:"16",className:n})]})},bd=If;var Mo=l(Se());var vd=l(Kp()),yd=l(Ke());Ct();var xd=l(cn());$e();var _t=l(T()),zn="3",Tf=({onClose:e,onSubmit:t,isOpened:s,activeTB:n,tb:d})=>{let{t:b}=M("common"),[g,x]=(0,Mo.useState)(zn),[N,I]=(0,Mo.useState)(null),[P,O]=(0,Mo.useState)("chart"),X=(0,Mo.useMemo)(()=>[{id:"chart",label:b("modals.forecast.chart"),icon:za},{id:"details",label:b("modals.forecast.details"),icon:Ol}],[b]),S=H=>{let{value:B}=H.target;x(B),I(null)};return(0,_t.jsx)(st,{onClose:()=>{x(zn),I(null),e()},onSubmit:()=>{if(P==="details")return t(P);let H=Number(g);if((0,vd.default)(H)){I(b("apiNotifications.enterACorrectNumber"));return}if(H<=0){I(b("apiNotifications.numberCantBeNegative"));return}if(H>dn[d]){I(b("apiNotifications.forecastNumberCantBeBigger",{max:dn[d]}));return}t(P,{period:(0,xd.default)(H)})},submitText:b("common.continue"),closeText:b("common.cancel"),message:(0,_t.jsxs)("div",{children:[(0,_t.jsx)("div",{className:"mb-4 flex space-x-4 overflow-x-auto","aria-label":"Forecast type selector",children:(0,yd.default)(X,H=>{let B=H.id===P;return(0,_t.jsxs)("div",{onClick:()=>{O(H.id)},className:U("text-md group inline-flex cursor-pointer items-center whitespace-nowrap border-b-2 px-1 py-2 font-bold",{"border-slate-900 text-slate-900 dark:border-gray-50 dark:text-gray-50":B,"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:border-gray-300 dark:hover:text-gray-300":!B}),"aria-current":B?"page":void 0,children:[(0,_t.jsx)(H.icon,{className:U(B?"text-slate-900 dark:text-gray-50":"text-gray-500 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-300","-ml-0.5 mr-2 h-5 w-5"),"aria-hidden":"true"}),(0,_t.jsx)("span",{children:H.label})]},H.id)})}),P==="chart"&&(0,_t.jsxs)(_t.Fragment,{children:[b("modals.forecast.desc"),(0,_t.jsx)(or,{name:"forecast-input",label:b("modals.forecast.input",{frequency:n}),value:g,placeholder:zn,className:"mt-4",onChange:S,error:N})]}),P==="details"&&b("modals.forecast.detailsDesc")]}),title:b("modals.forecast.title"),isOpened:s})},wd=Tf;var kr=l(Se()),Cd=l(Ke()),Sd=l(Jn()),Ed=l(Xp());$e();var Do=l(Se());var ms=l(xr()),kd=l(Ke()),Nd=l(yo()),Qn=l(Vp()),Pd=l(ln()),Ye=l(T()),Rf=({title:e,className:t,items:s,labelExtractor:n,keyExtractor:d,onSelect:b,buttonClassName:g,placeholder:x,disabled:N})=>{let{t:I}=M("common"),[P,O]=(0,Do.useState)(""),X=(0,ms.default)(s)?s:(0,Nd.default)(s,(S,de)=>{let te=n?n(S,de):S;return(0,Pd.default)((0,Qn.default)(te),(0,Qn.default)(P))});return(0,Ye.jsx)(Eo,{disabled:N,value:e,onChange:b,children:(0,Ye.jsxs)("div",{className:U("relative mt-1",t),children:[(0,Ye.jsxs)("div",{className:"relative w-full cursor-default rounded-lg",children:[(0,Ye.jsx)(Eo.Input,{className:U("relative w-full cursor-default rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-left shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:border-gray-800 dark:bg-slate-800 dark:text-gray-50 sm:text-sm",g),displayValue:S=>n?n(S,0):S,onChange:S=>O(S.target.value),placeholder:x}),(0,Ye.jsx)(Eo.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:(0,Ye.jsx)(Ac,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,Ye.jsx)(Dc,{as:Do.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>O(""),children:(0,Ye.jsx)(Eo.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none dark:bg-slate-800 sm:text-sm",children:(0,ms.default)(X)&&!(0,ms.default)(P)?(0,Ye.jsx)("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-900 dark:text-white",children:I("common.nothingFound")}):(0,kd.default)(X,(S,de)=>(0,Ye.jsx)(Eo.Option,{className:({active:te})=>U("relative cursor-default select-none py-2 pl-8 pr-4 dark:text-white",{"bg-indigo-600 text-white":te,"text-gray-900":!te}),value:n?n(S,de):S,children:({selected:te,active:H})=>(0,Ye.jsxs)(Ye.Fragment,{children:[(0,Ye.jsx)("span",{className:`block truncate ${te?"font-medium":"font-normal"}`,children:n?n(S,de):S}),te?(0,Ye.jsx)("span",{className:U("absolute inset-y-0 left-0 flex items-center pl-1.5",{"text-white":H,"text-indigo-600":!H}),children:(0,Ye.jsx)(Fc,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},d?d(S,de):S))})})]})})},Fo=(0,Do.memo)(Rf);Ct();ro();var ar=l(T()),Zn=[null,null],jf=({onClose:e,onSubmit:t,isOpened:s,pid:n,funnel:d,loading:b,project:g,projectPassword:x,allowedToManage:N})=>{let{t:I}=M("common"),[P,O]=(0,kr.useState)((d==null?void 0:d.name)||""),[X,S]=(0,kr.useState)((d==null?void 0:d.steps)||Zn),[de,te]=(0,kr.useState)([]),H=(0,kr.useMemo)(()=>(0,Sd.default)(X,re=>re),[X]);(0,kr.useEffect)(()=>{s&&(O((d==null?void 0:d.name)||""),S((d==null?void 0:d.steps)||Zn))},[s,d]),(0,kr.useEffect)(()=>{if((0,Ed.default)(g.name)||!s)return;(async()=>{let ce=[],Q=[],L=[(async()=>{ce=await to(n,"pg",x)})(),(async()=>{Q=await to(n,"ev",x)})()];try{await Promise.allSettled(L)}catch(me){console.error("[ERROR] (NewFunnel -> getFiltersData):",me)}te([...ce,...Q])})()},[n,g,s,x]);let B=()=>{setTimeout(()=>{O(""),S(Zn)},300),e()};return(0,ar.jsx)(st,{isLoading:b,onClose:B,onSubmit:async()=>{!P||!H||!N||(await t(P,X),B())},submitText:I("common.continue"),message:(0,ar.jsxs)("div",{children:[(0,ar.jsx)(or,{name:"funnel-name-input",label:I("modals.funnels.name"),value:P,onChange:re=>O(re.target.value),disabled:!N}),(0,ar.jsx)("p",{className:"mt-5 text-sm font-medium text-gray-700 dark:text-gray-200",children:I("modals.funnels.steps")}),(0,Cd.default)(X,(re,ce)=>(0,ar.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[(0,ar.jsx)(Fo,{className:"!ml-0 w-full",buttonClassName:U({"h-9":!re}),items:de,keyExtractor:Q=>Q,labelExtractor:Q=>Q,onSelect:Q=>{let L=[...X];L[ce]=Q,S(L)},title:re||"",disabled:!N}),X.length>jl&&N&&(0,ar.jsx)(rr,{role:"button","aria-label":"Remove step",className:"h-5 w-5 cursor-pointer text-gray-400 hover:text-gray-500 dark:text-gray-200 dark:hover:text-gray-300",onClick:()=>{let Q=[...X];Q.splice(ce,1),S(Q)}})]},ce)),X.length<_l&&N&&(0,ar.jsxs)("p",{onClick:()=>{S([...X,null])},role:"button",className:"mt-2 cursor-pointer text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-500",children:["+ ",I("modals.funnels.addStep")]})]}),title:I(d?"modals.funnels.editTitle":"modals.funnels.addTitle"),isOpened:s,submitDisabled:!P||!H||!N,overflowVisible:!0})},Id=jf;var Td=l(Se());var ei=l(Ke());var nt=l(T()),_f=e=>({[e("modals.shortcuts.timebuckets")]:{[e("project.thisHour")]:"H",[e("project.today")]:"T",[e("project.yesterday")]:"Y",[e("project.last24h")]:"D",[e("project.lastXDays",{amount:7})]:"W",[e("project.lastXWeeks",{amount:4})]:"M",[e("project.lastXMonths",{amount:3})]:"Q",[e("project.lastXMonths",{amount:12})]:"L",[e("project.lastXMonths",{amount:24})]:"Z",[e("project.all")]:"A",[e("project.compare")]:"C",[e("project.custom")]:"U"},[e("modals.shortcuts.tabs")]:{[e("dashboard.traffic")]:"Shift + T",[e("dashboard.performance")]:"Shift + P",[e("dashboard.sessions")]:"Shift + S",[e("dashboard.errors")]:"Shift + R",[e("dashboard.funnels")]:"Shift + F",[e("dashboard.alerts")]:"Shift + A",[e("common.settings")]:"Shift + E"},[e("common.general")]:{[e("modals.forecast.title")]:"Alt + F",[e("project.search")]:"Alt + S",[e("project.barChart")]:"Alt + B",[e("project.lineChart")]:"Alt + L",[e("project.refreshStats")]:"R"}}),Mf=({title:e,hotkeys:t})=>(0,nt.jsx)("div",{className:"mt-2 first:mt-0",children:(0,nt.jsxs)("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-gray-700",children:[(0,nt.jsx)("thead",{children:(0,nt.jsxs)("tr",{children:[(0,nt.jsx)("th",{className:"pb-2 text-left text-base font-semibold text-gray-900 dark:text-gray-50",children:e}),(0,nt.jsx)("th",{})]})}),(0,nt.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:(0,ei.default)(t,(s,n)=>(0,nt.jsxs)("tr",{children:[(0,nt.jsx)("td",{className:"whitespace-nowrap py-2 pl-4 pr-3 text-left text-sm text-gray-900 dark:text-gray-50 sm:pl-0",children:n}),(0,nt.jsx)("td",{className:"whitespace-nowrap py-2 pl-4 pr-3 text-left text-sm text-gray-900 dark:text-gray-50 sm:pl-0",children:(0,nt.jsx)(oo,{colour:"slate",label:s})})]},n))})]})}),Df=({onClose:e,isOpened:t})=>{let{t:s}=M("common"),n=(0,Td.useMemo)(()=>_f(s),[s]);return(0,nt.jsx)(st,{onClose:e,closeText:s("common.close"),message:(0,nt.jsx)("div",{className:"mt-3 columns-1 gap-5 md:columns-2",children:(0,ei.default)(n,(d,b)=>(0,nt.jsx)(Mf,{title:b,hotkeys:d},b))}),title:s("modals.shortcuts.title"),isOpened:t,size:"large"})},Rd=Df;ro();Up();var jd=l($p()),_d=l(xr());Ct();var Ff=(0,jd.default)("swetrix:ai"),Af=gc.create({baseURL:Cl}),Md=(e,t,s)=>Af.post("/",{...e,period_to_forecast:t,frequency:s}).then(n=>n.data).catch(n=>{var d;throw Ff("%s",n),(0,_d.default)((d=n.response.data)==null?void 0:d.message)?n.response.data:n.response.data.message});oa();var Dd=l(Ke());$e();var ze=l(T()),Lf=({funnel:e,openFunnelSettings:t,openFunnel:s,deleteFunnel:n,loading:d,allowedToManage:b})=>{let{t:g}=M();return(0,ze.jsx)("li",{onClick:()=>s(e),className:"min-h-[120px] cursor-pointer overflow-hidden rounded-xl border border-gray-200 bg-gray-50 hover:bg-gray-100 dark:border-slate-800/25 dark:bg-[#162032] dark:hover:bg-slate-800",children:(0,ze.jsx)("div",{className:"px-4 py-4",children:(0,ze.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ze.jsx)("p",{className:"truncate text-lg font-semibold text-slate-900 dark:text-gray-50",children:e.name}),(0,ze.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ze.jsx)("button",{type:"button",onClick:x=>{x.stopPropagation(),t(e)},"aria-label":g("common.settings"),children:(0,ze.jsx)(xo,{className:"h-6 w-6 text-gray-800 hover:text-gray-900 dark:text-slate-400 dark:hover:text-slate-500"})}),b&&(0,ze.jsx)(rr,{onClick:x=>{x.stopPropagation(),n(e.id)},role:"button","aria-label":g("common.delete"),className:U("h-6 w-6 text-gray-800 hover:text-gray-900 dark:text-slate-400 dark:hover:text-slate-500",{"cursor-not-allowed":d})})]})]})})})},Of=({openFunnelSettings:e})=>{let{t}=M();return(0,ze.jsx)("li",{onClick:()=>{e()},className:"group flex h-auto min-h-[120px] cursor-pointer items-center justify-center rounded-lg border-2 border-dashed border-gray-300 hover:border-gray-400 dark:border-gray-500 dark:hover:border-gray-600",children:(0,ze.jsxs)("div",{children:[(0,ze.jsx)(Po,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-gray-500 dark:text-gray-200 group-hover:dark:text-gray-400"}),(0,ze.jsx)("span",{className:"mt-2 block text-sm font-semibold text-gray-900 dark:text-gray-50 group-hover:dark:text-gray-400",children:t("dashboard.newFunnel")})]})})},Uf=({funnels:e,openFunnelSettings:t,openFunnel:s,deleteFunnel:n,loading:d,authenticated:b,allowedToManage:g})=>(0,ze.jsxs)("ul",{className:"mt-4 grid grid-cols-1 gap-x-6 gap-y-3 lg:grid-cols-3 lg:gap-y-6",children:[(0,Dd.default)(e,x=>(0,ze.jsx)(Lf,{funnel:x,deleteFunnel:n,openFunnelSettings:t,openFunnel:s,loading:d,allowedToManage:g},x.id)),b&&g&&(0,ze.jsx)(Of,{openFunnelSettings:t})]}),Fd=Uf;var us=l(Se()),Ao=l(T()),$f=({rowName:e})=>{let{isUrl:t,url:s}=(0,us.useMemo)(()=>{try{return{isUrl:!0,url:new URL(e)}}catch{return{isUrl:!1,url:null}}},[e]),n="text-blue-600 hover:underline dark:text-blue-500";return(0,Ao.jsxs)("div",{className:"scrollbar-thin overflow-hidden hover-always:overflow-auto",children:[t&&(0,Ao.jsx)("img",{className:"float-left mr-1.5 size-5",src:`https://icons.duckduckgo.com/ip3/${s==null?void 0:s.hostname}.ico`,loading:"lazy",alt:"","aria-hidden":"true"}),t?(0,Ao.jsx)("a",{className:n,href:e,target:"_blank",rel:"noopener noreferrer nofollow",onClick:d=>d.stopPropagation(),"aria-label":`${e} (opens in a new tab)`,children:e}):(0,Ao.jsx)("span",{className:n,children:e})]})},Ad=(0,us.memo)($f);var Ld=l(Se());var Od=l(xr());var Vr=l(T()),Bf=({filters:e,resetFilters:t})=>{let{t:s}=M("common");return(0,Vr.jsx)("div",{className:"mt-5 flex flex-col py-6 sm:px-6 lg:px-8",children:(0,Vr.jsxs)("div",{className:"mx-auto w-full max-w-7xl text-gray-900 dark:text-gray-50",children:[(0,Vr.jsx)("h2",{className:"my-3 text-center text-4xl leading-tight",children:s("project.noEvTitle")}),(0,Vr.jsx)("h2",{className:"mb-8 text-center text-2xl leading-snug",children:s("project.noEvContent")}),!(0,Od.default)(e)&&(0,Vr.jsx)("div",{className:"!mx-auto !flex",children:(0,Vr.jsx)(Ro,{onClick:t,className:"!mx-auto !flex",primary:!0,giant:!0,children:s("project.resetFilters")})})]})})},pa=(0,Ld.memo)(Bf);var Kt=l(Se());var Lo=l(xr()),Ud=l(rs()),$d=l(yo()),ps=l(Ke()),Bd=l(os());Ct();ec();ro();var Qe=l(T()),Vf=(e,t)=>(0,Ud.default)(t==="traffic"?Zt:Qo,(s,n)=>({...s,[e(`project.mapping.${n}`)]:n}),{}),Kf=({setProjectFilter:e,pid:t,showModal:s,setShowModal:n,tnMapping:d,filters:b,projectPassword:g,type:x})=>{let{t:N,i18n:{language:I}}=M("common"),[P,O]=(0,Kt.useState)(""),[X,S]=(0,Kt.useState)([]),[de,te]=(0,Kt.useState)([]),[H,B]=(0,Kt.useState)(!1),se=(0,Kt.useMemo)(()=>Vf(N,x),[N,x]),re=(0,Kt.useCallback)(async L=>{let me;x==="errors"?me=await _c(t,L,g):me=await to(t,L,g),S(me)},[t,g,x]);(0,Kt.useEffect)(()=>{!s||(0,Lo.default)(P)||re(P)},[P,s,re]);let ce=L=>{let me=L;P==="cc"&&(me=Co.getAlpha2Code(L,I)),!(0,Bd.default)(de,({column:G,filter:et})=>et===me&&G===P)&&te(G=>[...G,{column:P,filter:me,isExclusive:!1}])},Q=()=>{n(!1),setTimeout(()=>{O(""),te([]),B(!1)},300)};return(0,Qe.jsx)(st,{onClose:Q,onSubmit:()=>{e(de,H),Q()},submitText:N("project.applyFilters"),title:N("project.advancedFilters"),message:(0,Qe.jsxs)("div",{className:"min-h-[410px]",children:[(0,Qe.jsx)(ao,{label:N("project.selectCategory"),items:x==="traffic"?Zt:Qo,labelExtractor:L=>N(`project.mapping.${L}`),onSelect:L=>O(se[L]),title:(0,Lo.default)(P)?N("project.settings.reseted.selectFilters"):N(`project.mapping.${P}`)}),!(0,Lo.default)(b)&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("p",{className:"mt-5 text-sm font-medium text-gray-700 dark:text-gray-200",children:N("project.currentFilters")}),(0,ps.default)(b,({column:L,filter:me,isExclusive:Te})=>(0,Qe.jsx)(la,{onChangeExclusive:()=>{},onRemoveFilter:()=>{},isExclusive:Te,column:L,filter:me,tnMapping:d,removable:!1,canChangeExclusive:!1},`${L}-${me}`))]}),P&&!(0,Lo.default)(X)&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("p",{className:"mt-5 text-sm font-medium text-gray-700 dark:text-gray-200",children:N("project.filters")}),(0,Qe.jsx)(Fo,{items:X,labelExtractor:L=>P==="cc"?Co.getName(L,I):L,onSelect:ce,placeholder:N("project.settings.reseted.filtersPlaceholder")})]}),(0,Qe.jsx)("div",{className:"mt-2",children:(0,ps.default)(de,({filter:L,column:me,isExclusive:Te})=>(0,Qe.jsx)(la,{onRemoveFilter:(G,et)=>{te(Be=>(0,$d.default)(Be,({column:Ce,filter:Y})=>Y!==et||Ce!==G))},onChangeExclusive:(G,et,Be)=>{te(Ce=>(0,ps.default)(Ce,Y=>Y.column===G&&Y.filter===et?{column:G,filter:et,isExclusive:Be}:Y))},isExclusive:Te,column:me,filter:L,tnMapping:d,canChangeExclusive:!0,removable:!0},`${me}-${L}`))}),!(0,Lo.default)(de)&&(0,Qe.jsx)(jo,{checked:Boolean(H),onChange:B,name:"overrideCurrentlyFilters",className:"mt-4",label:N("project.overrideCurrentlyFilters")})]}),submitType:"regular",isOpened:s})},Vd=Kf;var Oo=l(Se()),Kd=l(Ke());var Hd=l(ia());$e();ro();var fa=l(T()),ti={small:{pulse:"h-2.5 w-2.5",base:"h-2 w-2"},big:{pulse:"h-3 w-3",base:"h-2.5 w-2.5"},giant:{pulse:"h-12 sm:h-20 w-12 sm:w-20",base:"h-10 sm:h-16 w-10 sm:w-16"}},Hf=({className:e,type:t="small"})=>{var s,n,d;return(0,fa.jsxs)("span",{className:U("flex items-center justify-center",(s=ti[t])==null?void 0:s.pulse,e),children:[(0,fa.jsx)("span",{className:U("absolute inline-flex animate-ping-slow rounded-full bg-green-400",(n=ti[t])==null?void 0:n.pulse)}),(0,fa.jsx)("span",{className:U("relative inline-flex rounded-full bg-green-500",(d=ti[t])==null?void 0:d.base)})]})},fs=Hf;Ct();var Ae=l(T()),qf=({live:e,onSessionSelect:t})=>{let{projectId:s,projectPassword:n}=gs(),{t:d}=M(),[b,g]=(0,Oo.useState)(!1),[x,N]=(0,Oo.useState)(!0),[I,P]=(0,Oo.useState)([]),O=async()=>{try{let X=await Pc(s,n);P(X)}catch(X){console.error("[LiveVisitorsDropdown] getLiveVisitors:",X)}finally{N(!1)}};return(0,Oo.useEffect)(()=>{b&&O()},[b]),(0,Ae.jsx)(Hd.default,{onOutsideClick:()=>g(!1),children:(0,Ae.jsxs)("div",{className:"relative flex h-5 cursor-pointer items-center text-base text-gray-900 dark:text-gray-50",onClick:()=>g(!b),children:[(0,Ae.jsx)(fs,{className:"mr-1.5",type:"small"}),d("dashboard.xLiveVisitors",{amount:e||0})," ",b?(0,Ae.jsx)(tr,{className:"ml-1 inline h-4 w-4"}):(0,Ae.jsx)(er,{className:"ml-1 inline h-4 w-4"}),b?(0,Ae.jsxs)("div",{className:`scrollbar-thin absolute right-0 top-3 z-10 mt-2 max-h-[200px] cursor-auto overflow-y-auto rounded-md border border-gray-200 bg-white text-gray-900 shadow-lg dark:border-slate-700/50 dark:bg-slate-900 ${I.length===0?"min-w-[200px]":"min-w-max"}`,children:[(0,Ae.jsxs)("div",{className:"flex w-full flex-col p-2",children:[(0,Ae.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-50",children:d("dashboard.liveVisitors")}),x?(0,Ae.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-50",children:d("common.loading")}):(0,Ae.jsx)("div",{className:"table w-full border-separate border-spacing-y-2",children:(0,Ae.jsx)("div",{className:"table-row-group",children:(0,Kd.default)(I,({psid:X,dv:S,br:de,os:te,cc:H})=>{let B=new URL(window.location.href);B.searchParams.set("psid",X),B.searchParams.set("tab",w.sessions);let se=B.toString();return(0,Ae.jsxs)(Me,{className:"group table-row cursor-pointer text-sm text-gray-900 dark:text-gray-50",onClick:re=>{re.preventDefault(),re.stopPropagation(),window.history.pushState({},"",se),t(X)},to:se,children:[(0,Ae.jsx)("div",{className:"table-cell rounded-l-lg bg-gray-100 pr-2 align-middle group-hover:bg-gray-200 dark:bg-slate-800 dark:group-hover:bg-slate-700",children:(0,Ae.jsx)(Lc,{className:"m-2 rounded-sm",country:H,size:21,alt:"","aria-hidden":"true"})}),(0,Ae.jsx)("div",{className:"table-cell bg-gray-100 pr-2 align-middle group-hover:bg-gray-200 dark:bg-slate-800 dark:group-hover:bg-slate-700",children:te}),(0,Ae.jsx)("div",{className:"table-cell bg-gray-100 pr-2 align-middle group-hover:bg-gray-200 dark:bg-slate-800 dark:group-hover:bg-slate-700",children:de}),(0,Ae.jsx)("div",{className:"table-cell rounded-r-lg bg-gray-100 pr-2 align-middle group-hover:bg-gray-200 dark:bg-slate-800 dark:group-hover:bg-slate-700",children:(0,Ae.jsx)("p",{className:"capitalize",children:S})})]},X)})})})]}),(0,Ae.jsx)(bt,{className:"absolute right-2 top-2 h-5 w-5 cursor-pointer text-gray-900 dark:text-gray-50",onClick:()=>g(!b)})]}):null]})})},qd=qf;var Yd=l(Se()),Xd=l(Ke());var Wd=l(ia());$e();var Mt=l(T()),Yf=[{label:"project.mapping.cc",value:"cc"},{label:"project.mapping.rg",value:"rg"},{label:"project.mapping.ct",value:"ct"}],Xf=({onSelect:e,title:t})=>{let{t:s}=M(),[n,d]=(0,Yd.useState)(!1),b=g=>{e(g),d(!1)};return(0,Mt.jsxs)(Wd.default,{onOutsideClick:()=>d(!1),children:[(0,Mt.jsxs)("span",{className:"cursor-pointer",onClick:()=>d(!n),children:[t," ",n?(0,Mt.jsx)(tr,{className:"inline h-4 w-4"}):(0,Mt.jsx)(er,{className:"inline h-4 w-4"})]}),n&&(0,Mt.jsxs)("div",{className:"top-15 absolute left-5 z-10 mt-2 max-h-[200px] min-w-[250px] overflow-auto rounded-md border border-gray-200 bg-white text-gray-900 shadow-lg dark:border-slate-700/50 dark:bg-slate-900",children:[(0,Mt.jsxs)("div",{className:"flex w-full flex-col p-2",children:[(0,Mt.jsx)("p",{className:"px-1 text-sm font-semibold text-gray-900 dark:text-gray-50",children:s("project.geo")}),(0,Xd.default)(Yf,({label:g,value:x})=>(0,Mt.jsx)("div",{onClick:()=>b(x),className:"flex w-full cursor-pointer flex-row items-center justify-between px-1 py-2 text-sm text-gray-700 hover:bg-gray-200 dark:bg-slate-900 dark:text-gray-200 dark:hover:bg-slate-800",children:(0,Mt.jsx)("p",{children:s(g)})},g))]}),(0,Mt.jsx)(bt,{className:"absolute right-2 top-2 h-5 w-5 cursor-pointer text-gray-900 dark:text-gray-50",onClick:()=>d(!n)})]})]})},hs=Xf;var Nr=l(Se()),ri=l(Nn()),Jd=l(Ke()),bs=l(xr()),vs=l(ts()),Gd=l(Cp()),zd=l(rs()),oi=l(yo());Xa();Wa();$e();Ct();In();ro();var $=l(T()),Wf=()=>(0,$.jsx)("svg",{viewBox:"0 0 2 2",className:"h-0.5 w-0.5 flex-none fill-gray-400",children:(0,$.jsx)("circle",{cx:1,cy:1,r:1})}),Jf=()=>{let{t:e}=M("common");return(0,$.jsx)("div",{className:"rounded-lg bg-yellow-300 dark:bg-yellow-500",children:(0,$.jsx)("div",{className:"mx-auto max-w-7xl px-3 py-3 sm:px-6 lg:px-8",children:(0,$.jsxs)("div",{className:"flex flex-wrap items-center justify-between",children:[(0,$.jsxs)("div",{className:"flex flex-1 items-center",children:[(0,$.jsx)("span",{className:"flex rounded-lg bg-yellow-500 p-2 dark:bg-yellow-600",children:(0,$.jsx)(Kl,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),(0,$.jsx)("p",{className:"ml-3 font-medium text-black",children:e("alert.noNotificationChannel")})]}),(0,$.jsx)("div",{className:"order-3 mt-2 w-full flex-shrink-0 sm:order-2 sm:mt-0 sm:w-auto",children:(0,$.jsx)(Me,{to:Ne.user_settings,className:"flex cursor-pointer items-center justify-center rounded-md border border-transparent bg-gray-50 px-4 py-2 text-sm font-medium text-gray-800 shadow-sm hover:bg-yellow-50 dark:bg-slate-800 dark:text-gray-50 dark:hover:bg-slate-700",children:e("common.fixIt")})})]})})})},Gf=({id:e,name:t,queryMetric:s,lastTriggered:n,openAlert:d,deleteAlert:b,queryMetricTMapping:g})=>{let{t:x,i18n:{language:N}}=M(),[I,P]=(0,Nr.useState)(!1);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("li",{onClick:()=>d(e),className:"min-h-[120px] cursor-pointer overflow-hidden rounded-xl border border-gray-200 bg-gray-50 hover:bg-gray-100 dark:border-slate-800/25 dark:bg-[#162032] dark:hover:bg-slate-800",children:(0,$.jsx)("div",{className:"px-4 py-4",children:(0,$.jsxs)("div",{className:"flex justify-between",children:[(0,$.jsxs)("div",{children:[(0,$.jsxs)("p",{className:"flex items-center gap-x-2 text-lg text-slate-900 dark:text-gray-50",children:[(0,$.jsx)("span",{className:"font-semibold",children:t}),(0,$.jsx)(Wf,{}),(0,$.jsx)("span",{children:g[s]})]}),(0,$.jsx)("p",{className:"text-base text-slate-900 dark:text-gray-50",children:n?x("alert.lastTriggeredOn",{date:N==="en"?(0,ri.default)(n).locale(N).format("MMMM D, YYYY"):(0,ri.default)(n).locale(N).format("D MMMM, YYYY")}):x("alert.notYetTriggered")})]}),(0,$.jsxs)("div",{className:"flex gap-2",children:[(0,$.jsx)(xo,{role:"button","aria-label":x("common.settings"),onClick:O=>{O.stopPropagation(),d(e)},className:"h-6 w-6 text-gray-800 hover:text-gray-900 dark:text-slate-400 dark:hover:text-slate-500"}),(0,$.jsx)(rr,{onClick:O=>{O.stopPropagation(),P(!0)},role:"button","aria-label":x("common.delete"),className:"h-6 w-6 text-gray-800 hover:text-gray-900 dark:text-slate-400 dark:hover:text-slate-500"})]})]})})}),(0,$.jsx)(st,{onClose:()=>P(!1),onSubmit:()=>b(e),submitText:x("alert.delete"),closeText:x("common.close"),title:x("alert.qDelete"),message:x("alert.deleteHint"),submitType:"danger",type:"error",isOpened:I})]})},zf=({handleNewAlert:e,isLimitReached:t})=>{let{t:s}=M();return(0,$.jsx)("li",{onClick:e,className:"group flex h-auto min-h-[120px] cursor-pointer items-center justify-center rounded-lg border-2 border-dashed border-gray-300 hover:border-gray-400 dark:border-gray-500 dark:hover:border-gray-600",children:(0,$.jsxs)("div",{children:[t?(0,$.jsx)(ko,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-gray-500 dark:text-gray-200 group-hover:dark:text-gray-400"}):(0,$.jsx)(Po,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-gray-500 dark:text-gray-200 group-hover:dark:text-gray-400"}),(0,$.jsx)("span",{className:"mt-2 block text-sm font-semibold text-gray-900 dark:text-gray-50 group-hover:dark:text-gray-400",children:s("alert.add")})]})})},Qf=({projectId:e})=>{let{t}=M(),s=Ya(),{loading:n,total:d,alerts:b}=yr(se=>se.ui.alerts),{user:g,authenticated:x}=yr(se=>se.auth),[N,I]=(0,Nr.useState)(!1),P=Fr(),O=vo[g==null?void 0:g.planCode]||vo.trial,X=x&&d>=(O==null?void 0:O.maxAlerts),S=(0,Nr.useMemo)(()=>n?[]:(0,oi.default)(b,({pid:se})=>se===e),[e,b,n]),de=(0,Nr.useMemo)(()=>{let se=(0,Gd.default)(Fl);return(0,zd.default)(se,(re,ce)=>({...re,[ce]:t(`alert.metrics.${ce}`)}),{})},[t]),te=(0,Nr.useMemo)(()=>(0,bs.default)(g)?!1:Boolean(g.telegramChatId&&g.isTelegramChatIdConfirmed||g.slackWebhookUrl||g.discordWebhookUrl),[g]),H=()=>{if(X){I(!0);return}P((0,vs.default)(Ne.create_alert,":pid",e))},B=async se=>{var re,ce;try{await Cc(se),s(He.setProjectAlerts((0,oi.default)(b,Q=>Q.id!==se))),s(He.setProjectAlertsTotal({total:d-1})),pe.success(t("alertsSettings.alertDeleted"))}catch(Q){pe.error(((ce=(re=Q==null?void 0:Q.response)==null?void 0:re.data)==null?void 0:ce.message)||(Q==null?void 0:Q.message)||"Something went wrong")}};return(0,$.jsxs)("div",{children:[(0,$.jsxs)("div",{className:"mt-4",children:[n&&(0,$.jsx)("div",{children:t("common.loading")}),!n&&(0,bs.default)(S)&&(0,$.jsxs)("div",{className:"mt-5 rounded-xl bg-gray-700 p-5",children:[(0,$.jsxs)("div",{className:"flex items-center text-gray-50",children:[(0,$.jsx)(ta,{className:"mr-2 h-8 w-8"}),(0,$.jsx)("p",{className:"text-3xl font-bold",children:t("dashboard.alerts")})]}),(0,$.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-lg text-gray-100",children:t("dashboard.alertsDesc")}),(0,$.jsx)(Ro,{onClick:H,className:"mt-6 rounded-md border border-transparent bg-white px-3 py-2 text-base font-medium text-gray-700 hover:bg-indigo-50 md:px-4",secondary:!0,large:!0,children:(0,$.jsxs)($.Fragment,{children:[X&&(0,$.jsx)(ko,{className:"mr-1 h-5 w-5"}),t("alert.add")]})})]}),!n&&!(0,bs.default)(S)&&(0,$.jsxs)($.Fragment,{children:[!te&&(0,$.jsx)(Jf,{}),(0,$.jsxs)("ul",{className:"mt-4 grid grid-cols-1 gap-x-6 gap-y-3 lg:grid-cols-3 lg:gap-y-6",children:[(0,Jd.default)(S,se=>(0,$.jsx)(Gf,{...se,openAlert:re=>{P((0,vs.default)((0,vs.default)(Ne.alert_settings,":pid",e),":id",re))},deleteAlert:B,queryMetricTMapping:de},se.id)),(0,$.jsx)(zf,{handleNewAlert:H,isLimitReached:X})]})]})]}),(0,$.jsx)(cs,{isOpened:N,onClose:()=>I(!1)})]})},Qd=(0,Nr.memo)(Qf);var Zd=Qd;var it=l(Se());es();var tm=l(Ke()),ga=l(xr()),rm=l(ln()),xs=l(ts()),ys=l(yo());Xa();$e();Wa();Ct();In();ro();oa();var Uo=l(T()),Zf=()=>{let{t:e}=M("common");return(0,Uo.jsx)("div",{className:"mt-5 flex flex-col py-6 sm:px-6 lg:px-8",children:(0,Uo.jsxs)("div",{className:"mx-auto w-full max-w-7xl text-gray-900 dark:text-gray-50",children:[(0,Uo.jsx)("h2",{className:"my-3 text-center text-4xl leading-tight",children:e("monitor.noEvents")}),(0,Uo.jsx)("h2",{className:"mb-8 text-center text-2xl leading-snug",children:e("monitor.noEventsDesc")})]})})},em=Zf;var D=l(T()),eg=({monitor:e,deleteMonitor:t,onClick:s,allowedToManage:n})=>{let{t:d}=M(),[b,g]=(0,it.useState)(!1);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{onClick:()=>s(e),role:"button",tabIndex:0,children:(0,D.jsx)("li",{className:"min-h-[120px] cursor-pointer overflow-hidden rounded-xl border border-gray-200 bg-gray-50 hover:bg-gray-100 dark:border-slate-800/25 dark:bg-[#162032] dark:hover:bg-slate-800",children:(0,D.jsx)("div",{className:"px-4 py-4",children:(0,D.jsxs)("div",{className:"flex justify-between",children:[(0,D.jsx)("div",{children:(0,D.jsx)("p",{className:"flex items-center gap-x-2 text-lg text-slate-900 dark:text-gray-50",children:(0,D.jsx)("span",{className:"font-semibold",children:e.name})})}),n&&(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)(Me,{to:(0,xs.default)((0,xs.default)(Ne.uptime_settings,":pid",e.projectId),":id",e.id),onClick:x=>{x.stopPropagation()},children:(0,D.jsx)(xo,{role:"button","aria-label":d("common.settings"),className:"h-6 w-6 text-gray-800 hover:text-gray-900 dark:text-slate-400 dark:hover:text-slate-500"})}),(0,D.jsx)(rr,{onClick:x=>{x.stopPropagation(),g(!0)},role:"button","aria-label":d("common.delete"),className:"h-6 w-6 text-gray-800 hover:text-gray-900 dark:text-slate-400 dark:hover:text-slate-500"})]})]})})})}),(0,D.jsx)(st,{onClose:()=>g(!1),onSubmit:()=>t(e.id),submitText:d("monitor.delete"),closeText:d("common.close"),title:d("monitor.qDelete"),message:d("monitor.deleteHint"),submitType:"danger",type:"error",isOpened:b})]})},tg=({handleNewMonitor:e,isLimitReached:t})=>{let{t:s}=M();return(0,D.jsx)("li",{onClick:e,className:"group flex h-auto min-h-[120px] cursor-pointer items-center justify-center rounded-lg border-2 border-dashed border-gray-300 hover:border-gray-400 dark:border-gray-500 dark:hover:border-gray-600",children:(0,D.jsxs)("div",{children:[t?(0,D.jsx)(ko,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-gray-500 dark:text-gray-200 group-hover:dark:text-gray-400"}):(0,D.jsx)(Po,{className:"mx-auto h-12 w-12 text-gray-400 group-hover:text-gray-500 dark:text-gray-200 group-hover:dark:text-gray-400"}),(0,D.jsx)("span",{className:"mt-2 block text-sm font-semibold text-gray-900 dark:text-gray-50 group-hover:dark:text-gray-400",children:s("monitor.create")})]})})},rg=()=>{let{projectId:e,isLoading:t,dateRange:s,timeBucket:n,period:d,timezone:b,projectPassword:g,refCalendar:x,setDateRange:N,updatePeriod:I,setPeriodPairs:P,activePeriod:O,updateTimebucket:X,periodPairs:S,size:de,timeFormat:te,allowedToManage:H}=gs(),{t:B,i18n:{language:se}}=M(),re=Ya(),{loading:ce,total:Q,monitors:L}=yr(be=>be.ui.monitors),{user:me,authenticated:Te}=yr(be=>be.auth),[G,et]=(0,it.useState)(!1),[Be,Ce]=(0,it.useState)(null),[Y,he]=(0,it.useState)(!1),Ue=Fr(),Fe=(0,it.useMemo)(()=>de.width>0&&de.width<500,[de]),ne=vo[me==null?void 0:me.planCode]||vo.trial,p=Te&&Q>=(ne==null?void 0:ne.maxMonitors),[oe,Tt]=(0,it.useState)([]),[ve,Xt]=(0,it.useState)(!1);(0,it.useEffect)(()=>{if(ce||!(0,ga.default)(oe)||ve)return;let be=(0,ys.default)(L,ye=>ye.projectId===e);if(!(0,ga.default)(be)){Tt(be),Xt(!0);return}Sc(e).then(({results:ye})=>{Tt(ye),Xt(!0)})},[e,L,ce,oe,ve]);let wa=()=>{if(p){et(!0);return}Ue((0,xs.default)(Ne.create_uptime,":pid",e))},ka=(0,it.useMemo)(()=>(0,ys.default)(S,be=>(0,rm.default)(gl,be.period)),[S]),$o=async be=>{var ye,ir;try{await Ec(e,be),re(He.setMonitors((0,ys.default)(L,pt=>pt.id!==be))),re(He.setMonitorsTotal({total:Q-1})),pe.success(B("monitor.monitorDeleted"))}catch(pt){pe.error(((ir=(ye=pt==null?void 0:pt.response)==null?void 0:ye.data)==null?void 0:ir.message)||(pt==null?void 0:pt.message)||"Something went wrong")}},so=(0,it.useMemo)(()=>({avgResponseTime:B("monitor.metrics.avg")}),[B]),ee=(0,it.useCallback)(async be=>{if(!(!ve||Y||!e||t)){he(!0);try{let ye,ir,pt,v;s&&(pt=ae(s[0]),v=ae(s[1])),d==="custom"&&s?[ye,ir]=await Promise.all([Un(e,[be.id],d,pt,v,b,g),$n(e,be.id,d,n,pt,v,b,g)]):[ye,ir]=await Promise.all([Un(e,[be.id],d,"","",b,g),$n(e,be.id,d,n,"","",b,g)]),Ce({monitor:be,overall:ye[be.id],isFailed:!1});let{chart:xe}=ir;setTimeout(()=>{let W=ic(xe,n,te,Fe,"line");St.generate(W).data.names(so)},100),he(!1)}catch(ye){Ce({monitor:be,isFailed:!0}),he(!1),console.error("[ERROR](loadMonitorData) Loading monitor data failed"),console.error(ye)}}},[g,b,d,s,t,ve,Y,e,n,Fe,so,te]);return(0,it.useEffect)(()=>{Be&&ee(Be.monitor)},[d,s,n]),Be?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"mt-2 flex flex-col items-center justify-between lg:flex-row lg:items-start",children:[(0,D.jsx)("div",{className:"flex flex-wrap items-center space-x-5",children:(0,D.jsx)("h2",{className:"break-words break-all text-xl font-bold text-gray-900 dark:text-gray-50",children:Be.monitor.name})}),(0,D.jsxs)("div",{className:"mx-auto mt-3 flex w-full max-w-[420px] flex-wrap items-center justify-center gap-y-1 space-x-2 sm:mx-0 sm:w-auto sm:max-w-none sm:flex-nowrap sm:justify-between lg:mt-0",children:[(0,D.jsx)("button",{type:"button",title:B("project.refreshStats"),onClick:()=>ee(Be.monitor),className:U("relative rounded-md bg-gray-50 p-2 text-sm font-medium hover:bg-white hover:shadow-sm focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:bg-slate-900 dark:hover:bg-slate-800 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"cursor-not-allowed opacity-50":t||Y}),children:(0,D.jsx)(ea,{className:"h-5 w-5 text-gray-700 dark:text-gray-50"})}),(0,D.jsx)(ds,{activePeriod:O,updateTimebucket:X,timeBucket:n,items:ka,title:O==null?void 0:O.label,onSelect:be=>{be.isCustomDate?setTimeout(()=>{x.current.openCalendar()},100):(P(br(B,void 0,void 0,se)),N(null),I(be))}})]})]}),(0,D.jsxs)("button",{onClick:()=>Ce(null),className:"mx-auto mb-4 mt-2 flex items-center text-base font-normal text-gray-900 underline decoration-dashed hover:decoration-solid dark:text-gray-100 lg:mx-0 lg:mt-0",children:[(0,D.jsx)(Qr,{className:"h-4 w-4"}),B("monitor.backToMonitors")]}),Be.isFailed?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(em,{}),Y&&(0,D.jsx)("div",{className:"static mt-4 !bg-transparent",id:"loader",children:(0,D.jsxs)("div",{className:"loader-head dark:!bg-slate-800",children:[(0,D.jsx)("div",{className:"first dark:!bg-slate-600"}),(0,D.jsx)("div",{className:"second dark:!bg-slate-600"})]})})]}):(0,D.jsxs)("div",{className:"pt-2",children:[(0,D.jsx)("div",{className:"mb-5 flex flex-wrap justify-center gap-5 lg:justify-start",children:(0,D.jsx)(Jc,{overall:Be.overall})}),(0,D.jsx)("div",{className:"mt-5 h-80 md:mt-0 [&_svg]:!overflow-visible",id:"avgResponseUptimeChart"}),Y&&(0,D.jsx)("div",{className:"static mt-4 !bg-transparent",id:"loader",children:(0,D.jsxs)("div",{className:"loader-head dark:!bg-slate-800",children:[(0,D.jsx)("div",{className:"first dark:!bg-slate-600"}),(0,D.jsx)("div",{className:"second dark:!bg-slate-600"})]})})]})]}):(0,D.jsxs)("div",{children:[(0,D.jsxs)("div",{className:"mt-4",children:[(ce||!ve)&&(0,D.jsx)("div",{children:B("common.loading")}),!ce&&ve&&(0,ga.default)(oe)&&(0,D.jsxs)("div",{className:"mt-5 rounded-xl bg-gray-700 p-5",children:[(0,D.jsxs)("div",{className:"flex items-center text-gray-50",children:[(0,D.jsx)(Za,{className:"mr-2 h-8 w-8"}),(0,D.jsx)("p",{className:"text-3xl font-bold",children:B("dashboard.uptime")})]}),(0,D.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-lg text-gray-100",children:B("dashboard.uptimeDesc")}),Te?(0,D.jsx)(Ro,{onClick:wa,className:"mt-6 rounded-md border border-transparent bg-white px-3 py-2 text-base font-medium text-gray-700 hover:bg-indigo-50 md:px-4",secondary:!0,large:!0,children:(0,D.jsxs)(D.Fragment,{children:[p&&(0,D.jsx)(ko,{className:"mr-1 h-5 w-5"}),B("monitor.create")]})}):(0,D.jsx)(Me,{to:Ne.signup,className:"mt-6 inline-block select-none rounded-md border border-transparent bg-white px-3 py-2 text-base font-medium text-gray-700 hover:bg-indigo-50","aria-label":B("titles.signup"),children:B("common.getStarted")})]}),!ce&&ve&&!(0,ga.default)(oe)&&(0,D.jsxs)("ul",{className:"mt-4 grid grid-cols-1 gap-x-6 gap-y-3 lg:grid-cols-3 lg:gap-y-6",children:[(0,tm.default)(oe,be=>(0,D.jsx)(eg,{allowedToManage:H,monitor:be,deleteMonitor:$o,onClick:ee},be.id)),(0,D.jsx)(tg,{handleNewMonitor:wa,isLimitReached:p})]})]}),(0,D.jsx)(cs,{isOpened:G,onClose:()=>et(!1)})]})},om=rg;var am=l(Se()),sm=l(Ke());var nm=l(ia());$e();var Dt=l(T()),og=[{label:"project.mapping.so",value:"so"},{label:"project.mapping.me",value:"me"},{label:"project.mapping.ca",value:"ca"},{label:"project.mapping.te",value:"te"},{label:"project.mapping.co",value:"co"}],ag=({onSelect:e,title:t})=>{let{t:s}=M(),[n,d]=(0,am.useState)(!1),b=g=>{e(g),d(!1)};return(0,Dt.jsxs)(nm.default,{onOutsideClick:()=>d(!1),children:[(0,Dt.jsxs)("span",{className:"cursor-pointer",onClick:()=>d(!n),children:[t," ",n?(0,Dt.jsx)(tr,{className:"inline h-4 w-4"}):(0,Dt.jsx)(er,{className:"inline h-4 w-4"})]}),n&&(0,Dt.jsxs)("div",{className:"top-15 absolute left-5 z-10 mt-2 max-h-[200px] min-w-[250px] overflow-auto rounded-md border border-gray-200 bg-white text-gray-900 shadow-lg dark:border-slate-700/50 dark:bg-slate-900",children:[(0,Dt.jsxs)("div",{className:"flex w-full flex-col p-2",children:[(0,Dt.jsx)("p",{className:"px-1 text-sm font-semibold text-gray-900 dark:text-gray-50",children:s("project.campaigns")}),(0,sm.default)(og,({label:g,value:x})=>(0,Dt.jsx)("div",{onClick:()=>b(x),className:"flex w-full cursor-pointer flex-row items-center justify-between px-1 py-2 text-sm text-gray-700 hover:bg-gray-200 dark:bg-slate-900 dark:text-gray-200 dark:hover:bg-slate-800",children:(0,Dt.jsx)("p",{children:s(g)})},g))]}),(0,Dt.jsx)(bt,{className:"absolute right-2 top-2 h-5 w-5 cursor-pointer text-gray-900 dark:text-gray-50",onClick:()=>d(!n)})]})]})},im=ag;var cm=l(Ke());$e();var Ee=l(T()),lm=()=>(0,Ee.jsx)("svg",{viewBox:"0 0 2 2",className:"h-0.5 w-0.5 flex-none fill-gray-400",children:(0,Ee.jsx)("circle",{cx:1,cy:1,r:1})}),sg=({session:e,onClick:t,timeFormat:s})=>{let{t:n,i18n:{language:d}}=M("common"),b=new Date(e.created).toLocaleDateString(d,{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hourCycle:s==="12-hour"?"h12":"h23"}),g=new URL(window.location.href);g.searchParams.set("psid",e.psid);let x=g.toString(),N=e.pageviews===1?n("dashboard.onePageview"):n("dashboard.xPageviews",{x:e.pageviews});return(0,Ee.jsx)(Me,{onClick:I=>{I.preventDefault(),I.stopPropagation(),window.history.pushState({},"",x),t(e.psid)},to:x,children:(0,Ee.jsxs)("li",{className:"relative mb-4 flex cursor-pointer justify-between gap-x-6 rounded-lg bg-gray-200/60 px-4 py-4 hover:bg-gray-200 dark:bg-[#162032] dark:hover:bg-slate-800 sm:px-6",children:[(0,Ee.jsx)("div",{className:"flex min-w-0 gap-x-4",children:(0,Ee.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,Ee.jsx)("p",{className:"flex items-center gap-x-2 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-50",children:b}),(0,Ee.jsxs)("p",{className:"mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500 dark:text-gray-300",children:[(0,Ee.jsx)("span",{className:"flex",children:e.cc?(0,Ee.jsx)(Bt,{size:18,cc:e.cc,language:d}):n("project.unknownCountry")}),(0,Ee.jsx)(lm,{}),e.os,(0,Ee.jsx)(lm,{}),e.br]}),(0,Ee.jsx)("p",{className:"mt-1 flex text-xs leading-5 text-gray-500 dark:text-gray-300 sm:hidden",children:N})]})}),(0,Ee.jsxs)("div",{className:"flex shrink-0 items-center gap-x-4",children:[(0,Ee.jsx)("div",{className:"hidden sm:flex sm:flex-col sm:items-end",children:(0,Ee.jsx)("p",{className:"text-sm leading-6 text-gray-900 dark:text-gray-50",children:N})}),(0,Ee.jsx)(Qa,{className:"h-5 w-5 flex-none text-gray-400","aria-hidden":"true"})]})]})})},dm=({sessions:e,onClick:t,timeFormat:s})=>(0,Ee.jsx)(_o,{fallback:(0,Ee.jsx)("div",{className:"bg-gray-50 dark:bg-slate-900",children:(0,Ee.jsx)($t,{})}),children:()=>(0,Ee.jsx)("ul",{className:"mt-4",children:(0,cm.default)(e,n=>(0,Ee.jsx)(sg,{session:n,onClick:t,timeFormat:s},n.psid))})});$e();var ai=l(Ke()),mm=l(Oc());var Ie=l(T()),ng=({evKey:e,evValue:t})=>(0,Ie.jsxs)("li",{className:"text-xs",children:[e,": ",t]}),ig=({metadata:e,children:t})=>(0,Ie.jsxs)("div",{className:"ml-1 text-gray-900 dark:text-gray-50",children:[(0,Ie.jsx)("p",{className:"font-medium",children:t}),e?(0,Ie.jsx)("ul",{className:"mt-1",children:(0,ai.default)(e,({key:s,value:n},d)=>(0,Ie.jsx)(ng,{evKey:s,evValue:n},`${s}${n}${d}`))}):null]}),um=({pages:e,timeFormat:t})=>{let{t:s,i18n:{language:n}}=M("common");return(0,Ie.jsx)("div",{className:"flow-root",children:(0,Ie.jsx)("ul",{className:"-mb-8",children:(0,ai.default)(e,({value:d,created:b,type:g,metadata:x},N)=>{let I=new Date(b).toLocaleDateString(n,{day:"numeric",month:"short",hour:"numeric",minute:"numeric",hourCycle:t==="12-hour"?"h12":"h23"});return(0,Ie.jsx)("li",{children:(0,Ie.jsxs)("div",{className:"relative pb-8",children:[N!==e.length-1?(0,Ie.jsx)("span",{className:"absolute left-4 top-4 -ml-px h-full w-0.5 bg-slate-200 dark:bg-slate-700","aria-hidden":"true"}):null,(0,Ie.jsxs)("div",{className:"relative flex space-x-3",children:[(0,Ie.jsx)("div",{children:(0,Ie.jsxs)("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-400 dark:bg-slate-800",children:[g==="pageview"&&(0,Ie.jsx)(Xl,{className:"h-5 w-5 text-white","aria-hidden":"true"}),g==="event"&&(0,Ie.jsx)(Vl,{className:"h-5 w-5 text-white","aria-hidden":"true"})]})}),(0,Ie.jsxs)("div",{className:"flex min-w-0 flex-1 justify-between space-x-4 pt-1.5",children:[(0,Ie.jsx)("div",{className:"flex text-sm text-gray-700 dark:text-gray-300",children:(0,Ie.jsx)(hr,{t:s,i18nKey:g==="pageview"?"project.pageviewX":"project.eventX",components:{value:(0,Ie.jsx)(ig,{metadata:x}),span:(0,Ie.jsx)("span",{})},values:{x:d||(0,mm.default)(s("project.redactedPage"))}})}),(0,Ie.jsx)("div",{className:"whitespace-nowrap text-right text-sm text-gray-700 dark:text-gray-300",children:(0,Ie.jsx)("time",{dateTime:b,children:I})})]})]})]})},`${d}${b}${N}`)})})})};var ym=l(vm()),xm=l(Pn()),wm=l(Yc());Zl();var yt=l(T()),km=({details:e})=>{let{t,i18n:{language:s}}=M("common"),n=[{label:t("project.mapping.cc"),value:e.cc},{label:t("project.mapping.rg"),value:e.rg},{label:t("project.mapping.ct"),value:e.ct}],d=[{label:t("project.mapping.br"),value:e.br||"N/A"},{label:t("project.mapping.brv"),value:e.brv||"N/A"}],b=[{label:t("project.mapping.os"),value:e.os||"N/A"},{label:t("project.mapping.osv"),value:e.osv||"N/A"}],g=[{label:t("project.mapping.so"),value:e.so||"N/A"},{label:t("project.mapping.me"),value:e.me||"N/A"},{label:t("project.mapping.ca"),value:e.ca||"N/A"},{label:t("project.mapping.te"),value:e.te||"N/A"},{label:t("project.mapping.co"),value:e.co||"N/A"}];return(0,yt.jsxs)("div",{className:"mb-5 flex flex-wrap justify-center gap-5 lg:justify-start",children:[(0,yt.jsx)(da,{classes:{value:"max-md:text-xl md:text-3xl"},values:n,selectLabel:t("project.geo"),valueMapper:({value:x},N)=>N!==0?x||"N/A":x?(0,yt.jsx)("div",{className:"flex items-center",children:(0,yt.jsx)(Bt,{spaces:1,size:26,cc:x,language:s})}):t("project.unknownCountry")}),(0,yt.jsx)(da,{classes:{value:"max-md:text-xl md:text-3xl"},values:b,selectLabel:t("project.osInfo")}),(0,yt.jsx)(Vt,{classes:{value:"max-md:text-xl md:text-3xl"},label:t("project.mapping.dv"),value:e.dv||"N/A",valueMapper:x=>(0,ym.default)(x)}),(0,yt.jsx)(da,{classes:{value:"max-md:text-xl md:text-3xl"},values:d,selectLabel:t("project.browserInfo")}),(0,yt.jsx)(Vt,{classes:{value:"max-md:text-xl md:text-3xl"},label:t("project.mapping.lc"),value:e.lc||"N/A",valueMapper:x=>x==="N/A"?x:ra(x,s)}),(0,yt.jsx)(Vt,{classes:{value:"max-md:text-xl md:text-3xl"},label:t("project.mapping.ref"),value:e.ref||"N/A",valueMapper:x=>(0,xm.default)(x)<20?x:(0,yt.jsx)("span",{title:x,children:(0,wm.default)(x,{length:20})})}),(0,yt.jsx)(da,{classes:{value:"max-md:text-xl md:text-3xl"},values:g,selectLabel:t("project.campaigns")}),(0,yt.jsx)(Vt,{classes:{value:"max-md:text-xl md:text-3xl"},label:t("dashboard.sessionDuration"),value:e.sdur,valueMapper:x=>eo(Zr(x))})]})};var Nm=l(Se());es();oa();var Cm=l(T()),Pm=({chart:e,timeBucket:t,timeFormat:s,rotateXAxis:n,chartType:d,dataNames:b})=>((0,Nm.useEffect)(()=>{let g=ac(e,t,s,n,d);St.generate(g).data.names(b)},[e,t,s,n,d,b]),(0,Cm.jsx)("div",{className:"mt-5 h-80 md:mt-0 [&_svg]:!overflow-visible",id:"sessionChart"}));var si=l(Se());var Em=l(Ke());$e();var fe=l(T()),Sm=({className:e})=>(0,fe.jsx)("svg",{viewBox:"0 0 2 2",className:U("h-0.5 w-0.5 flex-none fill-gray-400",e),children:(0,fe.jsx)("circle",{cx:1,cy:1,r:1})}),vg=({error:e,onClick:t,className:s})=>{let{t:n,i18n:{language:d}}=M("common"),b=(0,si.useMemo)(()=>na(e.last_seen,d),[e.last_seen,d]),g=(0,si.useMemo)(()=>e.status==="active"?{label:n("error.status.active"),colour:"red"}:e.status==="regressed"?{label:n("error.status.regressed"),colour:"yellow"}:{label:n("error.status.resolved"),colour:"slate"},[e.status,n]),x=new URL(window.location.href);x.searchParams.set("eid",e.eid);let N=x.toString();return(0,fe.jsx)(Me,{onClick:I=>{I.preventDefault(),I.stopPropagation(),window.history.pushState({},"",N),t(e.eid)},to:N,children:(0,fe.jsxs)("li",{className:"relative mb-4 flex cursor-pointer justify-between gap-x-6 rounded-lg bg-gray-200/60 px-4 py-4 hover:bg-gray-200 dark:bg-[#162032] dark:hover:bg-slate-800 sm:px-6",children:[(0,fe.jsx)("div",{className:"flex min-w-0 gap-x-4",children:(0,fe.jsxs)("div",{className:"min-w-0 flex-auto",children:[(0,fe.jsxs)("p",{className:"flex items-center gap-x-2 font-semibold leading-6 text-gray-900 dark:text-gray-50",children:[(0,fe.jsx)("span",{className:"text-base font-bold",children:e.name}),e.filename?(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsx)(Sm,{}),(0,fe.jsx)("span",{className:"mx-1 text-sm font-normal text-gray-500",children:e.filename})]}):null]}),e.message?(0,fe.jsx)("p",{className:"mt-1 flex text-base leading-5 text-gray-500 dark:text-gray-300",children:e.message}):null,(0,fe.jsxs)("p",{className:"mt-1 flex items-center gap-x-2 text-base leading-5 text-gray-500 dark:text-gray-300",children:[(0,fe.jsx)(oo,{className:"mr-2 sm:hidden",label:g.label,colour:g.colour}),b,(0,fe.jsx)(Sm,{className:"sm:hidden"}),(0,fe.jsx)("span",{className:"sm:hidden",children:n("dashboard.xOccurrences",{x:e.count})})]})]})}),(0,fe.jsxs)("div",{className:"flex shrink-0 items-center gap-x-4",children:[(0,fe.jsxs)("div",{className:"hidden sm:flex sm:flex-col sm:items-end",children:[(0,fe.jsx)("p",{className:"text-sm leading-6 text-gray-900 dark:text-gray-50",children:n("dashboard.xOccurrences",{x:e.count})}),(0,fe.jsx)(oo,{label:g.label,colour:g.colour})]}),(0,fe.jsx)(Qa,{className:"h-5 w-5 flex-none text-gray-400","aria-hidden":"true"})]})]})})},Im=({errors:e,onClick:t})=>(0,fe.jsx)(_o,{fallback:(0,fe.jsx)("div",{className:"bg-gray-50 dark:bg-slate-900",children:(0,fe.jsx)($t,{})}),children:()=>(0,fe.jsx)("ul",{className:"mt-4",children:(0,Em.default)(e,(s,n)=>(0,fe.jsx)(vg,{error:s,onClick:t,className:`${n===0&&"rounded-t-md"} ${n===e.length-1&&"rounded-b-md"}`},s.eid))})});var Tm=l(Se());$e();var Xe=l(T()),yg=({user:e,project:t,isSharedProject:s})=>{let{t:n}=M("common"),d=(0,Tm.useMemo)(()=>{if(t!=null&&t.isOwner){if((e==null?void 0:e.dashboardBlockReason)==="exceeding_plan_limits")return n("project.locked.descExceedingTier");if((e==null?void 0:e.dashboardBlockReason)==="trial_ended")return n("project.locked.descTialEnded");if((e==null?void 0:e.dashboardBlockReason)==="payment_failed")return n("project.locked.descPaymentFailed");if((e==null?void 0:e.dashboardBlockReason)==="subscription_cancelled")return n("project.locked.descSubCancelled")}return n(s?"project.locked.descSharedProject":"project.locked.descGenericIssue")},[n,e,t,s]);return(0,Xe.jsx)("div",{className:"px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:(0,Xe.jsx)("div",{className:"mx-auto max-w-max",children:(0,Xe.jsxs)("main",{className:"sm:flex",children:[(0,Xe.jsx)(ql,{className:"-ml-1.5 mb-2 h-12 w-auto text-yellow-400 dark:text-yellow-600 sm:m-0 sm:h-24"}),(0,Xe.jsxs)("div",{className:"sm:ml-6",children:[(0,Xe.jsxs)("div",{className:"sm:border-l sm:border-gray-200 sm:pl-6",children:[(0,Xe.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-50 sm:text-5xl",children:n("project.locked.title")}),(0,Xe.jsxs)("p",{className:"mt-1 max-w-prose whitespace-pre-line text-base text-gray-700 dark:text-gray-300",children:[d,(t==null?void 0:t.isOwner)&&(0,Xe.jsxs)(Xe.Fragment,{children:[(0,Xe.jsx)("br",{}),(0,Xe.jsx)("br",{}),n("project.locked.resolve")]})]})]}),(t==null?void 0:t.isOwner)&&(0,Xe.jsxs)("div",{className:"mt-8 flex space-x-3 sm:border-l sm:border-transparent sm:pl-6",children:[(0,Xe.jsx)(Me,{to:Ne.billing,className:"inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:n("project.locked.manageSubscription")}),(0,Xe.jsx)(Me,{to:Ne.contact,className:"inline-flex items-center rounded-md border border-transparent bg-indigo-100 px-4 py-2 text-sm font-medium text-indigo-700 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-slate-800 dark:text-gray-50 dark:hover:bg-slate-700 dark:focus:ring-gray-50",children:n("notFoundPage.support")})]})]})]})})})},Rm=yg;var _m=l(Se());Ct();var Ht=l(T()),ni=bo.endsWith("/")?bo.slice(0,-1):bo,xg=e=>Lr?`<script src="https://swetrix.org/swetrix.js" defer><\/script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    swetrix.init('${e}', {
      apiURL: '${ni}/log',
    })
    swetrix.trackViews()
  })
<\/script>

<noscript>
  <img
    src="${ni}/log/noscript?pid=${e}"
    alt=""
    referrerpolicy="no-referrer-when-downgrade"
  />
</noscript>`:`<script src="https://swetrix.org/swetrix.js" defer><\/script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    swetrix.init('${e}')
    swetrix.trackViews()
  })
<\/script>

<noscript>
  <img
    src="${ni}/log/noscript?pid=${e}"
    alt=""
    referrerpolicy="no-referrer-when-downgrade"
  />
</noscript>`,wg="https://docs.swetrix.com/install-script",kg=({onClose:e,isOpened:t,pid:s})=>{let{t:n}=M("common"),d=xg(s);return(0,Ht.jsx)(st,{onClose:e,closeText:n("common.close"),message:(0,Ht.jsxs)("div",{children:[(0,Ht.jsx)("p",{children:(0,Ht.jsx)(hr,{t:n,i18nKey:"modals.trackingSnippet.add",components:{bsect:(0,Ht.jsx)(oo,{label:"<body>",colour:"slate"})}})}),(0,Ht.jsx)($c,{className:"mt-2",value:d,rows:17,readOnly:!0}),(0,Ht.jsx)("p",{className:"mt-4",children:(0,Ht.jsx)(hr,{t:n,i18nKey:"modals.trackingSnippet.docs",components:{pdocs:(0,Ht.jsx)("a",{href:wg,className:"font-medium text-indigo-600 hover:underline dark:text-indigo-400",target:"_blank",rel:"noreferrer noopener"})}})})]}),title:n("modals.trackingSnippet.title"),isOpened:t})},jm=kg;var ut=l(T()),Ng="https://docs.swetrix.com/troubleshooting",Pg=({project:e})=>{let{t}=M("common"),[s,n]=(0,_m.useState)(!1);return(0,ut.jsxs)("div",{className:"px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:[(0,ut.jsx)("div",{className:"mx-auto max-w-max",children:(0,ut.jsxs)("main",{className:"sm:flex",children:[(0,ut.jsx)(fs,{type:"giant",className:"-ml-1.5 mb-2 sm:m-0"}),(0,ut.jsx)("div",{className:"sm:ml-6",children:(0,ut.jsxs)("div",{className:"sm:border-l sm:border-gray-200 sm:pl-6",children:[(0,ut.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-50 sm:text-5xl",children:t("project.waiting.title")}),(0,ut.jsx)("p",{className:"mt-2 max-w-prose whitespace-pre-line text-base text-gray-700 dark:text-gray-300",children:(0,ut.jsx)(hr,{t,i18nKey:"project.waiting.desc",components:{turl:(0,ut.jsx)("a",{href:Ng,className:"font-medium text-indigo-600 hover:underline dark:text-indigo-400",target:"_blank",rel:"noreferrer noopener"}),curl:(0,ut.jsx)(Me,{to:Ne.contact,className:"font-medium text-indigo-600 hover:underline dark:text-indigo-400"}),snippet:(0,ut.jsx)("span",{role:"button",className:"cursor-pointer font-medium text-indigo-600 hover:underline dark:text-indigo-400",onClick:()=>n(!0)})}})})]})})]})}),(0,ut.jsx)(jm,{isOpened:s,onClose:()=>n(!1),pid:e.id})]})},Mm=Pg;var Dm=l(Se());es();oa();var Am=l(T()),Fm=({chart:e,timeBucket:t,timeFormat:s,rotateXAxis:n,chartType:d,dataNames:b})=>((0,Dm.useEffect)(()=>{let g=sc(e,t,s,n,d);St.generate(g).data.names(b)},[e,t,s,n,d,b]),(0,Am.jsx)("div",{className:"mt-5 h-80 md:mt-0 [&_svg]:!overflow-visible",id:"errorChart"}));var ii=l(Se());var Ft=l(T()),Lm=({details:e})=>{var b,g,x;let{t,i18n:{language:s}}=M("common"),n=(0,ii.useMemo)(()=>na(e.first_seen,s),[e.first_seen,s]),d=(0,ii.useMemo)(()=>na(e.last_seen,s),[e.last_seen,s]);return(0,Ft.jsxs)("div",{className:"mb-5 flex flex-wrap justify-center gap-5 lg:justify-start",children:[(0,Ft.jsxs)("div",{className:"flex flex-col",children:[(0,Ft.jsx)("p",{className:"font-bold text-slate-900 dark:text-gray-50 max-md:text-xl md:text-3xl",children:`${e.name}${e.message?`: ${e.message}`:""}`}),(0,Ft.jsx)("p",{className:"text-sm font-medium text-slate-700 dark:text-gray-200",children:t("dashboard.atFile",{filename:(b=e.filename)!=null?b:"Unknown file",lineno:(g=e.lineno)!=null?g:"N/A",colno:(x=e.colno)!=null?x:"N/A"})})]}),(0,Ft.jsx)(Vt,{classes:{value:"max-md:text-xl md:text-3xl"},label:t("dashboard.firstSeen"),value:e.first_seen||"N/A",valueMapper:N=>(0,Ft.jsx)(Kn,{className:"max-w-content !w-full",tooltipNode:(0,Ft.jsx)("span",{children:n}),text:`${N} UTC`})}),(0,Ft.jsx)(Vt,{classes:{value:"max-md:text-xl md:text-3xl"},label:t("dashboard.lastSeen"),value:e.last_seen||"N/A",valueMapper:N=>(0,Ft.jsx)(Kn,{className:"max-w-content !w-full",tooltipNode:(0,Ft.jsx)("span",{children:d}),text:`${N} UTC`})})]})};$e();var sr=l(T()),Cg=()=>{let{t:e}=M("common");return(0,sr.jsx)("div",{className:"px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:(0,sr.jsx)("div",{className:"mx-auto max-w-max",children:(0,sr.jsxs)("main",{className:"sm:flex",children:[(0,sr.jsx)(wo,{type:"giant",className:"-ml-1.5 mb-2 h-12 w-12 sm:m-0 sm:h-20 sm:w-20"}),(0,sr.jsx)("div",{className:"sm:ml-6",children:(0,sr.jsxs)("div",{className:"sm:border-l sm:border-gray-200 sm:pl-6",children:[(0,sr.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-50 sm:text-5xl",children:e("project.noErrorDetails")}),(0,sr.jsx)("p",{className:"mt-1 max-w-prose whitespace-pre-line text-base text-gray-700 dark:text-gray-300",children:e("project.noErrorDesc")})]})})]})})})},Om=Cg;$e();Ct();var xt=l(T()),Sg="https://docs.swetrix.com/troubleshooting",Eg=()=>{let{t:e}=M("common");return(0,xt.jsx)("div",{className:"px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:(0,xt.jsx)("div",{className:"mx-auto max-w-max",children:(0,xt.jsxs)("main",{className:"sm:flex",children:[(0,xt.jsx)(wo,{type:"giant",className:"-ml-1.5 mb-2 h-12 w-12 text-gray-900 dark:text-gray-50 sm:m-0 sm:h-20 sm:w-20"}),(0,xt.jsx)("div",{className:"sm:ml-6",children:(0,xt.jsxs)("div",{className:"sm:border-l sm:border-gray-200 sm:pl-6",children:[(0,xt.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-50 sm:text-5xl",children:e("project.waitingError.title")}),(0,xt.jsx)("p",{className:"mt-2 max-w-[80ch] whitespace-pre-line text-base text-gray-700 dark:text-gray-300",children:(0,xt.jsx)(hr,{t:e,i18nKey:"project.waitingError.desc",components:{turl:(0,xt.jsx)("a",{href:Sg,className:"font-medium text-indigo-600 hover:underline dark:text-indigo-400",target:"_blank",rel:"noreferrer noopener"}),curl:(0,xt.jsx)(Me,{to:Ne.contact,className:"font-medium text-indigo-600 hover:underline dark:text-indigo-400"}),howto:(0,xt.jsx)("a",{href:Nl,className:"font-medium text-indigo-600 hover:underline dark:text-indigo-400",target:"_blank",rel:"noreferrer noopener"})}})})]})})]})})})},Um=Eg;$e();var nr=l(T()),Ig=()=>{let{t:e}=M("common");return(0,nr.jsx)("div",{className:"px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8",children:(0,nr.jsx)("div",{className:"mx-auto max-w-max",children:(0,nr.jsxs)("main",{className:"sm:flex",children:[(0,nr.jsx)(Hl,{type:"giant",className:"-ml-1.5 mb-2 h-12 w-12 sm:m-0 sm:h-20 sm:w-20"}),(0,nr.jsx)("div",{className:"sm:ml-6",children:(0,nr.jsxs)("div",{className:"sm:border-l sm:border-gray-200 sm:pl-6",children:[(0,nr.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-50 sm:text-5xl",children:e("project.noSessionDetails")}),(0,nr.jsx)("p",{className:"mt-1 max-w-prose whitespace-pre-line text-base text-gray-700 dark:text-gray-300",children:e("project.noSessionDesc")})]})})]})})})},$m=Ig;var Ze=l(Se());var ha=l(xr()),Bm=l(rs()),li=l(yo()),ba=l(Ke()),ws=l(os()),Vm=l(Pn());Wa();Ct();ec();ro();$e();var le=l(T()),Tg=e=>(0,Bm.default)(Zt,(t,s)=>({...t,[e(`project.mapping.${s}`)]:s}),{}),Rg=({text:e,onClick:t})=>(0,le.jsx)("button",{type:"button",onClick:t,className:"mt-2 text-sm font-medium text-indigo-600 underline decoration-dashed hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-500",children:e}),jg=({metric:e,onChange:t,onDelete:s,errors:n,setErrors:d})=>{let{t:b}=M("common"),g=(0,Ze.useMemo)(()=>[{key:"float",label:b("project.metaValueType.decimal")},{key:"integer",label:b("project.metaValueType.integer")},{key:"string",label:b("project.metaValueType.text")}],[b]),x=(0,Ze.useMemo)(()=>{var N;return(N=(0,ws.default)(g,({key:I})=>I===e.metaValueType))==null?void 0:N.label},[g,e.metaValueType]);return(0,le.jsxs)("div",{className:"py-4",children:[(0,le.jsx)(or,{label:(0,le.jsxs)("p",{className:"flex w-full items-center justify-between",children:[(0,le.jsx)("span",{children:b("project.customEvent")}),(0,le.jsx)(bt,{role:"button","aria-label":"Delete custom event",className:"size-5 w-full max-w-max cursor-pointer hover:text-gray-900 dark:hover:text-gray-50",onClick:s})]}),maxLength:100,value:e.customEventName,onChange:({target:N})=>{d(I=>({...I,[`${e.id}_customEventName`]:""})),t("customEventName",N.value)},error:n[`${e.id}_customEventName`]}),(0,le.jsxs)("div",{className:"mt-3 flex items-start justify-between",children:[(0,le.jsx)(or,{className:"w-[48%]",maxLength:100,label:b("project.metrics.optinalEventKey.title"),hint:b("project.metrics.optinalEventKey.description"),value:e.metaKey,onChange:({target:N})=>{d(I=>({...I,[`${e.id}_metaKey`]:""})),t("metaKey",N.value)},error:n[`${e.id}_metaKey`]}),(0,le.jsx)(or,{className:"w-[48%]",maxLength:100,label:b("project.metrics.optinalEventValue.title"),hint:b("project.metrics.optinalEventValue.description"),value:e.metaValue,onChange:({target:N})=>{d(I=>({...I,[`${e.id}_metaValue`]:""})),t("metaValue",N.value)},error:n[`${e.id}_metaValue`]})]}),(0,le.jsxs)("div",{className:"mt-3 flex items-start justify-between",children:[(0,le.jsx)(or,{className:"w-[48%]",maxLength:100,label:b("project.metrics.metricKey.title"),hint:b("project.metrics.metricKey.description"),value:e.metricKey,onChange:({target:N})=>{d(I=>({...I,[`${e.id}_metricKey`]:""})),t("metricKey",N.value)},error:n[`${e.id}_metricKey`]}),(0,le.jsx)("div",{className:"w-[48%]",children:(0,le.jsx)(ao,{items:g,keyExtractor:N=>N.key,labelExtractor:N=>N.label,onSelect:N=>{var P;let I=(P=(0,ws.default)(g,({label:O})=>O===N))==null?void 0:P.key;t("metaValueType",I)},label:b("project.metrics.metricType.title"),hint:b("project.metrics.metricType.description"),title:x,capitalise:!0})})]})]})},_g={customEventName:"",metaKey:"",metaValue:"",metaValueType:"float"},Mg=3,Dg=({onSubmit:e,pid:t,showModal:s,setShowModal:n,tnMapping:d,projectPassword:b,defaultView:g})=>{let{t:x,i18n:{language:N}}=M("common"),[I,P]=(0,Ze.useState)((g==null?void 0:g.name)||""),[O,X]=(0,Ze.useState)(""),[S,de]=(0,Ze.useState)([]),[te,H]=(0,Ze.useState)((g==null?void 0:g.filters)||[]),[B,se]=(0,Ze.useState)((g==null?void 0:g.customEvents)||[]),[re,ce]=(0,Ze.useState)(!1),[Q,L]=(0,Ze.useState)({}),me=(0,Ze.useMemo)(()=>Tg(x),[x]),Te=(0,Ze.useCallback)(async Y=>{let he=await to(t,Y,b);de(he)},[t,b]);(0,Ze.useEffect)(()=>{g&&(g.filters&&H(g.filters),g.customEvents&&se(g.customEvents),P(g.name))},[g]),(0,Ze.useEffect)(()=>{!s||(0,ha.default)(O)||Te(O)},[O,s,Te]);let G=()=>{n(!1),setTimeout(()=>{P(""),X(""),H([]),se([]),L({})},300)},et=Y=>{let he=Y;O==="cc"&&(he=Co.getAlpha2Code(Y,N)),!(0,ws.default)(te,({column:Fe,filter:ne})=>ne===he&&Fe===O)&&H(Fe=>[...Fe,{column:O,filter:he,isExclusive:!1}])},Be=()=>{let Y=!0,he={};I||(L(Ue=>({...Ue,name:x("apiNotifications.enterViewName")})),Y=!1);for(let Ue=0;Ue<(0,Vm.default)(B);++Ue){let{id:Fe,customEventName:ne,metricKey:p}=B[Ue];ne||(he[`${Fe}_customEventName`]=x("apiNotifications.inputCannotBeEmpty"),Y=!1),p||(he[`${Fe}_metricKey`]=x("apiNotifications.inputCannotBeEmpty"),Y=!1)}return(0,ha.default)(he)||L(Ue=>({...Ue,...he})),Y};return(0,le.jsx)(st,{onClose:()=>{re||G()},onSubmit:async()=>{if(!re&&Be()){ce(!0);try{g!=null&&g.id?await kc(t,g==null?void 0:g.id,I,te,B):await wc(t,I,"traffic",te,B)}catch(Y){console.error("[ERROR] onViewCreate:",Y),pe.error(x("apiNotifications.somethingWentWrong"))}ce(!1),e(),G()}},submitText:x("common.confirm"),title:x("project.addAView"),isLoading:re,message:(0,le.jsxs)("div",{className:"min-h-[410px]",children:[(0,le.jsx)(or,{label:x("project.viewName"),value:I,onChange:({target:Y})=>{P(Y.value),L(he=>({...he,name:""}))},error:Q.name,maxLength:20}),(0,le.jsx)("hr",{className:"my-4"}),(0,le.jsx)(ao,{label:x("project.selectCategoryOptional"),items:Zt,labelExtractor:Y=>x(`project.mapping.${Y}`),onSelect:Y=>X(me[Y]),title:(0,ha.default)(O)?x("project.settings.reseted.selectFilters"):x(`project.mapping.${O}`)}),O&&!(0,ha.default)(S)&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)("p",{className:"mt-5 text-sm font-medium text-gray-700 dark:text-gray-200",children:x("project.filters")}),(0,le.jsx)(Fo,{items:S,labelExtractor:Y=>O==="cc"?Co.getName(Y,N):Y,onSelect:et,placeholder:x("project.settings.reseted.filtersPlaceholder")})]}),(0,le.jsx)("div",{className:"mt-2",children:(0,ba.default)(te,({filter:Y,column:he,isExclusive:Ue})=>(0,le.jsx)(la,{onRemoveFilter:(Fe,ne)=>{H(p=>(0,li.default)(p,({column:oe,filter:Tt})=>Tt!==ne||oe!==Fe))},onChangeExclusive:(Fe,ne,p)=>{H(oe=>(0,ba.default)(oe,Tt=>Tt.column===Fe&&Tt.filter===ne?{column:Fe,filter:ne,isExclusive:p}:Tt))},isExclusive:Ue,column:he,filter:Y,tnMapping:d,canChangeExclusive:!0,removable:!0},`${he}-${Y}`))}),(0,le.jsx)("hr",{className:"my-4"}),(0,le.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:x("project.customEventsAndMetrics")}),(0,le.jsx)("div",{className:"divide-y divide-gray-300/80 dark:divide-slate-900/60",children:(0,ba.default)(B,Y=>(0,le.jsx)(jg,{metric:Y,setErrors:L,errors:Q,onChange:(he,Ue)=>{se(Fe=>(0,ba.default)(Fe,ne=>ne.id!==Y.id?ne:{...ne,[he]:Ue}))},onDelete:()=>{se(he=>(0,li.default)(he,({id:Ue})=>Ue!==Y.id))}},Y.id))}),B.length<Mg&&(0,le.jsx)(Rg,{text:x("project.addAMetric"),onClick:()=>{se(Y=>[...Y,{..._g,id:Math.random().toString()}])}})]}),submitType:"regular",isOpened:s})},Km=Dg;$e();var ks=l(Se()),Hm=l(xr()),qm=l(Ke());var Et=l(T()),Fg=({metric:e,onRemove:t})=>{let{t:s}=M("common"),n=(0,ks.useMemo)(()=>{let{customEventName:d,metaKey:b,metaValue:g,metricKey:x}=e;return b&&g?s("project.metrics.filterKV",{customEventName:d,metaKey:b,metaValue:g,metricKey:x}):b?s("project.metrics.filterK",{customEventName:d,metaKey:b,metricKey:x}):g?s("project.metrics.filterV",{customEventName:d,metaValue:g,metricKey:x}):s("project.metrics.filterNoKV",{customEventName:d,metricKey:x})},[s,e]);return(0,Et.jsxs)("span",{className:"m-1 inline-flex items-center rounded-md bg-gray-50 py-0.5 pl-2.5 pr-1 text-sm font-medium text-gray-800 dark:bg-slate-800 dark:text-gray-50",children:[n,(0,Et.jsxs)("button",{onClick:t,type:"button",className:"ml-0.5 inline-flex h-4 w-4 flex-shrink-0 items-center justify-center rounded-full text-gray-800 hover:bg-gray-300 hover:text-gray-900 focus:bg-gray-300 focus:text-gray-900 focus:outline-none dark:bg-slate-800 dark:text-gray-50 dark:hover:bg-gray-800 dark:hover:text-gray-300 dark:focus:bg-gray-800 dark:focus:text-gray-300",children:[(0,Et.jsx)("span",{className:"sr-only",children:"Remove filter"}),(0,Et.jsx)("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:(0,Et.jsx)("path",{strokeLinecap:"round",strokeWidth:"1.5",d:"M1 1l6 6m0-6L1 7"})})]})]})},Ag=({metrics:e,onRemoveMetric:t,resetMetrics:s})=>(0,Hm.default)(e)?null:(0,Et.jsxs)("div",{className:"mt-2 flex items-center justify-between rounded-md bg-slate-200 p-1 shadow dark:border dark:border-slate-800/50 dark:bg-slate-800/25",children:[(0,Et.jsxs)("div",{className:"flex items-center",children:[(0,Et.jsx)(Gl,{className:"box-content size-6 flex-shrink-0 px-1 text-gray-700 dark:text-gray-200"}),(0,Et.jsx)("div",{className:"flex flex-wrap",children:(0,qm.default)(e,n=>(0,Et.jsx)(Fg,{metric:n,onRemove:()=>{t(n.id)}},n.id))})]}),(0,Et.jsx)(bt,{className:"box-content size-6 flex-shrink-0 cursor-pointer stroke-2 px-1 text-gray-800 hover:text-gray-600 dark:text-gray-200 dark:hover:text-gray-300",onClick:s})]}),Ym=(0,ks.memo)(Ag);var Xm=l(Se()),Wm=l(Ke());var Jm=l(ia());$e();var At=l(T()),Lg=[{label:"project.mapping.br",value:"br"},{label:"project.mapping.brv",value:"brv"}],Og=({onSelect:e,title:t})=>{let{t:s}=M(),[n,d]=(0,Xm.useState)(!1),b=g=>{e(g),d(!1)};return(0,At.jsxs)(Jm.default,{onOutsideClick:()=>d(!1),children:[(0,At.jsxs)("span",{className:"cursor-pointer",onClick:()=>d(!n),children:[t," ",n?(0,At.jsx)(tr,{className:"inline size-4"}):(0,At.jsx)(er,{className:"inline size-4"})]}),n&&(0,At.jsxs)("div",{className:"top-15 absolute left-5 z-10 mt-2 max-h-[200px] min-w-[250px] overflow-auto rounded-md border border-gray-200 bg-white text-gray-900 shadow-lg dark:border-slate-700/50 dark:bg-slate-900",children:[(0,At.jsxs)("div",{className:"flex w-full flex-col p-2",children:[(0,At.jsx)("p",{className:"px-1 text-sm font-semibold text-gray-900 dark:text-gray-50",children:s("project.browserInfo")}),(0,Wm.default)(Lg,({label:g,value:x})=>(0,At.jsx)("div",{onClick:()=>b(x),className:"flex w-full cursor-pointer flex-row items-center justify-between px-1 py-2 text-sm text-gray-700 hover:bg-gray-200 dark:bg-slate-900 dark:text-gray-200 dark:hover:bg-slate-800",children:(0,At.jsx)("p",{children:s(g)})},g))]}),(0,At.jsx)(bt,{className:"absolute right-2 top-2 h-5 w-5 cursor-pointer text-gray-900 dark:text-gray-50",onClick:()=>d(!n)})]})]})},Ns=Og;var Gm=l(Se()),zm=l(Ke());var Qm=l(ia());$e();var Lt=l(T()),Ug=[{label:"project.mapping.os",value:"os"},{label:"project.mapping.osv",value:"osv"}],$g=({onSelect:e,title:t})=>{let{t:s}=M(),[n,d]=(0,Gm.useState)(!1),b=g=>{e(g),d(!1)};return(0,Lt.jsxs)(Qm.default,{onOutsideClick:()=>d(!1),children:[(0,Lt.jsxs)("span",{className:"cursor-pointer",onClick:()=>d(!n),children:[t," ",n?(0,Lt.jsx)(tr,{className:"inline size-4"}):(0,Lt.jsx)(er,{className:"inline size-4"})]}),n&&(0,Lt.jsxs)("div",{className:"top-15 absolute left-5 z-10 mt-2 max-h-[200px] min-w-[250px] overflow-auto rounded-md border border-gray-200 bg-white text-gray-900 shadow-lg dark:border-slate-700/50 dark:bg-slate-900",children:[(0,Lt.jsxs)("div",{className:"flex w-full flex-col p-2",children:[(0,Lt.jsx)("p",{className:"px-1 text-sm font-semibold text-gray-900 dark:text-gray-50",children:s("project.osInfo")}),(0,zm.default)(Ug,({label:g,value:x})=>(0,Lt.jsx)("div",{onClick:()=>b(x),className:"flex w-full cursor-pointer flex-row items-center justify-between px-1 py-2 text-sm text-gray-700 hover:bg-gray-200 dark:bg-slate-900 dark:text-gray-200 dark:hover:bg-slate-800",children:(0,Lt.jsx)("p",{children:s(g)})},g))]}),(0,Lt.jsx)(bt,{className:"absolute right-2 top-2 h-5 w-5 cursor-pointer text-gray-900 dark:text-gray-50",onClick:()=>d(!n)})]})]})},ci=$g;var a=l(T()),Bg=Zm(),eu=32,va=30,ya=30,mu=(0,u.createContext)(void 0),gs=()=>{let e=(0,u.useContext)(mu);if(e===void 0)throw new Error("useViewProjectContext must be used within a ViewProjectContextProvider");return e},Vg=({projects:e,isLoading:t,cache:s,cachePerf:n,setProjectCache:d,projectViewPrefs:b,setProjectViewPrefs:g,setPublicProject:x,setLiveStatsForProject:N,authenticated:I,timezone:P=wl,user:O,sharedProjects:X,extensions:S,setProjectCachePerf:de,projectTab:te,setProjectTab:H,setProjects:B,setProjectForcastCache:se,customEventsPrefs:re,setCustomEventsPrefs:ce,liveStats:Q,password:L,theme:me,ssrTheme:Te,embedded:G,ssrAuthenticated:et,queryPassword:Be,authLoading:Ce,cacheFunnels:Y,setFunnelsCache:he,updateProject:Ue,projectQueryTabs:Fe})=>{var il,ll,cl;let ne=pn?Ce?et:I:et,{t:p,i18n:{language:oe}}=M("common"),Tt=pn?me:Te,[ve,Xt]=(0,u.useState)(br(p,void 0,void 0,oe)),[wa,ka]=(0,u.useState)([]),[$o,so]=(0,u.useState)([]),[ee,be]=(0,u.useState)(null),[ye,ir]=(0,u.useState)([]),pt=(0,u.useRef)(null),{id:v}=Uc(),xe=Fr(),W=(0,u.useMemo)(()=>(0,Re.default)([...e,...(0,Le.default)(X,o=>({...o.project,role:o.role}))],o=>o.id===v)||{},[e,v,X]),j=(0,u.useMemo)(()=>{var o;return L[v]||((o=Ja(hn))==null?void 0:o[v])||Be||""},[v,L,Be]),Ps=(0,u.useMemo)(()=>{let o=(0,Re.default)([...(0,Le.default)(X,i=>i.project)],i=>i.id===v);return!(0,E.default)(o)},[v,X]),[Na,vu]=(0,u.useState)(!1),[Pa,yu]=(0,u.useState)(!1),[Wt,xu]=(0,u.useState)(!1),[no,wu]=(0,u.useState)(!1),[We,ku]=(0,u.useState)({}),[pi,fi]=(0,u.useState)({}),[gi,hi]=(0,u.useState)({}),[io,Ca]=(0,u.useState)(!1),[Nu,Cs]=(0,u.useState)(!1),[Pu,Sa]=(0,u.useState)(!1),[Cu,Ss]=(0,u.useState)(!1),[lr,Cr]=(0,u.useState)(!0),[F,bi]=(0,u.useState)(b&&((il=b[v])==null?void 0:il.period)||ve[4].period),[K,lo]=(0,u.useState)(b&&((ll=b[v])==null?void 0:ll.timeBucket)||ve[4].tbs[1]),ie=(0,u.useMemo)(()=>(0,Re.default)(ve,o=>o.period===F),[F,ve]),[Sr,Su]=(0,u.useState)({}),[Kr,co]=(0,u.useState)(null),[wt,tt]=(0,u.useState)(!1),[ue,Eu]=(0,u.useState)({[ge.unique]:!0,[ge.views]:!1,[ge.sessionDuration]:!1,[ge.bounce]:!1,[ge.viewsPerUnique]:!1,[ge.trendlines]:!1,[ge.cumulativeMode]:!1}),[Bo,Iu]=(0,u.useState)({[as.showResolved]:!1}),[ft,Tu]=(0,u.useState)(Ge.timing),[Hr,Ru]=(0,u.useState)(Or.median),Es=(0,u.useMemo)(()=>!(0,ui.default)({...ue,...ye},o=>o),[ue,ye]),[Ea,Is]=(0,u.useState)([]),[Z,cr]=(0,u.useState)([]),[rt,dr]=(0,u.useState)([]),[mr,Er]=(0,u.useState)([]),[vi,ju]=(0,u.useState)(!1),[Jt,Ir]=(0,u.useState)([]),[yi,_u]=(0,u.useState)(!1),Ve=ne?t:!1,je=dc(p),Ia=(0,u.useRef)(null),xi=(0,u.useRef)(null),Ts=b?(cl=b[v])==null?void 0:cl.rangeDate:null,[_,qr]=(0,u.useState)(Ts?[new Date(Ts[0]),new Date(Ts[1])]:null),[y,Vo]=(0,u.useState)(()=>te||w.traffic),[Mu,wi]=(0,u.useState)(!1),[Du,ki]=(0,u.useState)(0),[Fu,Ta]=(0,u.useState)(!1),[Ra,Ni]=(0,u.useState)([]),[Tr,Rs]=(0,u.useState)(null),[we,Pi]=(0,u.useState)(null),[js,Ci]=(0,u.useState)(!1),[Rr,ja]=(0,u.useState)(null),[Au,Si]=(0,u.useState)(0),[Lu,Ei]=(0,u.useState)(!1),[Yr,_s]=(0,u.useState)([]),[Xr,Ms]=(0,u.useState)(null),[J,Ds]=(0,u.useState)(null),[mo,_a]=(0,u.useState)(!1),[jr,uo]=(0,u.useState)(!1),[lt,Fs]=(0,u.useState)(null),[ot,Ii]=(0,u.useState)(null),[As,Ti]=(0,u.useState)(void 0),[Ko,po]=(0,u.useState)(!1),[Ls,Ri]=(0,u.useState)([]),[Ho,Os]=(0,u.useState)(null),[ji,Us]=(0,u.useState)(!1),[Ou,$s]=(0,u.useState)(),[_r,qo]=(0,u.useState)({}),[Wr,_i]=(0,u.useState)(!1),[fo,Mi]=(0,u.useState)(null),[Di,Bs]=(0,u.useState)(null),Uu=(0,u.useMemo)(()=>{if(!fo)return[];let o=(0,Le.default)(fo,(i,c)=>parseInt((0,ru.default)(c,"_")[1],10)).sort((i,c)=>i-c);return(0,Le.default)(o,i=>{let c=`next_${i}_hour`;return i===1?{key:c,label:p("project.nextOneHour")}:{key:c,label:p("project.nextXHours",{x:i})}})},[fo,p]),Gt=ue[ge.cumulativeMode]?"cumulative":"periodical",Fi=async o=>{if(!(!o&&Ho!==null)){Os(!0);try{let i=await xc(v,j);Ri(i)}catch(i){console.error("[ERROR] (loadProjectViews)",i),pe.error(i)}Os(!1)}},$u=async o=>{if(!ji){Us(!0);try{await Nc(v,o)}catch(i){console.error("[ERROR] (deleteProjectView)",i),pe.error(i),Us(!1);return}pe.success(p("apiNotifications.viewDeleted")),await Fi(!0),Us(!1)}},Bu=async(o,i)=>{if(!Ko){po(!0);try{await Ic(v,o,i)}catch(c){console.error("[ERROR] (onFunnelCreate)(addFunnel)",c),pe.error(c)}try{let c=await ls(v,j);Ue(v,{funnels:c})}catch(c){console.error("[ERROR] (onFunnelCreate)(getFunnels)",c)}pe.success(p("apiNotifications.funnelCreated")),po(!1)}},Vu=async(o,i,c)=>{if(!Ko){po(!0);try{await Tc(o,v,i,c)}catch(m){console.error("[ERROR] (onFunnelEdit)(updateFunnel)",m),pe.error(m)}try{let m=await ls(v,j);Ue(v,{funnels:m})}catch(m){console.error("[ERROR] (onFunnelCreate)(getFunnels)",m)}pe.success(p("apiNotifications.funnelUpdated")),po(!1)}},Ku=async o=>{if(!Ko){po(!0);try{await Rc(o,v)}catch(i){console.error("[ERROR] (onFunnelDelete)(deleteFunnel)",i),pe.error(i)}try{let i=await ls(v,j);Ue(v,{funnels:i})}catch(i){console.error("[ERROR] (onFunnelCreate)(getFunnels)",i)}pe.success(p("apiNotifications.funnelDeleted")),po(!1)}},[Ai,Li]=(0,u.useState)(0),[Rt,Vs]=(0,u.useState)("cc"),[ct,Ks]=(0,u.useState)("br"),[zt,Oi]=(0,u.useState)("os"),[Ma,Hu]=(0,u.useState)("so"),[Hs,qu]=(0,u.useState)({}),[Da,Fa]=(0,u.useState)(!1),[Jr,Yu]=(0,u.useState)({}),Qt=(0,u.useMemo)(()=>O.timeFormat||yl["12-hour"],[O]),[Xu,Aa]=Bc(),Gr=(0,u.useMemo)(()=>Aa.width>0&&Aa.width<500,[Aa]),Yo=(0,u.useMemo)(()=>(0,nu.default)(re[v],(o,i)=>(0,Pe.default)(ye,i)),[re,v,ye]),[kt,Wu]=(0,u.useState)(Ja("chartType")||jt.line),[Xo,qs]=(0,u.useState)(zo(p,void 0,oe)),[dt,Ys]=(0,u.useState)(()=>{let o=Ja(bn);return typeof o=="string"?o==="true":typeof o=="boolean"?o:!1}),[Mr,Xs]=(0,u.useState)(Xo[0].period),Ju=(0,u.useMemo)(()=>{var o;return(o=(0,Re.default)(Xo,i=>i.period===Mr))==null?void 0:o.label},[Xo,Mr]),[Nt,Ws]=(0,u.useState)(null),[Js,Ui]=(0,u.useState)({}),[Gu,$i]=(0,u.useState)({}),[zu,Bi]=(0,u.useState)({}),[Qu,Vi]=(0,u.useState)({}),Zu=(0,u.useMemo)(()=>{if(!dt)return 0;let o=(0,Re.default)(ve,i=>i.period===F);return(o==null?void 0:o.period)==="custom"&&_?qt.default.utc(_[1]).diff(qt.default.utc(_[0]),"day"):(o==null?void 0:o.countDays)||0},[dt,F]),Ki=[je.pg,je.userFlow],{name:ur}=W;(0,u.useEffect)(()=>{let o=O!=null&&O.showLiveVisitorsInTitle?`\u{1F440} ${Q[v]} - ${ur}`:ur;o||(o=p("titles.main")),o+=` ${xl}`,document.title=o},[ur,O,Q,v,p]);let Hi=(0,u.useMemo)(()=>{var o;return((o=(0,Re.default)(O.sharedProjects,i=>i.project.id===v))==null?void 0:o.role)||{}},[O,v]),ep=(0,u.useMemo)(()=>y===w.errors?(0,Oe.default)(ve,o=>(0,Pe.default)(pl,o.period)):y===w.funnels?(0,Oe.default)(ve,o=>(0,Pe.default)(fl,o.period)):dt?(0,Oe.default)(ve,o=>(0,Pe.default)(mn,o.period)):(0,Pe.default)(mn,F)?ve:(0,Oe.default)(ve,o=>o.period!==vr.COMPARE),[y,dt,F,ve]),[tp,La]=(0,u.useState)(!1),Gs=(0,u.useMemo)(()=>[{id:ge.unique,label:p("dashboard.unique"),active:ue[ge.unique]},{id:ge.views,label:p("project.showAll"),active:ue[ge.views]},{id:ge.sessionDuration,label:p("dashboard.sessionDuration"),active:ue[ge.sessionDuration],conflicts:[ge.bounce]},{id:ge.bounce,label:p("dashboard.bounceRate"),active:ue[ge.bounce],conflicts:[ge.sessionDuration]},{id:ge.viewsPerUnique,label:p("dashboard.viewsPerUnique"),active:ue[ge.viewsPerUnique]},{id:ge.trendlines,label:p("dashboard.trendlines"),active:ue[ge.trendlines]},{id:ge.cumulativeMode,label:p("dashboard.cumulativeMode"),active:ue[ge.cumulativeMode]},{id:ge.customEvents,label:p("project.customEv"),active:ue[ge.customEvents]}],[p,ue]),rp=(0,u.useMemo)(()=>[{id:as.showResolved,label:p("project.showResolved"),active:Bo[as.showResolved]}],[p,Bo]),qi=(0,u.useMemo)(()=>[{id:Ge.quantiles,label:p("dashboard.allocation"),active:ft===Ge.quantiles},{id:Ge.full,label:p("dashboard.timingFull"),active:ft===Ge.full},{id:Ge.timing,label:p("dashboard.timing"),active:ft===Ge.timing},{id:Ge.network,label:p("dashboard.network"),active:ft===Ge.network},{id:Ge.frontend,label:p("dashboard.frontend"),active:ft===Ge.frontend},{id:Ge.backend,label:p("dashboard.backend"),active:ft===Ge.backend}],[p,ft]),Yi=(0,u.useMemo)(()=>[{id:Or.average,label:p("dashboard.average"),active:Hr===Or.average},{id:Or.median,label:p("dashboard.median"),active:Hr===Or.median},{id:Or.p95,label:p("dashboard.xPercentile",{x:95}),active:Hr===Or.p95}],[p,Hr]),op=(0,u.useMemo)(()=>(0,E.default)(We.customs)?[]:(0,Le.default)((0,Yt.default)(We.customs),o=>({id:o,label:o,active:(0,Pe.default)(ye,o)})),[We,ye]),Xi=(0,u.useMemo)(()=>(0,E.default)(We.customs)?{}:{...(0,Yt.default)(We.customs)},[We]),Wo=(0,u.useMemo)(()=>({unique:p("project.unique"),total:p("project.total"),bounce:`${p("dashboard.bounceRate")} (%)`,viewsPerUnique:p("dashboard.viewsPerUnique"),trendlineTotal:p("project.trendlineTotal"),trendlineUnique:p("project.trendlineUnique"),occurrences:p("project.occurrences"),sessionDuration:p("dashboard.sessionDuration"),...Xi}),[p,Xi]),Wi=(0,u.useMemo)(()=>({full:p("dashboard.timing"),network:p("dashboard.network"),frontend:p("dashboard.frontend"),backend:p("dashboard.backend"),dns:p("dashboard.dns"),tls:p("dashboard.tls"),conn:p("dashboard.conn"),response:p("dashboard.response"),render:p("dashboard.render"),dom_load:p("dashboard.domLoad"),ttfb:p("dashboard.ttfb"),p50:p("dashboard.xPercentile",{x:50}),p75:p("dashboard.xPercentile",{x:75}),p95:p("dashboard.xPercentile",{x:95})}),[p]),Ot=(0,u.useMemo)(()=>(W==null?void 0:W.isOwner)||Hi===Ml.role,[W,Hi]),Ji=(0,u.useMemo)(()=>({dropoff:p("project.dropoff"),events:p("project.visitors")}),[p]),Jo=(0,u.useMemo)(()=>{let o=[{id:w.traffic,label:p("dashboard.traffic"),icon:za},{id:w.performance,label:p("dashboard.performance"),icon:Ul},{id:w.sessions,label:p("dashboard.sessions"),icon:zl},{id:w.errors,label:p("dashboard.errors"),icon:wo},{id:w.funnels,label:p("dashboard.funnels"),icon:kn}],i=Ot?[{id:"settings",label:p("common.settings"),icon:Bl}]:[];if(Lr)return[...o,...i];let c=[...o,{id:w.alerts,label:p("dashboard.alerts"),icon:ta},["79eF2Z9rNNvv","STEzHcB1rALV"].includes(v)&&{id:w.uptime,label:p("dashboard.uptime"),icon:Za},...i].filter(m=>!!m);return Fe&&Fe.length?(0,Oe.default)(c,m=>(0,Pe.default)(Fe,m.id)):c},[p,v,Fe,Ot]),ap=(0,u.useMemo)(()=>{var o;return(o=(0,Re.default)(Jo,i=>i.id===y))==null?void 0:o.label},[Jo,y]),Gi=(o,i)=>{if(sl(i)){pe.error(p("project.conflictMetric"));return}o!==ge.customEvents&&Eu(c=>({...c,[o]:!c[o]}))},zi=o=>{ir(i=>{let c=[...i],m=(0,mi.default)(i,r=>r===o);return m===-1?c.push(o):c.splice(m,1),c})},Qi=(0,u.useCallback)((0,su.default)(o=>{Iu(i=>({...i,[o]:!i[o]})),Dr()},0),[]),Zi=o=>{var c;if(!((c=J==null?void 0:J.details)!=null&&c.eid))return;let i=(0,mi.default)(Yr,m=>m.eid===lt);i!==-1&&(Yr[i]={...Yr[i],status:o})},sp=async()=>{var o;if(!(jr||!lt||!((o=J==null?void 0:J.details)!=null&&o.eid))){uo(!0);try{await Bn(W.id,"resolved",lt),await Oa(lt),Zi("resolved")}catch(i){console.error("[markErrorAsResolved]",i),pe.error(p("apiNotifications.updateErrorStatusFailed")),uo(!1);return}pe.success(p("apiNotifications.errorStatusUpdated")),uo(!1)}},np=async()=>{var o;if(!(jr||!lt||!((o=J==null?void 0:J.details)!=null&&o.eid))){uo(!0);try{await Bn(W.id,"active",lt),await Oa(lt),Zi("active")}catch(i){console.error("[markErrorAsResolved]",i),pe.error(p("apiNotifications.updateErrorStatusFailed")),uo(!1);return}pe.success(p("apiNotifications.errorStatusUpdated")),uo(!1)}},zs=()=>{if(j){jc(v,j).then(o=>{if(o){xe({pathname:(0,Pr.default)(Ne.project,":id",v),search:`?theme=${Te}&embedded=${G}`});return}pe.error(p("apiNotifications.incorrectPassword")),xe({pathname:(0,Pr.default)(Ne.project_protected_password,":id",v),search:`?theme=${Te}&embedded=${G}`}),Ll(hn)});return}pe.error(p("project.noExist")),xe(Ne.dashboard)},ip=async()=>{if((0,E.default)(We.customs))return;let o=null,i,c;try{tt(!0),_&&(i=ae(_[0]),c=ae(_[1])),(0,iu.default)(ye,k=>(0,Pe.default)((0,Yt.default)(Yo),k))||(F==="custom"&&_?o=await sa(v,K,"",Z,i,c,P,ye,j):o=await sa(v,K,F,Z,"","",P,ye,j));let r=o!=null&&o.chart?o.chart.events:Yo;ce(v,r);let h=!(0,Pe.default)(ss,ie==null?void 0:ie.period),f=ns(Sr,K,ue,h,Qt,_r,Gr,kt,r);co(()=>{let k=St.generate(f);return k.data.names(Wo),k})}catch(m){console.error("[ERROR] FAILED TO LOAD CUSTOM EVENTS",m)}finally{tt(!1)}};(0,u.useEffect)(()=>{y===w.traffic&&ip()},[ye]);let Go=()=>{Ys(!1),Ws(null),Ui({}),$i({}),Bi({}),Vi({}),Xs(Xo[0].period)},gt=async(o=!1,i=null,c=null)=>{var m,r;if(!(!o&&(Ve||(0,E.default)(W)||wt))){tt(!0);try{let h,f,k="",R="",V,C,A,q,z=Yo,at;if(dt){if(Nt&&Mr===vr.CUSTOM){let ht,pr,fr,xp=qt.default.utc(Nt[0]),dl=qt.default.utc(Nt[1]).diff(xp,"day");(ie==null?void 0:ie.period)==="custom"&&_&&(ht=qt.default.utc(_[0]),pr=qt.default.utc(_[1]),fr=pr.diff(ht,"day")),((ie==null?void 0:ie.period)==="custom"?dl<=fr:dl<=(ie==null?void 0:ie.countDays))?(C=ae(Nt[0]),q=ae(Nt[1]),R=Zo(C,q,K,Gt,i||Z)):(pe.error(p("project.compareDateRangeError")),Go())}else{let ht;_?ht=(m=(0,Re.default)(ua,pr=>pr.period===F))==null?void 0:m.formula(_):ht=(r=(0,Re.default)(ua,pr=>pr.period===F))==null?void 0:r.formula(),ht&&(C=ht.from,q=ht.to,R=Zo(C,q,K,Gt,i||Z))}if(!(0,E.default)(C)&&!(0,E.default)(q))if(!(0,E.default)(s[v])&&!(0,E.default)(s[v][R]))f=s[v][R];else{f=await bc(v,K,"",i||Z,C,q,P,j,Gt)||{};let ht=await aa([v],"custom",C,q,P,i||Z,j);f.overall=ht[v]}d(v,f,R)}_?(V=ae(_[0]),A=ae(_[1]),k=Zo(V,A,K,Gt,i||Z)):k=fn(F,K,Gt,i||Z),!o&&!(0,E.default)(s[v])&&!(0,E.default)(s[v][k])?(h=s[v][k],fi(h.overall)):(F==="custom"&&_?(h=await Tn(v,K,"",i||Z,c||Ea,V,A,P,j,Gt),z=await sa(v,K,"",Z,V,A,P,ye,j),at=await aa([v],F,V,A,P,i||Z,j)):(h=await Tn(v,K,F,i||Z,c||Ea,"","",P,j,Gt),z=await sa(v,K,F,Z,"","",P,ye,j),at=await aa([v],F,"","",P,i||Z,j)),z=z!=null&&z.chart?z.chart.events:Yo,ce(v,z),h.overall=at[v],d(v,h,k),fi(at[v]));let mt={...h||{},filters:i||Z,timezone:P,timeBucket:K,period:F,from:V,to:A};if((0,Yt.default)(h).length<2){Cr(!1),tt(!1),Ca(!0),ee==null||ee._emitEvent("load",mt);return}let{chart:_e,params:Je,customs:Pt,properties:an,appliedFilters:sn,meta:Ha}=h,nn=K;if(ee==null||ee._emitEvent("load",mt),F===Ar&&!(0,E.default)(h.timeBucket)&&(nn=(0,Pe.default)(h.timeBucket,K)?K:h.timeBucket[0],Xt(ht=>(0,Le.default)(ht,fr=>fr.period===Ar?{...fr,tbs:h.timeBucket.length>2?[h.timeBucket[0],h.timeBucket[1]]:h.timeBucket}:fr)),lo(nn)),(0,E.default)(sn)||cr(sn),(0,E.default)(f)||((0,E.default)(f==null?void 0:f.chart)||Ui(f.chart),(0,E.default)(f==null?void 0:f.overall)||$i(f.overall)),(0,E.default)(Je))Ca(!0);else{let ht=!(0,Pe.default)(ss,ie==null?void 0:ie.period),pr=ns(_e,nn,ue,ht,Qt,_r,Gr,kt,z,f==null?void 0:f.chart);Su(_e),ku({types:(0,Yt.default)(Je),data:Je,customs:Pt,properties:an,meta:Ha}),y===w.traffic&&co(()=>{let fr=St.generate(pr);return fr.data.names(Wo),fr}),Ca(!1)}Cr(!1),tt(!1)}catch(h){Cr(!1),tt(!1),Ca(!0),console.error("[ERROR](loadAnalytics) Loading analytics data failed"),console.error(h)}}},lp=async o=>F==="custom"&&_?Rn(v,o,K,"",ae(_[0]),ae(_[1]),P,j):Rn(v,o,K,F,"","",P,j),cp=async o=>F==="custom"&&_?jn(v,o,K,"",ae(_[0]),ae(_[1]),Z,P,j):jn(v,o,K,F,"","",Z,P,j),Oa=(0,u.useCallback)(async o=>{var i;_a(!0);try{let c,m,r;_&&(m=ae(_[0]),r=ae(_[1])),F==="custom"&&_?c=await Fn(v,o,"",m,r,P,j):c=await Fn(v,o,F,"","",P,j),Ds(c)}catch(c){if((c==null?void 0:c.status)===400){_a(!1),Ds(null);return}let m=(0,E.default)((i=c.data)==null?void 0:i.message)?c.data:c.data.message;console.error("[ERROR] (loadError)(getError)",m),pe.error(m)}_a(!1)},[_,v,F,j,P]),el=async o=>{if(!js){Ci(!0);try{let i=await yc(v,o,P,j);Pi(i)}catch(i){console.error("[ERROR] (loadSession)(getSession)",i),pe.error(i)}Ci(!1)}};(0,u.useEffect)(()=>{let o=new URL(window.location.toString()),{searchParams:i}=o,c=i.get("tab");w[c]&&Vo(c)},[]),(0,u.useEffect)(()=>{if(Ce)return;let o=new URL(window.location.toString()),{searchParams:i}=o,c=i.get("psid"),m=i.get("tab");c&&m===w.sessions&&ja(c)},[Ce]),(0,u.useEffect)(()=>{if(Ce)return;let o=new URL(window.location),{searchParams:i}=o,c=i.get("eid"),m=i.get("tab");c&&m===w.errors&&Fs(c)},[Ce]),(0,u.useEffect)(()=>{Rr&&el(Rr)},[F,_,K,Rr]),(0,u.useEffect)(()=>{lt&&Oa(lt)},[F,_,K,lt]);let Qs=async o=>{var i;if(!Tr){Rs(!0);try{let c=typeof o=="number"?o:Du,m,r,h;_&&(r=ae(_[0]),h=ae(_[1])),F==="custom"&&_?m=await Mn(v,"",mr,r,h,va,c,P,j):m=await Mn(v,F,mr,"","",va,c,P,j),Ni(f=>[...f,...(m==null?void 0:m.sessions)||[]]),ki(f=>typeof o=="number"?va+o:va+f),((i=m==null?void 0:m.sessions)==null?void 0:i.length)<va?Ta(!1):Ta(!0)}catch(c){console.error("[ERROR](loadSessions) Loading sessions data failed"),console.error(c)}finally{Rs(!1)}}},Zs=async(o,i)=>{var c;if(!Xr){Ms(!0);try{let m=typeof o=="number"?o:Au,r,h,f;_&&(h=ae(_[0]),f=ae(_[1])),F==="custom"&&_?r=await Dn(v,"",Jt,Bo,h,f,ya,m,P,j):r=await Dn(v,F,Jt,Bo,"","",ya,m,P,j),_s(i?(r==null?void 0:r.errors)||[]:k=>[...k,...(r==null?void 0:r.errors)||[]]),Si(k=>typeof o=="number"?ya+o:ya+k),((c=r==null?void 0:r.errors)==null?void 0:c.length)<ya?Ei(!1):Ei(!0)}catch(m){console.error("[ERROR](loadErrors) Loading errors data failed"),console.error(m)}finally{Ms(!1)}}},Ut=async(o=!1,i=null)=>{var c,m;if(!(!o&&(Ve||(0,E.default)(W)||wt))){tt(!0);try{let r,h,f,k,R,V="",C,A,q,z=ft===Ge.quantiles?Ge.quantiles:Hr;if(dt){if(Nt&&Mr===vr.CUSTOM){let _e,Je,Pt,an=qt.default.utc(Nt[0]),Ha=qt.default.utc(Nt[1]).diff(an,"day");(ie==null?void 0:ie.period)==="custom"&&_&&(_e=qt.default.utc(_[0]),Je=qt.default.utc(_[1]),Pt=Je.diff(_e,"day")),((ie==null?void 0:ie.period)==="custom"?Ha<=Pt:Ha<=(ie==null?void 0:ie.countDays))?(C=ae(Nt[0]),A=ae(Nt[1]),V=gn(C,A,K,i||rt,z)):(pe.error(p("project.compareDateRangeError")),Go())}else{let _e;_?_e=(c=(0,Re.default)(ua,Je=>Je.period===F))==null?void 0:c.formula(_):_e=(m=(0,Re.default)(ua,Je=>Je.period===F))==null?void 0:m.formula(),_e&&(C=_e.from,A=_e.to,V=gn(C,A,K,i||rt,z))}if(!(0,E.default)(C)&&!(0,E.default)(A))if(!(0,E.default)(s[v])&&!(0,E.default)(s[v][V]))R=s[v][V];else{R=await vc(v,K,"",i||rt,C,A,P,z,j);let _e=await Ln([v],"custom",C,A,P,i||Z,z,j);R.overall=_e[v]}de(v,R||{},V)}_?(f=ae(_[0]),k=ae(_[1]),h=Zo(f,k,K,Gt,i||rt,z)):h=fn(F,K,Gt,i||rt,z),!o&&!(0,E.default)(n[v])&&!(0,E.default)(n[v][h])?(r=n[v][h],hi(r.overall)):(F==="custom"&&_?(r=await _n(v,K,"",i||rt,f,k,P,z,j),q=await aa([v],F,f,k,P,i||Z,j)):(r=await _n(v,K,F,i||rt,"","",P,z,j),q=await Ln([v],F,"","",P,i||Z,z,j)),r.overall=q[v],de(v,r||{},h),hi(q[v]));let{appliedFilters:at}=r;if((0,E.default)(at)||dr(at),(0,Yt.default)(r).length<2){Fa(!0),tt(!1),Cr(!1);return}let mt=K;if(F===Ar&&!(0,E.default)(r.timeBucket)&&(mt=(0,Pe.default)(r.timeBucket,K)?K:r.timeBucket[0],Xt(_e=>(0,Le.default)(_e,Pt=>Pt.period===Ar?{...Pt,tbs:r.timeBucket.length>2?[r.timeBucket[0],r.timeBucket[1]]:r.timeBucket}:Pt)),lo(mt)),(0,E.default)(R)||((0,E.default)(R==null?void 0:R.chart)||Vi(R.chart),(0,E.default)(R==null?void 0:R.overall)||Bi(R.overall)),(0,E.default)(r.params))Fa(!0);else{let{chart:_e}=r,Je=En(_e,K,ft,Gr,kt,Qt,R==null?void 0:R.chart);qu(_e),Yu({types:(0,Yt.default)(r.params),data:r.params}),y===w.performance&&co(()=>{let Pt=St.generate(Je);return Pt.data.names(Wi),Pt}),Fa(!1)}Cr(!1),tt(!1)}catch(r){Cr(!1),tt(!1),Fa(!0),console.error("[ERROR](loadAnalytics) Loading analytics data failed"),console.error(r)}}},en=(0,u.useCallback)(async(o=!1)=>{if(!ot||!ot.id||!o&&(Ve||(0,E.default)(W)||wt))return;tt(!0);let i;try{let c,m,r;_?(m=ae(_[0]),r=ae(_[1]),i=Rl(v,ot.id,m,r)):i=Tl(v,ot.id,F),!o&&!(0,E.default)(Y[v])&&!(0,E.default)(Y[v][i])?c=Y[v][i]:(F==="custom"&&_?c=await An(v,"",m,r,P,ot.id,j):c=await An(v,F,"","",P,ot.id,j),he(v,c||{},i));let{funnel:h,totalPageviews:f}=c,k=nc(h,f,p);y===w.funnels&&co(()=>{let R=St.generate(k);return R.data.names(Ji),R}),Cr(!1),tt(!1)}catch(c){Cr(!1),tt(!1),i&&he(v,{},i),console.error("[ERROR](loadFunnelsData) Loading funnels data failed"),console.error(c)}},[ot,y,Y,wt,_,v,Ve,F,W,j,P,he,p,Ji]),ke=async(o,i,c=!1)=>{let m,r,h,f,k=`${o}_perf`,R=`${o}_sess`,V=`${o}_err`;if(y===w.performance)if((0,Re.default)(rt,C=>C.filter===i)){r=(0,Oe.default)(rt,z=>z.filter!==i);let C=new URL(window.location);C.searchParams.delete(k);let{pathname:A,search:q}=C;xe(`${A}${q}`),dr(r)}else{r=[...rt,{column:o,filter:i,isExclusive:c}];let C=new URL(window.location.href);C.searchParams.append(k,i);let{pathname:A,search:q}=C;xe(`${A}${q}`),dr(r)}if(y===w.sessions)if((0,Re.default)(mr,C=>C.filter===i)){h=(0,Oe.default)(mr,z=>z.filter!==i);let C=new URL(window.location);C.searchParams.delete(R);let{pathname:A,search:q}=C;xe(`${A}${q}`),Er(h)}else{h=[...mr,{column:o,filter:i,isExclusive:c}];let C=new URL(window.location.href);C.searchParams.append(R,i);let{pathname:A,search:q}=C;xe(`${A}${q}`),Er(h)}if(y===w.errors)if((0,Re.default)(Jt,C=>C.filter===i)){f=(0,Oe.default)(Jt,z=>z.filter!==i);let C=new URL(window.location.href);C.searchParams.delete(V);let{pathname:A,search:q}=C;xe(`${A}${q}`),Ir(f)}else{f=[...Jt,{column:o,filter:i,isExclusive:c}];let C=new URL(window.location.href);C.searchParams.append(V,i);let{pathname:A,search:q}=C;xe(`${A}${q}`),Ir(f)}if(y===w.traffic)if((0,Re.default)(Z,C=>C.filter===i)){m=(0,Oe.default)(Z,z=>z.filter!==i),cr(m);let C=new URL(window.location.href);C.searchParams.delete(o);let{pathname:A,search:q}=C;xe(`${A}${q}`)}else{m=[...Z,{column:o,filter:i,isExclusive:c}],cr(m);let C=new URL(window.location.href);C.searchParams.append(o,i);let{pathname:A,search:q}=C;xe(`${A}${q}`)}go(),Dr(),ee==null||ee._emitEvent("filtersupdate",m),y===w.performance?await Ut(!0,r):y===w.traffic&&await gt(!0,m)},tl=(o,i)=>{let c=(0,Oe.default)(o,r=>!(0,E.default)(r.filter)),m=new URL(window.location);if(console.log("items:",o),console.log("newFilters:",c),y===w.performance){i&&(0,It.default)(Zt,f=>{m.searchParams.has(`${f}_perf`)&&m.searchParams.delete(`${f}_perf`)}),(0,It.default)(o,f=>{m.searchParams.has(`${f.column}_perf`)&&m.searchParams.delete(`${f.column}_perf`),(0,It.default)(f.filter,k=>{m.searchParams.append(`${f.column}_perf`,k)})});let{pathname:r,search:h}=m;if(xe(`${r}${h}`),!i){Ut(!0,[...rt,...c]),dr([...rt,...c]);return}dr(c),Ut(!0,c)}else if(y===w.sessions){i&&(0,It.default)(Zt,f=>{m.searchParams.has(`${f}_sess`)&&m.searchParams.delete(`${f}_sess`)}),(0,It.default)(o,f=>{m.searchParams.has(`${f.column}_sess`)&&m.searchParams.delete(`${f.column}_sess`),(0,It.default)(f.filter,k=>{m.searchParams.append(`${f.column}_sess`,k)})});let{pathname:r,search:h}=m;if(xe(`${r}${h}`),go(),!i){Er(f=>[...f,...c]);return}Er(c)}else if(y===w.errors){i&&(0,It.default)(Qo,f=>{m.searchParams.has(`${f}_err`)&&m.searchParams.delete(`${f}_err`)}),(0,It.default)(o,f=>{m.searchParams.has(`${f.column}_err`)&&m.searchParams.delete(`${f.column}_err`),(0,It.default)(f.filter,k=>{m.searchParams.append(`${f.column}_err`,k)})});let{pathname:r,search:h}=m;if(xe(`${r}${h}`),Dr(),!i){Ir(f=>[...f,...c]);return}Ir(c)}else{i&&(0,It.default)(Zt,f=>{m.searchParams.has(f)&&m.searchParams.delete(f)}),(0,It.default)(o,f=>{m.searchParams.has(f.column)&&m.searchParams.delete(f.column),(0,It.default)(f.filter,k=>{m.searchParams.append(f.column,k)})});let{pathname:r,search:h}=m;if(xe(`${r}${h}`),!i){gt(!0,[...Z,...c]),cr([...Z,...c]);return}cr(c),gt(!0,c)}go(),Dr()},dp=o=>{y===w.traffic&&(Is(o),gt(!0,null,o))},mp=o=>{if(y!==w.traffic)return;let i=(0,Oe.default)(Ea,c=>c.id!==o);Is(i),gt(!0,null,i)},up=()=>{y===w.traffic&&(Is([]),gt(!0,null,[]))},Ua=(o,i,c)=>{let m;y===w.performance?(m=(0,Le.default)(rt,k=>k.column===o&&k.filter===i?{...k,isExclusive:c}:k),dr(m),Ut(!0,m)):y===w.sessions?(m=(0,Le.default)(mr,k=>k.column===o&&k.filter===i?{...k,isExclusive:c}:k),Er(m)):y===w.errors?(m=(0,Le.default)(Jt,k=>k.column===o&&k.filter===i?{...k,isExclusive:c}:k),Dr(),Ir(m)):(m=(0,Le.default)(Z,k=>k.column===o&&k.filter===i?{...k,isExclusive:c}:k),cr(m),gt(!0,m));let r=new URL(window.location);if(y===w.performance){let k=`${o}_perf`;r.searchParams.set(k,i)}else r.searchParams.set(o,i);let{pathname:h,search:f}=r;xe(`${h}${f}`),ee==null||ee._emitEvent("filtersupdate",m)},tn=async()=>{if(!Ve&&!wt){if(y===w.performance){Ut(!0);return}if(y===w.funnels){en(!0);return}if(y===w.sessions){if(Rr){await el(Rr);return}go(),Qs(0);return}if(y===w.errors){if(lt){await Oa(lt);return}Dr(),Zs(0);return}gt(!0)}},rn=()=>{if(!(Ve||wt||Lr)){if(!(0,E.default)(_r)){qo({});return}Cs(!0)}},pp=async o=>{let i=Il(F,K,o,Z),c=s[v][i];if(!(0,E.default)(c)){qo(c),tt(!1);return}try{let m=await Md(Sr,o,K),r=tc(m);se(v,r,i),qo(r)}catch(m){console.error(`[forecastChart] Error: ${m}`)}},fp=async()=>{try{let o=await Mc(W.id,j);if((0,E.default)(o))throw new Error("getDetailsPrediction returned an empty object");let i={},c=(0,Yt.default)(o);for(let m=0;m<c.length;++m){let r=c[m],h=(0,tu.default)(o[r],(f,k,R)=>({...f,[R]:(0,Le.default)((0,Yt.default)(k),V=>({name:V,count:(k==null?void 0:k[V])||0}))}),{});i[r]=h}Mi(i),Bs((0,Yt.default)(o)[0]),_i(!0)}catch(o){console.error(`[forecastDetails] Error: ${o}`),pe.error(p("apiNotifications.noAIForecastAvailable"))}},gp=async(o,i={})=>{if(!Lr){if(Cs(!1),tt(!0),o==="chart"){let{period:c}=i;await pp(c)}o==="details"&&await fp(),tt(!1),Vn("TRAFFIC_FORECAST",{type:o})}};(0,u.useEffect)(()=>{gt()},[_r,Gt]),(0,u.useEffect)(()=>{let o=new URL(window.location.href);o.searchParams.set("tab",y);let{pathname:i,search:c}=o;xe(`${i}${c}`)},[y]),(0,u.useEffect)(()=>{if(y===w.traffic){if(!Ve&&!(0,E.default)(Sr)&&!(0,E.default)(Kr)||dt&&!(0,E.default)(Js)&&!(0,E.default)(Kr)){if((ue.views||ue.unique||ue.viewsPerUnique||ue.trendlines)&&Kr.load({columns:oc(Sr,ue)}),ue.bounce||ue.sessionDuration||ue.views||ue.unique||!ue.bounce||!ue.sessionDuration){let o=!(0,Pe.default)(ss,ie==null?void 0:ie.period),i=ns(Sr,K,ue,o,Qt,_r,Gr,kt,Yo,Js);co(()=>{let c=St.generate(i);return c.data.names(Wo),c})}ue.views||Kr.unload({ids:"total"}),ue.unique||Kr.unload({ids:"unique"}),ue.viewsPerUnique||Kr.unload({ids:"viewsPerUnique"})}}else if(!Ve&&!(0,E.default)(Hs)&&!(0,E.default)(Kr)){let o=En(Hs,K,ft,Gr,kt,Qt,Qu);co(()=>{let i=St.generate(o);return i.data.names(Wi),i})}},[Ve,ue,Sr,Hs,ft,Js]),(0,u.useEffect)(()=>{let o=null,i=(0,Oe.default)(S,c=>(0,du.default)(c.fileURL));if(!(0,E.default)(i)){let c=(0,Le.default)(i,m=>{let{id:r,fileURL:h}=m;return{id:r,cdnURL:`${Sl}file/${h}`}});o=new Bg(c,{debug:El},{onAddExportDataRow:(m,r)=>{ka(h=>(0,au.default)([{label:m,onClick:r},...h],"label"))},onRemoveExportDataRow:m=>{ka(r=>(0,Oe.default)(r,h=>h.label!==m))},onAddPanelTab:(m,r,h,f)=>{so(k=>[...k,{extensionID:m,panelID:r,tabContent:h,onOpen:f}])},onUpdatePanelTab:(m,r,h)=>{so(f=>(0,Le.default)(f,k=>k.extensionID===m&&k.panelID===r?{...k,tabContent:h}:k))},onRemovePanelTab:(m,r)=>{so(h=>(0,Oe.default)(h,f=>f.extensionID!==m&&f.panelID!==r))}}),be(o)}return()=>{o&&o._destroy()}},[S]),(0,u.useEffect)(()=>{ee==null||ee._emitEvent("timeupdate",{period:F,timeBucket:K,dateRange:F==="custom"?_:null})},[ee]),(0,u.useEffect)(()=>{ee==null||ee._emitEvent("clientinfo",{language:oe,theme:me})},[ee,oe,me]),(0,u.useEffect)(()=>{if((0,E.default)(W))return;let{active:o,created:i,public:c}=W;ee==null||ee._emitEvent("projectinfo",{id:v,name:ur,isActive:o,created:i,isPublic:c})},[ee,ur]),(0,u.useEffect)(()=>{Xt(br(p,void 0,void 0,oe)),qs(zo(p,void 0,oe))},[p,oe]),(0,u.useEffect)(()=>{if(y===w.performance)try{let o=new URL(window.location),{searchParams:i}=o,c=[];i.forEach((m,r)=>{if(!(0,Pe.default)(r,"_perf"))return;let h=(0,Pr.default)(r,"_perf","");if(!So(h))return;let f=(0,xa.default)(m,"!");c.push({column:h,filter:f?m.substring(1):m,isExclusive:f})}),dr(c)}finally{yu(!0)}else try{let o=new URL(window.location),{searchParams:i}=o,c=[];i.forEach((m,r)=>{if(!So(r,!0))return;let h=(0,xa.default)(m,"!");c.push({column:r,filter:h?m.substring(1):m,isExclusive:h})}),cr(c)}finally{vu(!0)}},[y]),(0,u.useEffect)(()=>{try{let o=new URL(window.location),{searchParams:i}=o,c=[];i.forEach((m,r)=>{if(!(0,Pe.default)(r,"_sess"))return;let h=(0,Pr.default)(r,"_sess","");if(!So(h))return;let f=(0,xa.default)(m,"!");c.push({column:h,filter:f?m.substring(1):m,isExclusive:f})}),Er(c)}catch(o){console.error(`[ERROR] useEffect - Parsing initial filters from url also using for sessions tab: ${o}`)}finally{ju(!0)}},[]),(0,u.useEffect)(()=>{try{let o=new URL(window.location),{searchParams:i}=o,c=[];i.forEach((m,r)=>{if(!(0,Pe.default)(r,"_err"))return;let h=(0,Pr.default)(r,"_err","");if(!So(h))return;let f=(0,xa.default)(m,"!");c.push({column:h,filter:f?m.substring(1):m,isExclusive:f})}),Ir(c)}catch(o){console.error(`[ERROR] useEffect - Parsing initial filters from url also using for errors tab: ${o}`)}finally{_u(!0)}},[]),(0,u.useEffect)(()=>{if(Wt)try{let o=new URL(window.location),{searchParams:i}=o,c=i.get("timeBucket");if(!(0,Pe.default)(lc,c))return;let m=(0,Re.default)(ve,r=>r.period===F);if(!(0,Pe.default)(m==null?void 0:m.tbs,c))return;lo(c||ve[3].tbs[1])}finally{wu(!0)}},[Wt]);let go=()=>{ki(0),Ni([]),Rs(null)},Dr=()=>{Si(0),_s([]),Ms(null)},rl=(o,i)=>{let c=Math.ceil(Math.abs(o[1].getTime()-o[0].getTime())/864e5),m=new URL(window.location);for(let r in zr)if(zr[r].lt>=c){let h=K;if(!i&&!(0,Pe.default)(zr[r].tb,K)){h=zr[r].tb[0],m.searchParams.set("timeBucket",h);let{pathname:R,search:V}=m;xe(`${R}${V}`),lo(h)}m.searchParams.set("period","custom"),m.searchParams.set("from",o[0].toISOString()),m.searchParams.set("to",o[1].toISOString());let{pathname:f,search:k}=m;xe(`${f}${k}`),Xt(br(p,zr[r].tb,o,oe)),bi("custom"),g(v,"custom",zr[r].tb[0],o),Ta(!1),go(),Dr(),ee==null||ee._emitEvent("timeupdate",{period:"custom",timeBucket:h,dateRange:o});break}};(0,u.useEffect)(()=>{F!==Ar&&(Na&&no&&Wt&&y===w.traffic&&gt(),Pa&&no&&Wt&&y===w.performance&&Ut())},[W,F,kt,Z,_r,K,ve,Na,no,Wt,p,y,Pa]),(0,u.useEffect)(()=>{Ce||y===w.sessions&&vi&&Qs()},[y,_,mr,v,F,j,P,vi,Ce]),(0,u.useEffect)(()=>{Ce||y===w.errors&&yi&&Zs()},[y,Bo,_,Jt,v,F,j,P,yi,Ce]),(0,u.useEffect)(()=>{F===Ar&&(Na&&no&&Wt&&y===w.traffic&&gt(),Pa&&no&&Wt&&y===w.performance&&Ut())},[W,F,kt,Z,_r,Na,no,Wt,y,Pa]),(0,u.useEffect)(()=>{!W||!ot||en()},[W,ot,en,F,p]),(0,u.useEffect)(()=>{(0,E.default)(ye)||ir([])},[F,Z]),(0,u.useEffect)(()=>{_&&Wt&&rl(_)},[_,p,Wt]),(0,u.useEffect)(()=>{let o=async()=>{let{id:c}=W,m=await On([c],j);N(c,m[c])},i=null;return W.uiHidden&&(o(),i=setInterval(async()=>{await o()},Pl)),()=>clearInterval(i)},[W.id,N]),(0,u.useEffect)(()=>{Ve||!(0,E.default)(W)||hc(v,!1,j).then(o=>{if((0,E.default)(o)&&zs(),o.isPasswordProtected&&!o.isOwner&&(0,E.default)(j)){xe({pathname:(0,Pr.default)(Ne.project_protected_password,":id",v),search:`?theme=${Te}&embedded=${G}`});return}if((o.isPublic||o!=null&&o.isPasswordProtected)&&!o.isOwner)x(o);else{if(B([...e,o]),o.isLocked)return;On([v],j).then(i=>{N(v,i[v])}).catch(i=>{console.error("[ERROR] (getProject -> getLiveVisitors)",i),zs()})}}).catch(o=>{console.error("[ERROR] (getProject)",o),zs()})},[Ve,W,v,x]);let $a=o=>{if(F===o.period)return;let i=(0,Re.default)(ve,f=>f.period===o.period),c=K,m=new URL(window.location);if((0,E.default)(i))return;(0,Pe.default)(i.tbs,K)||(c=(0,ou.default)(i.tbs)||"day",m.searchParams.set("timeBucket",c),lo(c)),o.period!=="custom"&&(m.searchParams.delete("from"),m.searchParams.delete("to"),m.searchParams.set("period",o.period),g(v,o.period,c),bi(o.period),Ta(!1),go(),Dr(),qr(null));let{pathname:r,search:h}=m;xe(`${r}${h}`),ee==null||ee._emitEvent("timeupdate",{period:o.period,timeBucket:c,dateRange:o.period==="custom"?_:null}),qo({})},ol=o=>{let i=new URL(window.location);i.searchParams.set("timeBucket",o);let{pathname:c,search:m}=i;xe(`${c}${m}`),lo(o),g(v,F,o,_),ee==null||ee._emitEvent("timeupdate",{period:F,timeBucket:o,dateRange:_}),qo({})},hp=o=>{Ru(o)};(0,u.useEffect)(()=>{Ut()},[Hr,ft]);let al=()=>{xe((0,Pr.default)(Ne.project_settings,":id",v))};(0,u.useEffect)(()=>{var o;try{let i=new URL(window.location),{searchParams:c}=i,m=b?c.get("period")||((o=b[v])==null?void 0:o.period):c.get("period")||"7d";if(c.get("tab")===w.performance&&H(w.performance),!(0,Pe.default)(cc,m))return;if(m==="custom"){let h=new Date(c.get("from")),f=new Date(c.get("to"));h.getDate()&&f.getDate()&&(rl([h,f],!0),qr([h,f]));return}Xt(br(p,void 0,void 0,oe)),qr(null),$a({period:m})}finally{xu(!0)}},[]);let sl=o=>o?(0,ui.default)(o,i=>{let c=(0,Re.default)(Gs,m=>m.id===i);return c&&c.active}):!1,nl=()=>{let o=new URL(window.location),{searchParams:i}=o;for(let[r]of Array.from(i.entries()))So(r,!0)&&i.delete(r);let{pathname:c,search:m}=o;xe(`${c}${m}`)},Ba=()=>{nl(),y===w.traffic?(cr([]),gt(!0,[])):y===w.performance?(dr([]),Ut(!0,[])):y===w.sessions?Er([]):y===w.errors&&Ir([])},Va=()=>{nl(),cr([]),dr([]),Er([]),Ir([]),y===w.performance?Ut(!0,[]):y===w.traffic&&gt(!0,[])},bp=[{label:p("project.asCSV"),onClick:()=>y===w.performance?Sn(Jr,v,je,oe):Sn(We,v,je,oe)}],ho=o=>{wn("chartType",o),Wu(o)};(0,u.useEffect)(()=>{wn(bn,JSON.stringify(dt)),!(Mr===vr.CUSTOM&&!Nt)&&dt&&(y===w.performance&&Ut(),y===w.traffic&&gt())},[dt,Mr,Nt]);let on={B:()=>ho(jt.bar),"\u222B":()=>ho(jt.bar),L:()=>ho(jt.line),"\xAC":()=>ho(jt.line),S:()=>La(!0),\u00DF:()=>La(!0),F:rn,\u0192:rn,r:tn},vp={h:"1h",t:"today",y:"yesterday",d:"1d",w:"7d",m:"4w",q:"3M",l:"12M",z:"24M",a:Ar,u:"custom",c:"compare"};ma("shift+?",()=>{wi(o=>!o)}),ma(uc,({key:o})=>{if(o==="E"){al();return}let i=mc[o];i&&(H(i),Vo(i))}),ma(pc,({key:o})=>{var i;(i=on[o])==null||i.call(on)}),ma(fc,({key:o})=>{var m,r;let i=br(p,void 0,void 0,oe),c=(0,Re.default)(i,({period:h})=>h===vp[o]);if(c){if(c.isCustomDate){(r=(m=Ia.current)==null?void 0:m.openCalendar)==null||r.call(m);return}if(c.period==="compare"){if(y===w.alerts)return;dt?Go():Ys(!0);return}qr(null),$a(c)}});let Ka=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"sm:hidden",children:(0,a.jsx)(ao,{items:Jo,keyExtractor:o=>o.id,labelExtractor:o=>o.label,onSelect:o=>{let i=(0,Re.default)(Jo,c=>c.label===o);if(i){if(i.id==="settings"){al();return}H(i==null?void 0:i.id),Vo(i==null?void 0:i.id)}},title:ap,capitalise:!0})}),(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-4 overflow-x-auto","aria-label":"Tabs",children:(0,Le.default)(Jo,o=>{let i=o.id===y,c=o.id==="settings",m=f=>{c||(f.preventDefault(),H(o.id),Vo(o.id))},r=new URL(window.location.href);r.searchParams.set("tab",o.id);let h=c?(0,Pr.default)(Ne.project_settings,":id",v):r.toString();return(0,a.jsxs)(Me,{to:h,onClick:m,className:U("text-md group inline-flex cursor-pointer items-center whitespace-nowrap border-b-2 px-1 py-2 font-bold",{"border-slate-900 text-slate-900 dark:border-gray-50 dark:text-gray-50":i,"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:border-gray-300 dark:hover:text-gray-300":!i}),"aria-current":i?"page":void 0,children:[(0,a.jsx)(o.icon,{className:U(i?"text-slate-900 dark:text-gray-50":"text-gray-500 group-hover:text-gray-500 dark:text-gray-400 dark:group-hover:text-gray-300","-ml-0.5 mr-2 h-5 w-5"),"aria-hidden":"true"}),(0,a.jsx)("span",{children:o.label})]},o.id)})})})]}),yp=()=>(0,a.jsx)("div",{className:"-mb-px flex space-x-4 overflow-x-auto","aria-label":"Tabs",children:(0,Le.default)(Uu,({key:o,label:i})=>{let c=Di===o;return(0,a.jsx)("div",{onClick:()=>{Bs(o)},className:U("text-md group inline-flex cursor-pointer items-center whitespace-nowrap border-b-2 px-1 py-2 font-bold",{"border-slate-900 text-slate-900 dark:border-gray-50 dark:text-gray-50":c,"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:border-gray-300 dark:hover:text-gray-300":!c}),"aria-current":c,children:(0,a.jsx)("span",{children:i})},o)})});return Ve?(0,a.jsxs)(a.Fragment,{children:[!G&&(0,a.jsx)(Io,{ssrTheme:Te,authenticated:ne}),(0,a.jsx)("div",{className:U("min-h-min-footer bg-gray-50 dark:bg-slate-900",{"min-h-min-footer":!G,"min-h-[100vh]":G}),children:(0,a.jsx)($t,{})}),!G&&(0,a.jsx)(To,{authenticated:ne,minimal:!0})]}):W.isLocked?(0,a.jsxs)(a.Fragment,{children:[!G&&(0,a.jsx)(Io,{ssrTheme:Te,authenticated:ne}),(0,a.jsxs)("div",{className:U("mx-auto w-full max-w-[1584px] bg-gray-50 px-2 py-6 dark:bg-slate-900 sm:px-4 lg:px-8",{"min-h-min-footer":!G,"min-h-[100vh]":G}),children:[(0,a.jsx)(Ka,{}),(0,a.jsx)("h2",{className:"mt-2 break-words break-all text-center text-xl font-bold text-gray-900 dark:text-gray-50 sm:text-left",children:ur}),(0,a.jsx)(Rm,{user:O,project:W,isSharedProject:Ps})]}),!G&&(0,a.jsx)(To,{authenticated:ne,minimal:!0})]}):!W.isDataExists&&!(0,Pe.default)([w.errors,w.uptime],y)&&!lr?(0,a.jsxs)(a.Fragment,{children:[!G&&(0,a.jsx)(Io,{ssrTheme:Te,authenticated:ne}),(0,a.jsxs)("div",{className:U("mx-auto w-full max-w-[1584px] bg-gray-50 px-2 py-6 dark:bg-slate-900 sm:px-4 lg:px-8",{"min-h-min-footer":!G,"min-h-[100vh]":G}),children:[(0,a.jsx)(Ka,{}),(0,a.jsx)("h2",{className:"mt-2 break-words break-all text-center text-xl font-bold text-gray-900 dark:text-gray-50 sm:text-left",children:ur}),(0,a.jsx)(Mm,{project:W})]}),!G&&(0,a.jsx)(To,{authenticated:ne,minimal:!0})]}):typeof W.isErrorDataExists=="boolean"&&!W.isErrorDataExists&&y===w.errors?(0,a.jsxs)(a.Fragment,{children:[!G&&(0,a.jsx)(Io,{ssrTheme:Te,authenticated:ne}),(0,a.jsxs)("div",{className:U("mx-auto w-full max-w-[1584px] bg-gray-50 px-2 py-6 dark:bg-slate-900 sm:px-4 lg:px-8",{"min-h-min-footer":!G,"min-h-[100vh]":G}),children:[(0,a.jsx)(Ka,{}),(0,a.jsx)("h2",{className:"mt-2 break-words break-all text-center text-xl font-bold text-gray-900 dark:text-gray-50 sm:text-left",children:ur}),(0,a.jsx)(Um,{})]}),!G&&(0,a.jsx)(To,{authenticated:ne,minimal:!0})]}):(0,a.jsx)(_o,{children:()=>{var o,i,c,m;return(0,a.jsx)(mu.Provider,{value:{projectId:W==null?void 0:W.id,projectPassword:j,timezone:P,dateRange:_,isLoading:Ve,timeBucket:K,period:F,activePeriod:ie,periodPairs:ve,timeFormat:Qt,size:Aa,allowedToManage:Ot,setDateRange:qr,updatePeriod:$a,updateTimebucket:ol,setPeriodPairs:Xt,refCalendar:Ia},children:(0,a.jsxs)(a.Fragment,{children:[!G&&(0,a.jsx)(Io,{ssrTheme:Te,authenticated:ne}),(0,a.jsx)(Hc,{}),(0,a.jsx)("div",{ref:Xu,className:U("bg-gray-50 dark:bg-slate-900",{"min-h-[100vh]":lr&&G}),children:(0,a.jsxs)("div",{className:U("mx-auto w-full max-w-[1584px] px-2 py-6 sm:px-4 lg:px-8",{"min-h-min-footer":!G,"min-h-[100vh]":G}),ref:pt,children:[Wr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{_i(!1),Mi(null),Bs(null)},className:"mx-auto mb-4 mt-2 flex items-center text-base font-normal text-gray-900 underline decoration-dashed hover:decoration-solid dark:text-gray-100 lg:mx-0 lg:mt-0",children:[(0,a.jsx)(Qr,{className:"h-4 w-4"}),p("project.exitForecastingMode")]}),(0,a.jsx)(yp,{}),(0,a.jsx)("span",{className:"mt-6 text-sm",children:p("project.aiDetailsDesc")})]}):(0,a.jsx)(Ka,{}),!Wr&&y!==w.alerts&&y!==w.uptime&&(y!==w.sessions||!Rr)&&(ot||y!==w.funnels)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-2 flex flex-col items-center justify-between lg:flex-row lg:items-start",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-5",children:[(0,a.jsx)("h2",{className:"break-words break-all text-xl font-bold text-gray-900 dark:text-gray-50",children:y===w.funnels?ot==null?void 0:ot.name:ur}),y!==w.funnels&&(0,a.jsx)(qd,{onSessionSelect:r=>{Vo(w.sessions),ja(r)},live:Q[v]})]}),(0,a.jsxs)("div",{className:"mx-auto mt-3 flex w-full max-w-[420px] flex-wrap items-center justify-center gap-y-1 space-x-2 sm:mx-0 sm:w-auto sm:max-w-none sm:flex-nowrap sm:justify-between lg:mt-0",children:[y!==w.funnels&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"button",title:p("project.refreshStats"),onClick:tn,className:U("relative rounded-md bg-gray-50 p-2 text-sm font-medium hover:bg-white hover:shadow-sm focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:bg-slate-900 dark:hover:bg-slate-800 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"cursor-not-allowed opacity-50":Ve||wt}),children:(0,a.jsx)(ea,{className:"h-5 w-5 stroke-2 text-gray-700 dark:text-gray-50"})})}),!Lr&&!dt&&(0,a.jsx)("div",{className:U({hidden:y!==w.traffic||(0,E.default)(Sr)}),children:(0,a.jsx)("button",{type:"button",title:p("modals.forecast.title"),onClick:rn,disabled:!(0,E.default)(Z),className:U("relative rounded-md bg-gray-50 p-2 text-sm font-medium hover:bg-white hover:shadow-sm focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:bg-slate-900 dark:hover:bg-slate-800 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"cursor-not-allowed opacity-50":Ve||wt||!(0,E.default)(Z),"!border !border-gray-300 !bg-gray-200 dark:!border-gray-500 dark:!bg-gray-600":!(0,E.default)(_r)}),children:(0,a.jsx)(bd,{theme:Tt,containerClassName:"w-5 h-5",className:"stroke-2 text-gray-700 dark:text-gray-50"})})}),(0,a.jsx)("div",{className:U("border-gray-200 dark:border-gray-600",{"lg:border-r":y===w.funnels,hidden:y===w.errors&&J}),children:(0,a.jsx)("button",{type:"button",title:p("project.search"),onClick:()=>La(!0),className:U("relative rounded-md bg-gray-50 p-2 text-sm font-medium hover:bg-white hover:shadow-sm focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:bg-slate-900 dark:hover:bg-slate-800 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"cursor-not-allowed opacity-50":Ve||wt}),children:(0,a.jsx)(Yl,{className:"h-5 w-5 stroke-2 text-gray-700 dark:text-gray-50"})})}),y===w.traffic&&(0,a.jsx)(wr,{header:p("project.views"),onClick:()=>Fi(),loading:Ho||Ho===null,selectItemClassName:!Ot&&!(Ho||Ho===null)&&(0,E.default)(Ls)?"block px-4 py-2 text-sm text-gray-700 dark:border-gray-800 dark:bg-slate-800 dark:text-gray-50":void 0,items:(0,Oe.default)([...Ls,Ot&&{id:"add-a-view",name:p("project.addAView"),createView:!0},!Ot&&(0,E.default)(Ls)&&{id:"no-views",name:p("project.noViewsYet"),notClickable:!0}],r=>!!r),title:[(0,a.jsx)($l,{className:"h-5 w-5 stroke-2"},"bookmark-icon")],labelExtractor:(r,h)=>r.createView?r.name:r.id==="no-views"?(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-200",children:r.name}):(0,a.jsxs)("span",{className:"flex items-center justify-between space-x-4",children:[(0,a.jsx)("span",{children:r.name}),Ot&&(0,a.jsxs)("span",{className:"flex space-x-2",children:[(0,a.jsx)(Jl,{className:"size-4 hover:text-gray-900 dark:hover:text-gray-50",onClick:f=>{f.stopPropagation(),$s(r),h(),Ss(!0)}}),(0,a.jsx)(rr,{className:U("size-4 hover:text-gray-900 dark:hover:text-gray-50",{"cursor-not-allowed":ji}),onClick:f=>{f.stopPropagation(),h(),$u(r.id)}})]})]}),keyExtractor:r=>r.id,onSelect:(r,h)=>{if(r.createView){h==null||h.stopPropagation(),Ss(!0);return}r.filters&&!(0,E.default)(r.filters)&&tl(r.filters,!0),r.customEvents&&!(0,E.default)(r.customEvents)&&dp(r.customEvents)},chevron:"mini",buttonClassName:"!p-2 rounded-md hover:bg-white hover:shadow-sm dark:hover:bg-slate-800 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 focus:dark:ring-gray-200 focus:dark:border-gray-200",headless:!0}),(0,Pe.default)([w.traffic,w.performance],y)&&(0,a.jsx)(wr,{header:p("project.exportData"),items:(0,Oe.default)([...bp,...wa,!Lr&&{label:p("project.lookingForMore"),lookingForMore:!0,onClick:()=>{}}],r=>!!r),title:[(0,a.jsx)(Ga,{className:"h-5 w-5 stroke-2"},"download-icon")],labelExtractor:r=>r.label,keyExtractor:r=>r.label,onSelect:(r,h)=>{if(r.lookingForMore){h==null||h.stopPropagation(),window.open(kl,"_blank");return}Vn("DASHBOARD_EXPORT",{type:r.label===p("project.asCSV")?"csv":"extension"}),r.onClick(We,p)},chevron:"mini",buttonClassName:"!p-2 rounded-md hover:bg-white hover:shadow-sm dark:hover:bg-slate-800 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 focus:dark:ring-gray-200 focus:dark:border-gray-200",headless:!0}),(0,a.jsxs)("div",{className:U("space-x-2 border-gray-200 dark:border-gray-600 sm:mr-3 lg:border-x lg:px-3",{hidden:io||lr||Es||y===w.sessions||y===w.errors}),children:[(0,a.jsx)("button",{type:"button",title:p("project.barChart"),onClick:()=>ho(jt.bar),className:U("relative rounded-md fill-gray-700 p-2 text-sm font-medium focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:fill-gray-50 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"bg-white stroke-white shadow-sm dark:bg-slate-800 dark:stroke-slate-800":kt===jt.bar,"bg-gray-50 stroke-gray-50 dark:bg-slate-900 dark:stroke-slate-900 [&_svg]:hover:fill-gray-500 [&_svg]:hover:dark:fill-gray-200":kt!==jt.bar}),children:(0,a.jsx)(Kc,{className:"h-5 w-5 [&_path]:stroke-[3.5%]"})}),(0,a.jsx)("button",{type:"button",title:p("project.lineChart"),onClick:()=>ho(jt.line),className:U("relative rounded-md fill-gray-700 p-2 text-sm font-medium focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:fill-gray-50 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"bg-white stroke-white shadow-sm dark:bg-slate-800 dark:stroke-slate-800":kt===jt.line,"bg-gray-50 stroke-gray-50 dark:bg-slate-900 dark:stroke-slate-900 [&_svg]:hover:fill-gray-500 [&_svg]:hover:dark:fill-gray-200":kt!==jt.line}),children:(0,a.jsx)(Vc,{className:"h-5 w-5 [&_path]:stroke-[3.5%]"})})]})]}),y===w.traffic&&!io&&(0,a.jsx)(wr,{items:dt?(0,Oe.default)(Gs,r=>!(0,Pe.default)(rc,r.id)):Gs,title:p("project.metricVis"),labelExtractor:r=>{let{label:h,id:f,active:k,conflicts:R}=r,V=sl(R);return f===ge.customEvents?(0,E.default)(We.customs)?(0,a.jsxs)("span",{className:"flex cursor-not-allowed items-center px-4 py-2",children:[(0,a.jsx)(Wl,{className:"mr-1 h-5 w-5"}),h]}):(0,a.jsx)(wr,{menuItemsClassName:"max-w-[300px] max-h-[300px] overflow-auto",items:op,title:h,labelExtractor:C=>(0,a.jsx)(jo,{className:U({hidden:io||lr}),label:(0,lu.default)(C.label)>eu?(0,a.jsx)("span",{title:C.label,children:(0,cu.default)(C.label,{length:eu})}):C.label,onChange:()=>{zi(C.id)},checked:C.active}),buttonClassName:"group-hover:bg-gray-200 dark:group-hover:bg-slate-700 px-4 py-2 inline-flex w-full bg-white text-sm font-medium text-gray-700 dark:text-gray-50 dark:border-gray-800 dark:bg-slate-800",keyExtractor:C=>C.id,onSelect:(C,A)=>{A==null||A.stopPropagation(),A==null||A.preventDefault(),zi(C.id)},chevron:"mini",headless:!0}):(0,a.jsx)(jo,{className:U("px-4 py-2",{hidden:io||lr}),label:h,disabled:V,checked:k,onChange:()=>{Gi(f,R)}})},buttonClassName:"!px-2.5",selectItemClassName:"group text-gray-700 dark:text-gray-50 dark:border-gray-800 dark:bg-slate-800 block text-sm cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-700",keyExtractor:r=>r.id,onSelect:({id:r,conflicts:h})=>{Gi(r,h)},chevron:"mini",headless:!0}),y===w.errors&&Ot&&J&&((o=J==null?void 0:J.details)==null?void 0:o.status)!=="resolved"&&(0,a.jsx)("button",{type:"button",disabled:jr,onClick:sp,className:U("p-2 text-sm font-medium text-gray-700 dark:text-gray-50",{"cursor-not-allowed":Ve||mo,"opacity-50":mo&&!jr,"animate-pulse cursor-not-allowed":jr}),children:p("project.resolve")}),y===w.errors&&Ot&&J&&((i=J==null?void 0:J.details)==null?void 0:i.status)==="resolved"&&(0,a.jsx)("button",{type:"button",disabled:jr,onClick:np,className:U("p-2 text-sm font-medium text-gray-700 dark:text-gray-50",{"cursor-not-allowed":Ve||mo,"opacity-50":mo&&!jr,"animate-pulse cursor-not-allowed":jr}),children:p("project.markAsActive")}),y===w.errors&&!J&&(0,a.jsx)(wr,{items:rp,title:p("project.filters"),labelExtractor:r=>{let{label:h,active:f,id:k}=r;return(0,a.jsx)(jo,{className:"px-4 py-2",label:h,checked:f,onChange:()=>Qi(k)})},buttonClassName:"!px-2.5",selectItemClassName:"group text-gray-700 dark:text-gray-50 dark:border-gray-800 dark:bg-slate-800 block text-sm cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-700",keyExtractor:r=>r.id,onSelect:({id:r})=>{Qi(r)},chevron:"mini",headless:!0}),y===w.funnels&&(0,a.jsx)("button",{type:"button",title:p("project.refreshStats"),onClick:tn,className:U("relative rounded-md bg-gray-50 p-2 text-sm font-medium hover:bg-white hover:shadow-sm focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:bg-slate-900 dark:hover:bg-slate-800 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"cursor-not-allowed opacity-50":Ve||wt}),children:(0,a.jsx)(ea,{className:"h-5 w-5 text-gray-700 dark:text-gray-50"})}),y===w.performance&&!Da&&(0,a.jsx)(wr,{items:qi,className:"min-w-[170px] xs:min-w-0",title:(0,a.jsx)("p",{children:(c=(0,Re.default)(qi,({id:r})=>r===ft))==null?void 0:c.label}),labelExtractor:r=>r.label,keyExtractor:r=>r.id,onSelect:({id:r})=>{Tu(r)},buttonClassName:"!px-2.5",chevron:"mini",headless:!0}),y===w.performance&&!Da&&(0,a.jsx)(wr,{disabled:ft===Ge.quantiles,items:Yi,className:"min-w-[170px] xs:min-w-0",title:(0,a.jsx)("p",{children:(m=(0,Re.default)(Yi,({id:r})=>r===Hr))==null?void 0:m.label}),labelExtractor:r=>r.label,keyExtractor:r=>r.id,onSelect:({id:r})=>{hp(r)},buttonClassName:"!px-2.5",chevron:"mini",headless:!0}),(0,a.jsx)(ds,{classes:{timeBucket:y===w.errors&&!lt?"hidden":""},activePeriod:ie,updateTimebucket:ol,timeBucket:K,items:ep,title:ie==null?void 0:ie.label,onSelect:r=>{if(r.period===vr.COMPARE){if(y===w.alerts)return;dt?Go():Ys(!0);return}r.isCustomDate?setTimeout(()=>{Ia.current.openCalendar()},100):(Xt(br(p,void 0,void 0,oe)),qr(null),$a(r))}}),dt&&y!==w.errors&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-md mx-2 whitespace-pre-line font-medium text-gray-600 dark:text-gray-200",children:"vs"}),(0,a.jsx)(wr,{items:Xo,title:Ju,labelExtractor:r=>r.label,keyExtractor:r=>r.label,onSelect:r=>{if(r.period===vr.DISABLE){Go();return}r.period===vr.CUSTOM?setTimeout(()=>{xi.current.openCalendar()},100):(qs(zo(p,void 0,oe)),Ws(null),Xs(r.period))},chevron:"mini",headless:!0})]}),(0,a.jsx)(Hn,{className:"!mx-0",ref:Ia,onChange:qr,value:_||[],maxDateMonths:un,maxRange:0}),(0,a.jsx)(Hn,{className:"!mx-0",ref:xi,onChange:r=>{Ws(r),Xs(vr.CUSTOM),qs(zo(p,r,oe))},value:Nt||[],maxDateMonths:un,maxRange:Zu})]})]}),y===w.funnels&&(0,a.jsxs)("button",{onClick:()=>Ii(null),className:"mx-auto mb-4 mt-2 flex items-center text-base font-normal text-gray-900 underline decoration-dashed hover:decoration-solid dark:text-gray-100 lg:mx-0 lg:mt-0",children:[(0,a.jsx)(Qr,{className:"h-4 w-4"}),p("project.backToFunnels")]})]}),y===w.alerts&&(Ps||!(W!=null&&W.isOwner)||!ne)&&(0,a.jsxs)("div",{className:"mt-5 rounded-xl bg-gray-700 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-50",children:[(0,a.jsx)(ta,{className:"mr-2 h-8 w-8"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:p("dashboard.alerts")})]}),(0,a.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-lg text-gray-100",children:p("dashboard.alertsDesc")}),(0,a.jsx)(Me,{to:Ne.signup,className:"mt-6 inline-block select-none rounded-md border border-transparent bg-white px-3 py-2 text-base font-medium text-gray-700 hover:bg-indigo-50","aria-label":p("titles.signup"),children:p("common.getStarted")})]}),y===w.funnels&&!ot&&!(0,E.default)(W.funnels)&&(0,a.jsx)(Fd,{openFunnelSettings:r=>{if(r){Ti(r),Sa(!0);return}Sa(!0)},openFunnel:Ii,funnels:W.funnels,deleteFunnel:Ku,loading:Ko,authenticated:ne,allowedToManage:Ot}),y===w.funnels&&!ot&&(0,E.default)(W.funnels)&&(0,a.jsxs)("div",{className:"mt-5 rounded-xl bg-gray-700 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-50",children:[(0,a.jsx)(kn,{className:"mr-2 h-8 w-8"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:p("dashboard.funnels")})]}),(0,a.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-lg text-gray-100",children:p("dashboard.funnelsDesc")}),ne?(0,a.jsx)("button",{type:"button",onClick:()=>Sa(!0),className:"mt-6 inline-block select-none rounded-md border border-transparent bg-white px-3 py-2 text-base font-medium text-gray-700 hover:bg-indigo-50",children:p("dashboard.newFunnel")}):(0,a.jsx)(Me,{to:Ne.signup,className:"mt-6 inline-block select-none rounded-md border border-transparent bg-white px-3 py-2 text-base font-medium text-gray-700 hover:bg-indigo-50","aria-label":p("titles.signup"),children:p("common.getStarted")})]}),y===w.sessions&&!Rr&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ca,{filters:mr,onRemoveFilter:ke,onChangeExclusive:Ua,tnMapping:je,resetFilters:Ba}),(Tr===null||Tr)&&(0,E.default)(Ra)&&(0,a.jsx)($t,{}),typeof Tr=="boolean"&&!Tr&&(0,E.default)(Ra)&&(0,a.jsx)(pa,{filters:Z,resetFilters:Va}),(0,a.jsx)(dm,{sessions:Ra,onClick:r=>{ja(r)},timeFormat:Qt}),Fu&&(0,a.jsxs)("button",{type:"button",title:p("project.refreshStats"),onClick:()=>Qs(),className:U("relative mx-auto mt-2 flex items-center rounded-md bg-gray-50 p-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:bg-slate-900 dark:text-gray-50 dark:hover:bg-slate-800 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"cursor-not-allowed opacity-50":Tr||Tr===null,hidden:Tr&&(0,E.default)(Ra)}),children:[(0,a.jsx)(Ga,{className:"mr-2 h-5 w-5"}),p("project.loadMore")]})]}),y===w.sessions&&Rr&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{Pi(null),ja(null);let r=new URL(window.location.href);r.searchParams.delete("psid"),window.history.pushState({},"",r.toString())},className:"mx-auto mb-4 mt-2 flex items-center text-base font-normal text-gray-900 underline decoration-dashed hover:decoration-solid dark:text-gray-100 lg:mx-0",children:[(0,a.jsx)(Qr,{className:"h-4 w-4"}),p("project.backToSessions")]}),(we==null?void 0:we.details)&&(0,a.jsx)(km,{details:we==null?void 0:we.details}),!(0,E.default)(we==null?void 0:we.chart)&&(0,a.jsx)(Pm,{chart:we==null?void 0:we.chart,timeBucket:we==null?void 0:we.timeBucket,timeFormat:Qt,rotateXAxis:Gr,chartType:kt,dataNames:Wo}),(0,a.jsx)(um,{pages:we==null?void 0:we.pages,timeFormat:Qt}),(0,E.default)(we)&&js&&(0,a.jsx)($t,{}),we!==null&&(0,E.default)(we==null?void 0:we.chart)&&(0,E.default)(we==null?void 0:we.pages)&&!js&&(0,a.jsx)($m,{})]}),y===w.errors&&!lt&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ca,{filters:Jt,onRemoveFilter:ke,onChangeExclusive:Ua,tnMapping:je,resetFilters:Ba}),(Xr===null||Xr)&&(0,E.default)(Yr)&&(0,a.jsx)($t,{}),typeof Xr=="boolean"&&!Xr&&(0,E.default)(Yr)&&(0,a.jsx)(pa,{filters:Jt,resetFilters:Va}),(0,a.jsx)(Im,{errors:Yr,onClick:r=>{Fs(r),_a(!0)}}),Lu&&(0,a.jsxs)("button",{type:"button",title:p("project.refreshStats"),onClick:()=>Zs(),className:U("relative mx-auto mt-2 flex items-center rounded-md bg-gray-50 p-2 text-sm font-medium text-gray-700 hover:bg-white hover:shadow-sm focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:bg-slate-900 dark:text-gray-50 dark:hover:bg-slate-800 focus:dark:border-gray-200 focus:dark:ring-gray-200",{"cursor-not-allowed opacity-50":Xr,hidden:Xr&&(0,E.default)(Yr)}),children:[(0,a.jsx)(Ga,{className:"mr-2 h-5 w-5"}),p("project.loadMore")]})]}),y===w.errors&&lt&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{Ds(null),Fs(null);let r=new URL(window.location.href);r.searchParams.delete("eid"),window.history.pushState({},"",r.toString())},className:"mx-auto mb-4 mt-2 flex items-center text-base font-normal text-gray-900 underline decoration-dashed hover:decoration-solid dark:text-gray-100 lg:mx-0 lg:mt-0",children:[(0,a.jsx)(Qr,{className:"h-4 w-4"}),p("project.backToErrors")]}),(J==null?void 0:J.details)&&(0,a.jsx)(Lm,{details:J.details}),(J==null?void 0:J.chart)&&(0,a.jsx)(Fm,{chart:J==null?void 0:J.chart,timeBucket:J==null?void 0:J.timeBucket,timeFormat:Qt,rotateXAxis:Gr,chartType:kt,dataNames:Wo}),(0,a.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:!(0,E.default)(J==null?void 0:J.params)&&(0,Le.default)(vl,r=>{let h=je[r],f=is[r];if(r==="cc"){let k=je[Rt],R=V=>{let{name:C,cc:A}=V;return A?(0,a.jsx)(Bt,{cc:A,name:C,language:oe}):(0,a.jsx)(Bt,{cc:C,language:oe})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:Rt,onFilter:ke,activeTab:y,name:(0,a.jsx)(hs,{onSelect:Vs,title:k}),data:J.params[Rt],rowMapper:R},Rt)}if(r==="br"){let k=je[ct],R=V=>{let{name:C,br:A}=V,z=qa[ct==="br"?C:A];return z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:z,className:"h-5 w-5",alt:""}),"\xA0",C]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(No,{className:"h-5 w-5"}),"\xA0",C]})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:ct,activeTab:y,onFilter:ke,name:(0,a.jsx)(Ns,{onSelect:Ks,title:k}),data:J.params[ct],rowMapper:R},ct)}if(r==="os"){let k=je[zt],R=V=>{let{name:C,os:A}=V,q=zt==="os"?C:A,z=vn[q],at=yn[q],mt=Tt==="dark"?at:z;if(mt||(mt=z),!mt)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(No,{className:"h-5 w-5"}),"\xA0",C]});let _e=`/${mt}`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:_e,className:"h-5 w-5 dark:fill-gray-50",alt:""}),"\xA0",C]})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:zt,activeTab:y,onFilter:ke,name:(0,a.jsx)(ci,{onSelect:Oi,title:k}),data:J.params[zt],rowMapper:R},zt)}return r==="dv"?(0,a.jsx)(De,{projectPassword:j,activeTab:y,icon:f,id:r,onFilter:ke,name:h,data:J.params[r],capitalize:!0},r):r==="pg"?(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,onFilter:ke,onFragmentChange:Li,rowMapper:({name:k})=>{if(!k)return(0,di.default)(p("project.redactedPage"));let R=k;try{R=decodeURIComponent(k)}catch{}return R},name:Ki[Ai],data:J.params[r],period:F,activeTab:y,pid:v,timeBucket:K,filters:Z,from:_?ae(_[0]):null,to:_?ae(_[1]):null,timezone:P},r):r==="lc"?(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,activeTab:y,onFilter:ke,name:h,data:J.params[r],rowMapper:({name:k})=>ra(k,oe)},r):(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,activeTab:y,onFilter:ke,name:h,data:J.params[r]},r)})}),(0,E.default)(J)&&mo&&(0,a.jsx)($t,{}),!mo&&(0,E.default)(J)&&(0,a.jsx)(Om,{})]}),y===w.alerts&&!Ps&&(W==null?void 0:W.isOwner)&&ne&&(0,a.jsx)(Zd,{projectId:v}),y===w.uptime&&(0,a.jsx)(om,{}),lr&&(y===w.traffic||y===w.performance)&&(0,a.jsx)($t,{}),io&&y===w.traffic&&(0,a.jsx)(pa,{filters:Z,resetFilters:Va}),Da&&y===w.performance&&(0,a.jsx)(pa,{filters:rt,resetFilters:Va}),y===w.traffic&&(0,a.jsxs)("div",{className:U("pt-2",{hidden:io||lr}),children:[!Wr&&!(0,E.default)(pi)&&(0,a.jsxs)("div",{className:"mb-5 flex flex-wrap justify-center gap-5 lg:justify-start",children:[(0,a.jsx)(Wc,{overall:pi,overallCompare:Gu,activePeriodCompare:Mr}),!(0,E.default)(We.meta)&&(0,Le.default)(We.meta,({key:r,current:h,previous:f})=>(0,a.jsxs)(u.default.Fragment,{children:[(0,a.jsx)(Vt,{label:p("project.metrics.xAvg",{x:r}),value:h.avg,change:h.avg-f.avg,goodChangeDirection:"down",valueMapper:(k,R)=>`${R==="badge"&&k>0?"+":""}${Cn(k)}`}),(0,a.jsx)(Vt,{label:p("project.metrics.xTotal",{x:r}),value:h.sum,change:h.sum-f.sum,goodChangeDirection:"down",valueMapper:(k,R)=>`${R==="badge"&&k>0?"+":""}${Cn(k)}`})]},r))]}),(0,a.jsx)("div",{className:U("h-80",{hidden:Es||Wr}),children:(0,a.jsx)("div",{className:"mt-5 h-80 md:mt-0 [&_svg]:!overflow-visible",id:"dataChart"})}),!Wr&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ca,{filters:Z,onRemoveFilter:ke,onChangeExclusive:Ua,tnMapping:je,resetFilters:Ba}),(0,a.jsx)(Ym,{metrics:Ea,onRemoveMetric:r=>mp(r),resetMetrics:up})]}),wt&&(0,a.jsx)("div",{className:"static mt-4 !bg-transparent",id:"loader",children:(0,a.jsxs)("div",{className:"loader-head dark:!bg-slate-800",children:[(0,a.jsx)("div",{className:"first dark:!bg-slate-600"}),(0,a.jsx)("div",{className:"second dark:!bg-slate-600"})]})}),(0,a.jsxs)("div",{className:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[!(0,E.default)(We.types)&&(0,Le.default)(hl,r=>{let h=je[r],f=is[r],k=(0,Oe.default)($o,V=>V.panelID===r),R=Wr?(fo==null?void 0:fo[Di])||{}:We.data;if(r==="cc"){let V=je[Rt],C=A=>{let{name:q,cc:z}=A;return z?(0,a.jsx)(Bt,{cc:z,name:q,language:oe}):(0,a.jsx)(Bt,{cc:q,language:oe})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:Rt,onFilter:ke,activeTab:y,name:(0,a.jsx)(hs,{onSelect:Vs,title:V}),data:R[Rt],customTabs:k,rowMapper:C},Rt)}if(r==="br"){let V=je[ct],C=A=>{let{name:q,br:z}=A,mt=qa[ct==="br"?q:z];return mt?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:mt,className:"h-5 w-5",alt:""}),"\xA0",q]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(No,{className:"h-5 w-5"}),"\xA0",q]})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:ct,activeTab:y,onFilter:ke,name:(0,a.jsx)(Ns,{onSelect:Ks,title:V}),data:R[ct],rowMapper:C},ct)}if(r==="os"){let V=je[zt],C=A=>{let{name:q,os:z}=A,at=zt==="os"?q:z,mt=vn[at],_e=yn[at],Je=Tt==="dark"?_e:mt;if(Je||(Je=mt),!Je)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(No,{className:"h-5 w-5"}),"\xA0",q]});let Pt=`/${Je}`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:Pt,className:"h-5 w-5 dark:fill-gray-50",alt:""}),"\xA0",q]})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:zt,activeTab:y,onFilter:ke,name:(0,a.jsx)(ci,{onSelect:Oi,title:V}),data:R[zt],rowMapper:C},zt)}if(r==="dv")return(0,a.jsx)(De,{projectPassword:j,activeTab:y,icon:f,id:r,onFilter:ke,name:h,data:R[r],customTabs:k,capitalize:!0},r);if(r==="ref")return(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,onFilter:ke,name:h,activeTab:y,data:R[r],customTabs:k,rowMapper:({name:V})=>(0,a.jsx)(Ad,{rowName:V})},r);if(r==="so"){let V=je[Ma];return(0,a.jsx)(De,{projectPassword:j,icon:f,id:Ma,activeTab:y,onFilter:ke,name:(0,a.jsx)(im,{onSelect:Hu,title:V}),data:R[Ma],customTabs:k,rowMapper:({name:C})=>decodeURIComponent(C)},Ma)}return r==="pg"?(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,onFilter:ke,onFragmentChange:Li,rowMapper:({name:V})=>{if(!V)return(0,di.default)(p("project.redactedPage"));let C=V;try{C=decodeURIComponent(V)}catch{}return C},name:Ki[Ai],data:R[r],customTabs:k,period:F,activeTab:y,pid:v,timeBucket:K,filters:Z,from:_?ae(_[0]):null,to:_?ae(_[1]):null,timezone:P},r):r==="lc"?(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,activeTab:y,onFilter:ke,name:h,data:R[r],rowMapper:({name:V})=>ra(V,oe),customTabs:k},r):(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,activeTab:y,onFilter:ke,name:h,data:R[r],customTabs:k},r)}),!Wr&&!(0,E.default)(We.data)&&(0,a.jsx)(qc,{customs:We.customs,properties:We.properties,filters:Z,onFilter:ke,chartData:Sr,customTabs:(0,Oe.default)($o,r=>r.panelID==="ce"),getCustomEventMetadata:lp,getPropertyMetadata:cp})]})]}),y===w.performance&&(0,a.jsxs)("div",{className:U("pt-8 md:pt-4",{hidden:Da||lr}),children:[!(0,E.default)(gi)&&(0,a.jsx)(Gc,{overall:gi,overallCompare:zu,activePeriodCompare:Mr}),(0,a.jsx)("div",{className:U("h-80",{hidden:Es}),children:(0,a.jsx)("div",{className:"h-80 [&_svg]:!overflow-visible",id:"dataChart"})}),(0,a.jsx)(ca,{filters:rt,onRemoveFilter:ke,onChangeExclusive:Ua,tnMapping:je,resetFilters:Ba}),wt&&(0,a.jsx)("div",{className:"static mt-4 !bg-transparent",id:"loader",children:(0,a.jsxs)("div",{className:"loader-head dark:!bg-slate-800",children:[(0,a.jsx)("div",{className:"first dark:!bg-slate-600"}),(0,a.jsx)("div",{className:"second dark:!bg-slate-600"})]})}),(0,a.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:!(0,E.default)(Jr.types)&&(0,Le.default)(bl,r=>{let h=je[r],f=is[r],k=(0,Oe.default)($o,R=>R.panelID===r);if(r==="cc"){let R=je[Rt],V=C=>{let{name:A,cc:q}=C;return q?(0,a.jsx)(Bt,{cc:q,name:A,language:oe}):(0,a.jsx)(Bt,{cc:A,language:oe})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:Rt,onFilter:ke,name:(0,a.jsx)(hs,{onSelect:Vs,title:R}),activeTab:y,data:Jr.data[Rt],customTabs:k,rowMapper:V,valueMapper:C=>eo(Zr(C),!0)},Rt)}if(r==="dv")return(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,onFilter:ke,name:h,activeTab:y,data:Jr.data[r],customTabs:k,valueMapper:R=>eo(Zr(R),!0),capitalize:!0},r);if(r==="pg")return(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,activeTab:y,onFilter:ke,name:h,data:Jr.data[r],customTabs:k,valueMapper:R=>eo(Zr(R),!0),rowMapper:({name:R})=>R||p("project.redactedPage")},r);if(r==="br"){let R=je[ct],V=C=>{let{name:A,br:q}=C,at=qa[ct==="br"?A:q];return at?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:at,className:"h-5 w-5",alt:""}),"\xA0",A]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(No,{className:"h-5 w-5"}),"\xA0",A]})};return(0,a.jsx)(De,{projectPassword:j,icon:f,id:ct,activeTab:y,onFilter:ke,name:(0,a.jsx)(Ns,{onSelect:Ks,title:R}),data:Jr.data[ct],rowMapper:V},ct)}return(0,a.jsx)(De,{projectPassword:j,icon:f,id:r,activeTab:y,onFilter:ke,name:h,data:Jr.data[r],customTabs:k,valueMapper:R=>eo(Zr(R),!0)},r)})})]}),y===w.funnels&&(0,a.jsxs)("div",{className:U("pt-4 md:pt-0",{hidden:!ot||lr}),children:[(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)("div",{className:"mt-5 h-80 md:mt-0",id:"dataChart"})}),wt&&(0,a.jsx)("div",{className:"static mt-4 !bg-transparent",id:"loader",children:(0,a.jsxs)("div",{className:"loader-head dark:!bg-slate-800",children:[(0,a.jsx)("div",{className:"first dark:!bg-slate-600"}),(0,a.jsx)("div",{className:"second dark:!bg-slate-600"})]})})]})]})}),(0,a.jsx)(wd,{isOpened:Nu,onClose:()=>Cs(!1),onSubmit:gp,activeTB:p(`project.${K}`),tb:K}),(0,a.jsx)(Rd,{isOpened:Mu,onClose:()=>wi(!1)}),(0,a.jsx)(Id,{project:W,projectPassword:j,pid:v,funnel:As,isOpened:Pu,allowedToManage:Ot,onClose:()=>{Sa(!1),Ti(void 0)},onSubmit:async(r,h)=>{if(As){await Vu(As.id,r,h);return}await Bu(r,h)},loading:Ko}),(0,a.jsx)(Vd,{type:y===w.errors?"errors":"traffic",projectPassword:j,showModal:tp,setShowModal:La,setProjectFilter:tl,pid:v,tnMapping:je,filters:y===w.performance?rt:y===w.sessions?mr:y===w.errors?Jt:Z}),(0,a.jsx)(Km,{projectPassword:j,showModal:Cu,setShowModal:r=>{Ss(r),$s(void 0)},onSubmit:()=>{Ri([]),Os(null),$s(void 0)},defaultView:Ou,pid:v,tnMapping:je}),!G&&(0,a.jsx)(To,{authenticated:ne,minimal:!0,showDBIPMessage:!0})]})})}})},uu=(0,u.memo)(gd(Vg));var Kg=e=>e.ui.projects.dashboardTabs===Dl?{projects:e.ui.projects.projects,sharedProjects:e.ui.projects.sharedProjects,isLoading:e.ui.projects.isLoadingShared,cache:e.ui.cache.analytics,cachePerf:e.ui.cache.analyticsPerf,cacheFunnels:e.ui.cache.funnels,projectViewPrefs:e.ui.cache.projectViewPrefs,authenticated:e.auth.authenticated,authLoading:e.auth.loading,timezone:e.auth.user.timezone,extensions:e.ui.misc.extensions,user:e.auth.user,projectTab:e.ui.projects.projectTab,customEventsPrefs:e.ui.cache.customEventsPrefs,liveStats:e.ui.projects.liveStats,password:e.ui.projects.password,theme:e.ui.theme.theme}:{projects:e.ui.projects.projects,sharedProjects:e.ui.projects.sharedProjects,isLoading:e.ui.projects.isLoading,authLoading:e.auth.loading,cache:e.ui.cache.analytics,cachePerf:e.ui.cache.analyticsPerf,cacheFunnels:e.ui.cache.funnels,projectViewPrefs:e.ui.cache.projectViewPrefs,authenticated:e.auth.authenticated,timezone:e.auth.user.timezone,extensions:e.ui.misc.extensions,user:e.auth.user,projectTab:e.ui.projects.projectTab,customEventsPrefs:e.ui.cache.customEventsPrefs,liveStats:e.ui.projects.liveStats,password:e.ui.projects.password,theme:e.ui.theme.theme},Hg=e=>({setProjectCache:(t,s,n)=>{e(He.setProjectCache({pid:t,key:n,data:s}))},setProjectViewPrefs:(t,s,n,d)=>{e(He.setProjectViewPrefs({pid:t,period:s,timeBucket:n,rangeDate:d}))},setProjectCachePerf:(t,s,n)=>{e(He.setProjectCachePerf({pid:t,data:s,key:n}))},setFunnelsCache:(t,s,n)=>{e(He.setFunnelsCache({pid:t,data:s,key:n}))},setPublicProject:t=>{e(He.setPublicProject({project:t}))},setProjects:(t,s)=>{e(He.setProjects({projects:t,shared:s}))},updateProject:(t,s)=>{e(He.updateProject({pid:t,project:s}))},setLiveStatsForProject:(t,s)=>{e(He.setLiveStatsProject({id:t,count:s}))},setProjectTab:t=>{e(He.setProjectTab(t))},setProjectForcastCache:(t,s,n)=>{e(He.setProjectForecastCache({pid:t,data:s,key:n}))},setCustomEventsPrefs:(t,s)=>{e(He.setCustomEventsPrefs({pid:t,data:s}))}}),pu=Al(Kg,Hg)(uu);var fu=pu;var qg=l(Sp()),gu=l(Ql());Ct();var bu=l(T()),Yg=()=>[{rel:"stylesheet",href:Xc}],Xg=({location:e})=>{let{pathname:t}=e,s=(0,gu.default)(t,"/")[2],n=`${bo}project/ogimage/${s}`;return[{property:"og:image",content:n},{property:"twitter:image",content:n}]};function hu(){let{theme:e,embedded:t,isAuth:s,queryPassword:n,tabs:d}=ul();return(0,bu.jsx)(fu,{ssrTheme:e,ssrAuthenticated:s,embedded:t,queryPassword:n,projectQueryTabs:d})}export{hu as default,Yg as links,Xg as meta};
